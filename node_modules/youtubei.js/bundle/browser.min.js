/* eslint-disable */
var LI=Object.create;var Nf=Object.defineProperty;var DI=Object.getOwnPropertyDescriptor;var jI=Object.getOwnPropertyNames;var YI=Object.getPrototypeOf,UI=Object.prototype.hasOwnProperty;var s=(n,e)=>Nf(n,"name",{value:e,configurable:!0});var re=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),Oi=(n,e)=>{for(var t in e)Nf(n,t,{get:e[t],enumerable:!0})},WI=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of jI(e))!UI.call(n,r)&&r!==t&&Nf(n,r,{get:()=>e[r],enumerable:!(i=DI(e,r))||i.enumerable});return n};var GI=(n,e,t)=>(t=n!=null?LI(YI(n)):{},WI(e||!n||!n.__esModule?Nf(t,"default",{value:n,enumerable:!0}):t,n));var tw=re(J0=>{"use strict";Object.defineProperty(J0,"__esModule",{value:!0});var Ff=class{static visit(e,t){return e.elements.map(i=>t.visitNode(i))}};s(Ff,"ArrayExpression");J0.default=Ff});var Bf=re(Of=>{"use strict";Object.defineProperty(Of,"__esModule",{value:!0});Of.namedFunction=void 0;var QI=s((n,e)=>Object.defineProperty(e,"name",{value:n}),"namedFunction");Of.namedFunction=QI});var iw=re(H0=>{"use strict";Object.defineProperty(H0,"__esModule",{value:!0});var ZI=Bf(),Lf=class{static visit(e,t){let{params:i,body:r}=e;return(0,ZI.namedFunction)("anonymous function",l=>{let h=0;for(let v of i)t.visitNode(v),v.type==="Identifier"?t.scope.set(v.name,l[h]):console.warn("Unhandled param type",v.type),h++;return t.visitNode(r)})}};s(Lf,"ArrowFunctionExpression");H0.default=Lf});var nw=re(z0=>{"use strict";Object.defineProperty(z0,"__esModule",{value:!0});var Df=class{static visit(e,t){let i=e.operator,r=t.visitNode(e.right);switch(i){case"=":if(e.left.type==="MemberExpression"){let a=t.visitNode(e.left.object),l=t.visitNode(e.left.property);return a[l]=r}else if(e.left.type==="Identifier")return t.scope.set(e.left.name,r),t.scope.get(e.left.name);console.warn("Unhandled left node",e.left);break;case"+=":if(e.left.type==="MemberExpression"){let a=t.visitNode(e.left.object),l=t.visitNode(e.left.property);return a[l]+=r}else if(e.left.type==="Identifier"){let a=t.visitNode(e.left)+r;return t.scope.set(e.left.name,a),t.scope.get(e.left.name)}console.warn("Unhandled left node",e.left);break;case"-=":if(e.left.type==="MemberExpression"){let a=t.visitNode(e.left.object),l=t.visitNode(e.left.property);return a[l]-=r}else if(e.left.type==="Identifier"){let a=t.visitNode(e.left)-r;return t.scope.set(e.left.name,a),t.scope.get(e.left.name)}console.warn("Unhandled left node",e.left);break;case"*=":if(e.left.type==="MemberExpression"){let a=t.visitNode(e.left.object),l=t.visitNode(e.left.property);return a[l]*=r}else if(e.left.type==="Identifier"){let a=t.visitNode(e.left)*r;return t.scope.set(e.left.name,a),t.scope.get(e.left.name)}console.warn("Unhandled left node",e.left);break;case"/=":if(e.left.type==="MemberExpression"){let a=t.visitNode(e.left.object),l=t.visitNode(e.left.property);return a[l]/=r}else if(e.left.type==="Identifier"){let a=t.visitNode(e.left)/r;return t.scope.set(e.left.name,a),t.scope.get(e.left.name)}console.warn("Unhandled left node",e.left);break;case"%=":if(e.left.type==="MemberExpression"){let a=t.visitNode(e.left.object),l=t.visitNode(e.left.property);return a[l]%=r}else if(e.left.type==="Identifier"){let a=t.visitNode(e.left)%r;return t.scope.set(e.left.name,a),t.scope.get(e.left.name)}console.warn("Unhandled left node",e.left);break;case"**=":if(e.left.type==="MemberExpression"){let a=t.visitNode(e.left.object),l=t.visitNode(e.left.property);return a[l]**=r}else if(e.left.type==="Identifier"){let a=t.visitNode(e.left)**r;return t.scope.set(e.left.name,a),t.scope.get(e.left.name)}console.warn("Unhandled left node",e.left);break;case"<<=":if(e.left.type==="MemberExpression"){let a=t.visitNode(e.left.object),l=t.visitNode(e.left.property);return a[l]<<=r}else if(e.left.type==="Identifier"){let a=t.visitNode(e.left)<<r;return t.scope.set(e.left.name,a),t.scope.get(e.left.name)}console.warn("Unhandled left node",e.left);break;case">>=":if(e.left.type==="MemberExpression"){let a=t.visitNode(e.left.object),l=t.visitNode(e.left.property);return a[l]>>=r}else if(e.left.type==="Identifier"){let a=t.visitNode(e.left)>>r;return t.scope.set(e.left.name,a),t.scope.get(e.left.name)}console.warn("Unhandled left node",e.left);break;case">>>=":if(e.left.type==="MemberExpression"){let a=t.visitNode(e.left.object),l=t.visitNode(e.left.property);return a[l]>>>=r}else if(e.left.type==="Identifier"){let a=t.visitNode(e.left)>>>r;return t.scope.set(e.left.name,a),t.scope.get(e.left.name)}console.warn("Unhandled left node",e.left);break;case"&=":if(e.left.type==="MemberExpression"){let a=t.visitNode(e.left.object),l=t.visitNode(e.left.property);return a[l]&=r}else if(e.left.type==="Identifier"){let a=t.visitNode(e.left)&r;return t.scope.set(e.left.name,a),t.scope.get(e.left.name)}console.warn("Unhandled left node",e.left);break}}};s(Df,"AssignmentExpression");z0.default=Df});var ow=re(K0=>{"use strict";Object.defineProperty(K0,"__esModule",{value:!0});var jf=class{static visit(e,t){let i=e.operator,r=t.visitNode(e.left),a=t.visitNode(e.right);switch(i){case"!=":return r!=a;case"!==":return r!==a;case"%":return r%a;case"&":return r&a;case"*":return r*a;case"**":return r**a;case"+":return r+a;case"-":return r-a;case"/":return r/a;case"<":return r<a;case"<<":return r<<a;case"<=":return r<=a;case"==":return r==a;case"===":return r===a;case">":return r>a;case">=":return r>=a;case">>":return r>>a;case">>>":return r>>>a;case"^":return r^a;case"|":return r|a;case"in":return r in a;case"instanceof":return r instanceof a}}};s(jf,"BinaryExpression");K0.default=jf});var rw=re(q0=>{"use strict";Object.defineProperty(q0,"__esModule",{value:!0});var Yf=class{static visit(e,t){for(let i of e.body){let r=t.visitNode(i);if(i.type==="ReturnStatement"||r==="break"||r==="continue"||(i.type==="WhileStatement"||i.type==="IfStatement"||i.type==="ForStatement"||i.type==="TryStatement")&&!!r)return r}}};s(Yf,"BlockStatement");q0.default=Yf});var sw=re($0=>{"use strict";Object.defineProperty($0,"__esModule",{value:!0});var Uf=class{static visit(e,t){return"break"}};s(Uf,"BreakStatement");$0.default=Uf});var uw=re(us=>{"use strict";var aw=us&&us.__classPrivateFieldGet||function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},X0,Q0;Object.defineProperty(us,"__esModule",{value:!0});var as=class{static visit(e,t){let i,r;if(e.callee.type==="MemberExpression"?(i=t.getName(e.callee.object),r=t.getName(e.callee.property)):e.callee.type==="Identifier"&&(r=e.callee.name),i&&t.listeners[i]){let h=t.listeners[i](e,t);if(h!=="proceed")return h}if(r&&r!=="toString"&&t.listeners[r]){let h=t.listeners[r](e,t);if(h!=="proceed")return h}if(e.callee.type==="MemberExpression"){if(Jo.has(e,t))return Jo.execute(e,t);let h=t.visitNode(e.callee.object),v=e.callee.computed?t.visitNode(e.callee.property):t.getName(e.callee.property),_=e.arguments.map(p=>t.visitNode(p));return typeof h[v]!="function"&&aw(this,X0,"m",Q0).call(this,e,t),h[v].toString().includes("[native code]")?h[v](..._):h[v](_)}let a=t.visitNode(e.callee),l=e.arguments.map(h=>t.visitNode(h));return typeof a!="function"&&aw(this,X0,"m",Q0).call(this,e,t),a(l)}};s(as,"CallExpression");us.default=as;X0=as,Q0=s(function(e,t){if(e.callee.type==="MemberExpression")throw new Error(`${e.callee.object.type==="Identifier"?e.callee.object.name:"<object>"}.${e.callee.property.type==="Identifier"?e.callee.property.name:"?"} is not a function`);if(e.callee.type==="Identifier")throw new Error(`${e.callee.name} is not a function`);if(e.callee.type==="SequenceExpression"){let i=[],r=[];throw i.push("("),e.callee.expressions.forEach(a=>{a.type==="Literal"?r.push(a.raw||""):a.type==="Identifier"?r.push(a.name):a.type==="MemberExpression"&&(a.computed?r.push(`${t.getName(a.object)}[${t.getName(a.property)||"..."}]`):r.push(`${t.getName(a.object)}.${t.getName(a.property)}`))}),i.push(r.join(", ")),i.push(")"),new Error(`${i.join("")} is not a function`)}},"_CallExpression_throwError");var Jo=class{static has(e,t){var i;return e.callee.type==="MemberExpression"?!!(!((i=this.builtins)===null||i===void 0)&&i[t.getName(e.callee.property)||""]):!1}static execute(e,t){if(e.callee.type==="MemberExpression")return this.builtins[t.getName(e.callee.property)||""](e,t)}};s(Jo,"Builtins");Jo.builtins={forEach:(n,e)=>{let t=n.arguments.map(i=>e.visitNode(i));if(n.callee.type==="MemberExpression"){let i=e.visitNode(n.callee.object);t.length>1&&e.scope.set("_this",t.slice(-1)[0]);let r=0;for(let a of i)t[0]([a,r++,i])}else console.warn("Unhandled callee type:",n.callee.type)},toString:(n,e)=>{if(n.callee.type==="MemberExpression")return e.visitNode(n.callee.object).toString()}}});var lw=re(Z0=>{"use strict";Object.defineProperty(Z0,"__esModule",{value:!0});var Wf=class{static visit(e,t){let{test:i,consequent:r,alternate:a}=e;return t.visitNode(i)?t.visitNode(r):t.visitNode(a)}};s(Wf,"ConditionalExpression");Z0.default=Wf});var cw=re(ey=>{"use strict";Object.defineProperty(ey,"__esModule",{value:!0});var Gf=class{static visit(e,t){return"continue"}};s(Gf,"ContinueStatement");ey.default=Gf});var dw=re(ty=>{"use strict";Object.defineProperty(ty,"__esModule",{value:!0});var Jf=class{static visit(e,t){return t.visitNode(e.expression)}};s(Jf,"ExpressionStatement");ty.default=Jf});var pw=re(iy=>{"use strict";Object.defineProperty(iy,"__esModule",{value:!0});var Hf=class{static visit(e,t){e.init&&t.visitNode(e.init);let i=s(()=>e.test?t.visitNode(e.test):!0,"test");for(;i();){let a=t.visitNode(e.body);if(a!=="continue"){if(a==="break")break;if(e.update&&t.visitNode(e.update),a&&e.body.type!=="ExpressionStatement")return a}}}};s(Hf,"ForStatement");iy.default=Hf});var fw=re(ny=>{"use strict";Object.defineProperty(ny,"__esModule",{value:!0});var eS=Bf(),zf=class{static visit(e,t){let{params:i,body:r}=e,a=t.visitNode(e.id),l=(0,eS.namedFunction)(a,h=>{let v=0;for(let _ of i)t.visitNode(_),_.type==="Identifier"?t.scope.set(_.name,h[v]):console.warn("Unhandled param type",_.type),v++;return t.visitNode(r)});t.scope.set(a,l)}};s(zf,"FunctionDeclaration");ny.default=zf});var hw=re(oy=>{"use strict";Object.defineProperty(oy,"__esModule",{value:!0});var tS=Bf(),Kf=class{static visit(e,t){let{params:i,body:r}=e;return(0,tS.namedFunction)("anonymous function",l=>{let h=0;for(let v of i)t.visitNode(v),v.type==="Identifier"?t.scope.set(v.name,l[h]):console.warn("Unhandled param type",v.type),h++;return t.visitNode(r)})}};s(Kf,"FunctionExpression");oy.default=Kf});var mw=re(ry=>{"use strict";Object.defineProperty(ry,"__esModule",{value:!0});var qf=class{static visit(e,t){if(t.listeners[e.name]){let i=t.listeners[e.name](e,t);if(i!=="proceed")return i}return t.scope.has(e.name)?t.scope.get(e.name):e.name}};s(qf,"Identifier");ry.default=qf});var _w=re(sy=>{"use strict";Object.defineProperty(sy,"__esModule",{value:!0});var $f=class{static visit(e,t){if(t.visitNode(e.test))return t.visitNode(e.consequent);if(e.alternate)return t.visitNode(e.alternate)}};s($f,"IfStatement");sy.default=$f});var vw=re(ay=>{"use strict";Object.defineProperty(ay,"__esModule",{value:!0});var Xf=class{static visit(e,t){return e.value}};s(Xf,"Literal");ay.default=Xf});var yw=re(uy=>{"use strict";Object.defineProperty(uy,"__esModule",{value:!0});var Qf=class{static visit(e,t){switch(e.operator){case"&&":{let r=t.visitNode(e.left);return r===!0?t.visitNode(e.right):r}case"||":return t.visitNode(e.left)||t.visitNode(e.right);case"??":{let r=t.visitNode(e.left);return r!=null?r:t.visitNode(e.right)}}}};s(Qf,"LogicalExpression");uy.default=Qf});var bw=re(ly=>{"use strict";Object.defineProperty(ly,"__esModule",{value:!0});var Zf=class{static visit(e,t){let{object:i,property:r,computed:a}=e,l=t.visitNode(i),h=a?t.visitNode(r):t.getName(r);if(h!==void 0||h!==null){if(t.listeners[h]){let v=t.listeners[h](e,t);if(v!=="proceed")return v}return l==null?void 0:l[h]}}};s(Zf,"MemberExpression");ly.default=Zf});var ww=re(cy=>{"use strict";Object.defineProperty(cy,"__esModule",{value:!0});var eh=class{static visit(e,t){let i=t.visitNode(e.callee),r=e.arguments.map(a=>t.visitNode(a));return new i(r)}};s(eh,"NewExpression");cy.default=eh});var gw=re(dy=>{"use strict";Object.defineProperty(dy,"__esModule",{value:!0});var th=class{static visit(e,t){let i={};for(let r of e.properties)if(r.type==="Property")i=Object.assign(Object.assign({},i),t.visitNode(r));else throw new Error(`Unhandled property type: ${r.type}`);return i}};s(th,"ObjectExpression");dy.default=th});var xw=re(py=>{"use strict";Object.defineProperty(py,"__esModule",{value:!0});var ih=class{static init(e,t){let i=e.computed?t.visitNode(e.key):t.getName(e.key),r=t.visitNode(e.value);if(i)return{[i]:r}}static get(e,t){throw new TypeError("Not implemented: Property.get")}static set(e,t){throw new TypeError("Not implemented: Property.set")}static visit(e,t){switch(e.kind){case"init":return this.init(e,t);case"get":return this.get(e,t);case"set":return this.set(e,t);default:throw new Error(`Unhandled property kind: ${e.kind}`)}}};s(ih,"Property");py.default=ih});var Tw=re(fy=>{"use strict";Object.defineProperty(fy,"__esModule",{value:!0});var nh=class{static visit(e,t){if(e.argument)return t.visitNode(e.argument)}};s(nh,"ReturnStatement");fy.default=nh});var Iw=re(hy=>{"use strict";Object.defineProperty(hy,"__esModule",{value:!0});var oh=class{static visit(e,t){let i;for(let r of e.expressions)i=t.visitNode(r);return i}};s(oh,"SequenceExpression");hy.default=oh});var Sw=re(my=>{"use strict";Object.defineProperty(my,"__esModule",{value:!0});var rh=class{static visit(e,t){for(let i of e.consequent){let r=t.visitNode(i);if(i.type==="ContinueStatement")return r;if(i.type==="BreakStatement")return r}}};s(rh,"SwitchCase");my.default=rh});var Cw=re(_y=>{"use strict";Object.defineProperty(_y,"__esModule",{value:!0});var sh=class{static visit(e,t){let i=t.visitNode(e.discriminant),r=!1,a=-1,l=0;for(;;){let h=e.cases[l];if(r){let v=t.visitNode(h);if(v==="break")break;if(v==="continue")return v;if(++l,l>=e.cases.length){l=0;break}else continue}if(r=h&&i===t.visitNode(h.test),r===void 0&&l>e.cases.length)break;if(h&&!r&&!h.test){a=l,l+=1;continue}if(!h&&!r&&a!==-1){r=!0,l=a;continue}r||++l}}};s(sh,"SwitchStatement");_y.default=sh});var Ew=re(vy=>{"use strict";Object.defineProperty(vy,"__esModule",{value:!0});var ah=class{static visit(e,t){return t.scope.get("_this")}};s(ah,"ThisExpression");vy.default=ah});var kw=re(yy=>{"use strict";Object.defineProperty(yy,"__esModule",{value:!0});var uh=class{static visit(e,t){throw t.visitNode(e.argument)}};s(uh,"ThrowStatement");yy.default=uh});var Pw=re(by=>{"use strict";Object.defineProperty(by,"__esModule",{value:!0});var lh=class{static visit(e,t){try{return t.visitNode(e.block)}catch(i){if(e.handler)return e.handler.param&&e.handler.param.type==="Identifier"&&t.scope.set(e.handler.param.name,i),t.visitNode(e.handler.body)}finally{t.visitNode(e.finalizer)}}};s(lh,"TryStatement");by.default=lh});var Nw=re(wy=>{"use strict";Object.defineProperty(wy,"__esModule",{value:!0});var ch=class{static visit(e,t){let i=e.operator;switch(i){case"-":return-t.visitNode(e.argument);case"+":return+t.visitNode(e.argument);case"!":return!t.visitNode(e.argument);case"~":return~t.visitNode(e.argument);case"void":{t.visitNode(e.argument);return}case"typeof":return typeof t.visitNode(e.argument);case"delete":{if(e.argument.type==="MemberExpression"){let r=t.visitNode(e.argument.object),a=e.argument.computed?t.visitNode(e.argument.property):t.getName(e.argument.property);return delete r[a]}else if(e.argument.type==="Identifier")return t.scope.delete(e.argument.name);return!0}default:console.warn("Unhandled UnaryExpression operator",i)}}};s(ch,"UnaryExpression");wy.default=ch});var Mw=re(gy=>{"use strict";Object.defineProperty(gy,"__esModule",{value:!0});var dh=class{static visit(e,t){switch(e.operator){case"++":if(e.argument.type==="MemberExpression"){let r=t.visitNode(e.argument.object);return r[t.visitNode(e.argument.property)]++}else if(e.argument.type==="Identifier"){let r=t.visitNode(e.argument);return t.scope.set(e.argument.name,r+1),e.prefix?++r:r}break;case"--":if(e.argument.type==="MemberExpression"){let r=t.visitNode(e.argument.object);return r[t.visitNode(e.argument.property)]--}else if(e.argument.type==="Identifier"){let r=t.visitNode(e.argument);return t.scope.set(e.argument.name,r-1),e.prefix?--r:r}break}}};s(dh,"UpdateExpression");gy.default=dh});var Aw=re(xy=>{"use strict";Object.defineProperty(xy,"__esModule",{value:!0});var ph=class{static visit(e,t){e.declarations.forEach(i=>{let{id:r,init:a}=i,l=t.getName(r),h=a?t.visitNode(a):void 0;l&&t.scope.set(l,h),typeof h=="object"&&h!==null&&t.scope.set("_this",h)})}};s(ph,"VariableDeclaration");xy.default=ph});var Vw=re(Ty=>{"use strict";Object.defineProperty(Ty,"__esModule",{value:!0});var fh=class{static visit(e,t){for(;t.visitNode(e.test);){let i=t.visitNode(e.body);if(i==="break")break;if(i!=="continue"&&i)return i}}};s(fh,"WhileStatement");Ty.default=fh});var Rw=re(ls=>{"use strict";var me=ls&&ls.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ls,"__esModule",{value:!0});var iS=me(tw()),nS=me(iw()),oS=me(nw()),rS=me(ow()),sS=me(rw()),aS=me(sw()),uS=me(uw()),lS=me(lw()),cS=me(cw()),dS=me(dw()),pS=me(pw()),fS=me(fw()),hS=me(hw()),mS=me(mw()),_S=me(_w()),vS=me(vw()),yS=me(yw()),bS=me(bw()),wS=me(ww()),gS=me(gw()),xS=me(xw()),TS=me(Tw()),IS=me(Iw()),SS=me(Sw()),CS=me(Cw()),ES=me(Ew()),kS=me(kw()),PS=me(Pw()),NS=me(Nw()),MS=me(Mw()),AS=me(Aw()),VS=me(Vw()),RS={ArrayExpression:iS.default,ArrowFunctionExpression:nS.default,AssignmentExpression:oS.default,BinaryExpression:rS.default,BlockStatement:sS.default,BreakStatement:aS.default,CallExpression:uS.default,ConditionalExpression:lS.default,ContinueStatement:cS.default,ExpressionStatement:dS.default,ForStatement:pS.default,FunctionDeclaration:fS.default,FunctionExpression:hS.default,Identifier:mS.default,IfStatement:_S.default,Literal:vS.default,LogicalExpression:yS.default,MemberExpression:bS.default,NewExpression:wS.default,ObjectExpression:gS.default,Property:xS.default,ReturnStatement:TS.default,SequenceExpression:IS.default,SwitchCase:SS.default,SwitchStatement:CS.default,ThisExpression:ES.default,ThrowStatement:kS.default,TryStatement:PS.default,UnaryExpression:NS.default,UpdateExpression:MS.default,VariableDeclaration:AS.default,WhileStatement:VS.default};function FS(n){let e=RS[n];if(!e){let t=new Error(`Module not found: ${n}`);throw t.code="MODULE_NOT_FOUND",t}return e}s(FS,"getNode");ls.default=FS});var Fw=re((UE,OS)=>{OS.exports={name:"jintr",version:"0.4.1",description:"A tiny JavaScript interpreter written in TypeScript.",main:"./dist/index.js",types:"./dist",scripts:{test:"npx jest --verbose",build:"npx tsc",lint:"npx eslint ./src/**/*.ts","lint:fix":"npx eslint --fix ./src/**/*.ts","build:nodes-map":"node ./scripts/build-nodes-map.js",prepare:"npm run build",watch:"npx tsc --watch"},author:"LuanRT <luan.lrt4@gmail.com> (https://github.com/LuanRT)",funding:["https://github.com/sponsors/LuanRT"],keywords:["js","vm","typescript","javascript","interpreter"],license:"MIT",devDependencies:{"@types/estree":"^1.0.0","@types/jest":"^28.1.7","@typescript-eslint/eslint-plugin":"^5.33.1","@typescript-eslint/parser":"^5.33.1",eslint:"^8.22.0","eslint-plugin-tsdoc":"^0.2.16",glob:"^8.0.3",jest:"^28.1.3","ts-jest":"^28.0.8",typescript:"^4.7.4"},dependencies:{acorn:"^8.8.0"},bugs:{url:"https://github.com/LuanRT/Jinter/issues"},homepage:"https://github.com/LuanRT/Jinter#readme"}});var Lw=re(Hn=>{"use strict";var BS=Hn&&Hn.__classPrivateFieldGet||function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},Ow=Hn&&Hn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}},Iy,Bw;Object.defineProperty(Hn,"__esModule",{value:!0});var LS=Ow(Rw()),DS=Ow(Fw()),hh=class{constructor(e){Iy.add(this),this.scope=new Map,this.listeners={},this.ast=e}run(){let e;for(let t of this.ast)e=this.visitNode(t);return e}visitNode(e){if(!e)return null;try{return(0,LS.default)(e.type).visit(e,this)}catch(t){BS(this,Iy,"m",Bw).call(this,e,t)}}getName(e){if(e.type==="Identifier")return e.name;if(e.type==="Literal")return e.value}on(e,t){this.listeners[e]=t}};s(hh,"Visitor");Hn.default=hh;Iy=new WeakSet,Bw=s(function(e,t){if(t.code==="MODULE_NOT_FOUND")console.warn(`Node ${e.type} not found!
This is a bug, please report it at ${DS.default.bugs.url}.`);else throw t},"_Visitor_printError")});var jw=re((mh,Dw)=>{(function(n,e){typeof mh=="object"&&typeof Dw<"u"?e(mh):typeof define=="function"&&define.amd?define(["exports"],e):(n=typeof globalThis<"u"?globalThis:n||self,e(n.acorn={}))})(mh,function(n){"use strict";var e=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,154,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,357,0,62,13,1495,6,110,6,6,9,4759,9,787719,239],t=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,190,0,80,921,103,110,18,195,2637,96,16,1070,4050,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,46,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,482,44,11,6,17,0,322,29,19,43,1269,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4152,8,221,3,5761,15,7472,3104,541,1507,4938],i="\u200C\u200D\xB7\u0300-\u036F\u0387\u0483-\u0487\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u0669\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u06F0-\u06F9\u0711\u0730-\u074A\u07A6-\u07B0\u07C0-\u07C9\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0966-\u096F\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09E6-\u09EF\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A66-\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AE6-\u0AEF\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B66-\u0B6F\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0BE6-\u0BEF\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CE6-\u0CEF\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D66-\u0D6F\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0E50-\u0E59\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0ED0-\u0ED9\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1040-\u1049\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F-\u109D\u135D-\u135F\u1369-\u1371\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u17E0-\u17E9\u180B-\u180D\u180F-\u1819\u18A9\u1920-\u192B\u1930-\u193B\u1946-\u194F\u19D0-\u19DA\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AB0-\u1ABD\u1ABF-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BB0-\u1BB9\u1BE6-\u1BF3\u1C24-\u1C37\u1C40-\u1C49\u1C50-\u1C59\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u203F\u2040\u2054\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA620-\uA629\uA66F\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F1\uA8FF-\uA909\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9D0-\uA9D9\uA9E5\uA9F0-\uA9F9\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA50-\uAA59\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uABF0-\uABF9\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFF10-\uFF19\uFF3F",r="\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC",a={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},l="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",h={5:l,"5module":l+" export import",6:l+" const class extends export import super"},v=/^in(stanceof)?$/,_=new RegExp("["+r+"]"),p=new RegExp("["+r+i+"]");function b(o,u){for(var m=65536,y=0;y<u.length;y+=2){if(m+=u[y],m>o)return!1;if(m+=u[y+1],m>=o)return!0}}s(b,"isInAstralSet");function I(o,u){return o<65?o===36:o<91?!0:o<97?o===95:o<123?!0:o<=65535?o>=170&&_.test(String.fromCharCode(o)):u===!1?!1:b(o,t)}s(I,"isIdentifierStart");function C(o,u){return o<48?o===36:o<58?!0:o<65?!1:o<91?!0:o<97?o===95:o<123?!0:o<=65535?o>=170&&p.test(String.fromCharCode(o)):u===!1?!1:b(o,t)||b(o,e)}s(C,"isIdentifierChar");var k=s(function(u,m){m===void 0&&(m={}),this.label=u,this.keyword=m.keyword,this.beforeExpr=!!m.beforeExpr,this.startsExpr=!!m.startsExpr,this.isLoop=!!m.isLoop,this.isAssign=!!m.isAssign,this.prefix=!!m.prefix,this.postfix=!!m.postfix,this.binop=m.binop||null,this.updateContext=null},"TokenType");function F(o,u){return new k(o,{beforeExpr:!0,binop:u})}s(F,"binop");var V={beforeExpr:!0},D={startsExpr:!0},Y={};function B(o,u){return u===void 0&&(u={}),u.keyword=o,Y[o]=new k(o,u)}s(B,"kw");var w={num:new k("num",D),regexp:new k("regexp",D),string:new k("string",D),name:new k("name",D),privateId:new k("privateId",D),eof:new k("eof"),bracketL:new k("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new k("]"),braceL:new k("{",{beforeExpr:!0,startsExpr:!0}),braceR:new k("}"),parenL:new k("(",{beforeExpr:!0,startsExpr:!0}),parenR:new k(")"),comma:new k(",",V),semi:new k(";",V),colon:new k(":",V),dot:new k("."),question:new k("?",V),questionDot:new k("?."),arrow:new k("=>",V),template:new k("template"),invalidTemplate:new k("invalidTemplate"),ellipsis:new k("...",V),backQuote:new k("`",D),dollarBraceL:new k("${",{beforeExpr:!0,startsExpr:!0}),eq:new k("=",{beforeExpr:!0,isAssign:!0}),assign:new k("_=",{beforeExpr:!0,isAssign:!0}),incDec:new k("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new k("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:F("||",1),logicalAND:F("&&",2),bitwiseOR:F("|",3),bitwiseXOR:F("^",4),bitwiseAND:F("&",5),equality:F("==/!=/===/!==",6),relational:F("</>/<=/>=",7),bitShift:F("<</>>/>>>",8),plusMin:new k("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:F("%",10),star:F("*",10),slash:F("/",10),starstar:new k("**",{beforeExpr:!0}),coalesce:F("??",1),_break:B("break"),_case:B("case",V),_catch:B("catch"),_continue:B("continue"),_debugger:B("debugger"),_default:B("default",V),_do:B("do",{isLoop:!0,beforeExpr:!0}),_else:B("else",V),_finally:B("finally"),_for:B("for",{isLoop:!0}),_function:B("function",D),_if:B("if"),_return:B("return",V),_switch:B("switch"),_throw:B("throw",V),_try:B("try"),_var:B("var"),_const:B("const"),_while:B("while",{isLoop:!0}),_with:B("with"),_new:B("new",{beforeExpr:!0,startsExpr:!0}),_this:B("this",D),_super:B("super",D),_class:B("class",D),_extends:B("extends",V),_export:B("export"),_import:B("import",D),_null:B("null",D),_true:B("true",D),_false:B("false",D),_in:B("in",{beforeExpr:!0,binop:7}),_instanceof:B("instanceof",{beforeExpr:!0,binop:7}),_typeof:B("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:B("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:B("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},ye=/\r\n?|\n|\u2028|\u2029/,Ke=new RegExp(ye.source,"g");function Ie(o){return o===10||o===13||o===8232||o===8233}s(Ie,"isNewLine");function Qe(o,u,m){m===void 0&&(m=o.length);for(var y=u;y<m;y++){var g=o.charCodeAt(y);if(Ie(g))return y<m-1&&g===13&&o.charCodeAt(y+1)===10?y+2:y+1}return-1}s(Qe,"nextLineBreak");var ne=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,J=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,ae=Object.prototype,ue=ae.hasOwnProperty,at=ae.toString,ut=Object.hasOwn||function(o,u){return ue.call(o,u)},At=Array.isArray||function(o){return at.call(o)==="[object Array]"};function Ze(o){return new RegExp("^(?:"+o.replace(/ /g,"|")+")$")}s(Ze,"wordsRegexp");function qe(o){return o<=65535?String.fromCharCode(o):(o-=65536,String.fromCharCode((o>>10)+55296,(o&1023)+56320))}s(qe,"codePointToString");var Gt=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,nt=s(function(u,m){this.line=u,this.column=m},"Position");nt.prototype.offset=s(function(u){return new nt(this.line,this.column+u)},"offset");var lt=s(function(u,m,y){this.start=m,this.end=y,u.sourceFile!==null&&(this.source=u.sourceFile)},"SourceLocation");function bt(o,u){for(var m=1,y=0;;){var g=Qe(o,y,u);if(g<0)return new nt(m,u-y);++m,y=g}}s(bt,"getLineInfo");var _t={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},Vt=!1;function Jt(o){var u={};for(var m in _t)u[m]=o&&ut(o,m)?o[m]:_t[m];if(u.ecmaVersion==="latest"?u.ecmaVersion=1e8:u.ecmaVersion==null?(!Vt&&typeof console=="object"&&console.warn&&(Vt=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),u.ecmaVersion=11):u.ecmaVersion>=2015&&(u.ecmaVersion-=2009),u.allowReserved==null&&(u.allowReserved=u.ecmaVersion<5),o.allowHashBang==null&&(u.allowHashBang=u.ecmaVersion>=14),At(u.onToken)){var y=u.onToken;u.onToken=function(g){return y.push(g)}}return At(u.onComment)&&(u.onComment=he(u,u.onComment)),u}s(Jt,"getOptions");function he(o,u){return function(m,y,g,E,P,A){var L={type:m?"Block":"Line",value:y,start:g,end:E};o.locations&&(L.loc=new lt(this,P,A)),o.ranges&&(L.range=[g,E]),u.push(L)}}s(he,"pushComment");var Ae=1,De=2,ci=4,Yn=8,et=16,Bo=32,Rt=64,Tb=128,is=256,N0=Ae|De|is;function M0(o,u){return De|(o?ci:0)|(u?Yn:0)}s(M0,"functionFlags");var Tf=0,A0=1,Ri=2,Ib=3,Sb=4,Cb=5,Be=s(function(u,m,y){this.options=u=Jt(u),this.sourceFile=u.sourceFile,this.keywords=Ze(h[u.ecmaVersion>=6?6:u.sourceType==="module"?"5module":5]);var g="";u.allowReserved!==!0&&(g=a[u.ecmaVersion>=6?6:u.ecmaVersion===5?5:3],u.sourceType==="module"&&(g+=" await")),this.reservedWords=Ze(g);var E=(g?g+" ":"")+a.strict;this.reservedWordsStrict=Ze(E),this.reservedWordsStrictBind=Ze(E+" "+a.strictBind),this.input=String(m),this.containsEsc=!1,y?(this.pos=y,this.lineStart=this.input.lastIndexOf(`
`,y-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(ye).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=w.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=u.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&u.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(Ae),this.regexpState=null,this.privateNameStack=[]},"Parser"),di={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Be.prototype.parse=s(function(){var u=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(u)},"parse"),di.inFunction.get=function(){return(this.currentVarScope().flags&De)>0},di.inGenerator.get=function(){return(this.currentVarScope().flags&Yn)>0&&!this.currentVarScope().inClassFieldInit},di.inAsync.get=function(){return(this.currentVarScope().flags&ci)>0&&!this.currentVarScope().inClassFieldInit},di.canAwait.get=function(){for(var o=this.scopeStack.length-1;o>=0;o--){var u=this.scopeStack[o];if(u.inClassFieldInit||u.flags&is)return!1;if(u.flags&De)return(u.flags&ci)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},di.allowSuper.get=function(){var o=this.currentThisScope(),u=o.flags,m=o.inClassFieldInit;return(u&Rt)>0||m||this.options.allowSuperOutsideMethod},di.allowDirectSuper.get=function(){return(this.currentThisScope().flags&Tb)>0},di.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},di.allowNewDotTarget.get=function(){var o=this.currentThisScope(),u=o.flags,m=o.inClassFieldInit;return(u&(De|is))>0||m},di.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&is)>0},Be.extend=s(function(){for(var u=[],m=arguments.length;m--;)u[m]=arguments[m];for(var y=this,g=0;g<u.length;g++)y=u[g](y);return y},"extend"),Be.parse=s(function(u,m){return new this(m,u).parse()},"parse"),Be.parseExpressionAt=s(function(u,m,y){var g=new this(y,u,m);return g.nextToken(),g.parseExpression()},"parseExpressionAt"),Be.tokenizer=s(function(u,m){return new this(m,u)},"tokenizer"),Object.defineProperties(Be.prototype,di);var vt=Be.prototype,vI=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;vt.strictDirective=function(o){if(this.options.ecmaVersion<5)return!1;for(;;){J.lastIndex=o,o+=J.exec(this.input)[0].length;var u=vI.exec(this.input.slice(o));if(!u)return!1;if((u[1]||u[2])==="use strict"){J.lastIndex=o+u[0].length;var m=J.exec(this.input),y=m.index+m[0].length,g=this.input.charAt(y);return g===";"||g==="}"||ye.test(m[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(g)||g==="!"&&this.input.charAt(y+1)==="=")}o+=u[0].length,J.lastIndex=o,o+=J.exec(this.input)[0].length,this.input[o]===";"&&o++}},vt.eat=function(o){return this.type===o?(this.next(),!0):!1},vt.isContextual=function(o){return this.type===w.name&&this.value===o&&!this.containsEsc},vt.eatContextual=function(o){return this.isContextual(o)?(this.next(),!0):!1},vt.expectContextual=function(o){this.eatContextual(o)||this.unexpected()},vt.canInsertSemicolon=function(){return this.type===w.eof||this.type===w.braceR||ye.test(this.input.slice(this.lastTokEnd,this.start))},vt.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},vt.semicolon=function(){!this.eat(w.semi)&&!this.insertSemicolon()&&this.unexpected()},vt.afterTrailingComma=function(o,u){if(this.type===o)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),u||this.next(),!0},vt.expect=function(o){this.eat(o)||this.unexpected()},vt.unexpected=function(o){this.raise(o!=null?o:this.start,"Unexpected token")};var If=s(function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1},"DestructuringErrors");vt.checkPatternErrors=function(o,u){if(!!o){o.trailingComma>-1&&this.raiseRecoverable(o.trailingComma,"Comma is not permitted after the rest element");var m=u?o.parenthesizedAssign:o.parenthesizedBind;m>-1&&this.raiseRecoverable(m,u?"Assigning to rvalue":"Parenthesized pattern")}},vt.checkExpressionErrors=function(o,u){if(!o)return!1;var m=o.shorthandAssign,y=o.doubleProto;if(!u)return m>=0||y>=0;m>=0&&this.raise(m,"Shorthand property assignments are valid only in destructuring patterns"),y>=0&&this.raiseRecoverable(y,"Redefinition of __proto__ property")},vt.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},vt.isSimpleAssignTarget=function(o){return o.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(o.expression):o.type==="Identifier"||o.type==="MemberExpression"};var K=Be.prototype;K.parseTopLevel=function(o){var u=Object.create(null);for(o.body||(o.body=[]);this.type!==w.eof;){var m=this.parseStatement(null,!0,u);o.body.push(m)}if(this.inModule)for(var y=0,g=Object.keys(this.undefinedExports);y<g.length;y+=1){var E=g[y];this.raiseRecoverable(this.undefinedExports[E].start,"Export '"+E+"' is not defined")}return this.adaptDirectivePrologue(o.body),this.next(),o.sourceType=this.options.sourceType,this.finishNode(o,"Program")};var V0={kind:"loop"},yI={kind:"switch"};K.isLet=function(o){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;J.lastIndex=this.pos;var u=J.exec(this.input),m=this.pos+u[0].length,y=this.input.charCodeAt(m);if(y===91||y===92||y>55295&&y<56320)return!0;if(o)return!1;if(y===123)return!0;if(I(y,!0)){for(var g=m+1;C(y=this.input.charCodeAt(g),!0);)++g;if(y===92||y>55295&&y<56320)return!0;var E=this.input.slice(m,g);if(!v.test(E))return!0}return!1},K.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;J.lastIndex=this.pos;var o=J.exec(this.input),u=this.pos+o[0].length,m;return!ye.test(this.input.slice(this.pos,u))&&this.input.slice(u,u+8)==="function"&&(u+8===this.input.length||!(C(m=this.input.charCodeAt(u+8))||m>55295&&m<56320))},K.parseStatement=function(o,u,m){var y=this.type,g=this.startNode(),E;switch(this.isLet(o)&&(y=w._var,E="let"),y){case w._break:case w._continue:return this.parseBreakContinueStatement(g,y.keyword);case w._debugger:return this.parseDebuggerStatement(g);case w._do:return this.parseDoStatement(g);case w._for:return this.parseForStatement(g);case w._function:return o&&(this.strict||o!=="if"&&o!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(g,!1,!o);case w._class:return o&&this.unexpected(),this.parseClass(g,!0);case w._if:return this.parseIfStatement(g);case w._return:return this.parseReturnStatement(g);case w._switch:return this.parseSwitchStatement(g);case w._throw:return this.parseThrowStatement(g);case w._try:return this.parseTryStatement(g);case w._const:case w._var:return E=E||this.value,o&&E!=="var"&&this.unexpected(),this.parseVarStatement(g,E);case w._while:return this.parseWhileStatement(g);case w._with:return this.parseWithStatement(g);case w.braceL:return this.parseBlock(!0,g);case w.semi:return this.parseEmptyStatement(g);case w._export:case w._import:if(this.options.ecmaVersion>10&&y===w._import){J.lastIndex=this.pos;var P=J.exec(this.input),A=this.pos+P[0].length,L=this.input.charCodeAt(A);if(L===40||L===46)return this.parseExpressionStatement(g,this.parseExpression())}return this.options.allowImportExportEverywhere||(u||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),y===w._import?this.parseImport(g):this.parseExport(g,m);default:if(this.isAsyncFunction())return o&&this.unexpected(),this.next(),this.parseFunctionStatement(g,!0,!o);var Z=this.value,se=this.parseExpression();return y===w.name&&se.type==="Identifier"&&this.eat(w.colon)?this.parseLabeledStatement(g,Z,se,o):this.parseExpressionStatement(g,se)}},K.parseBreakContinueStatement=function(o,u){var m=u==="break";this.next(),this.eat(w.semi)||this.insertSemicolon()?o.label=null:this.type!==w.name?this.unexpected():(o.label=this.parseIdent(),this.semicolon());for(var y=0;y<this.labels.length;++y){var g=this.labels[y];if((o.label==null||g.name===o.label.name)&&(g.kind!=null&&(m||g.kind==="loop")||o.label&&m))break}return y===this.labels.length&&this.raise(o.start,"Unsyntactic "+u),this.finishNode(o,m?"BreakStatement":"ContinueStatement")},K.parseDebuggerStatement=function(o){return this.next(),this.semicolon(),this.finishNode(o,"DebuggerStatement")},K.parseDoStatement=function(o){return this.next(),this.labels.push(V0),o.body=this.parseStatement("do"),this.labels.pop(),this.expect(w._while),o.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(w.semi):this.semicolon(),this.finishNode(o,"DoWhileStatement")},K.parseForStatement=function(o){this.next();var u=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(V0),this.enterScope(0),this.expect(w.parenL),this.type===w.semi)return u>-1&&this.unexpected(u),this.parseFor(o,null);var m=this.isLet();if(this.type===w._var||this.type===w._const||m){var y=this.startNode(),g=m?"let":this.value;return this.next(),this.parseVar(y,!0,g),this.finishNode(y,"VariableDeclaration"),(this.type===w._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&y.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===w._in?u>-1&&this.unexpected(u):o.await=u>-1),this.parseForIn(o,y)):(u>-1&&this.unexpected(u),this.parseFor(o,y))}var E=this.isContextual("let"),P=!1,A=new If,L=this.parseExpression(u>-1?"await":!0,A);return this.type===w._in||(P=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===w._in?u>-1&&this.unexpected(u):o.await=u>-1),E&&P&&this.raise(L.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(L,!1,A),this.checkLValPattern(L),this.parseForIn(o,L)):(this.checkExpressionErrors(A,!0),u>-1&&this.unexpected(u),this.parseFor(o,L))},K.parseFunctionStatement=function(o,u,m){return this.next(),this.parseFunction(o,ns|(m?0:R0),!1,u)},K.parseIfStatement=function(o){return this.next(),o.test=this.parseParenExpression(),o.consequent=this.parseStatement("if"),o.alternate=this.eat(w._else)?this.parseStatement("if"):null,this.finishNode(o,"IfStatement")},K.parseReturnStatement=function(o){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(w.semi)||this.insertSemicolon()?o.argument=null:(o.argument=this.parseExpression(),this.semicolon()),this.finishNode(o,"ReturnStatement")},K.parseSwitchStatement=function(o){this.next(),o.discriminant=this.parseParenExpression(),o.cases=[],this.expect(w.braceL),this.labels.push(yI),this.enterScope(0);for(var u,m=!1;this.type!==w.braceR;)if(this.type===w._case||this.type===w._default){var y=this.type===w._case;u&&this.finishNode(u,"SwitchCase"),o.cases.push(u=this.startNode()),u.consequent=[],this.next(),y?u.test=this.parseExpression():(m&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),m=!0,u.test=null),this.expect(w.colon)}else u||this.unexpected(),u.consequent.push(this.parseStatement(null));return this.exitScope(),u&&this.finishNode(u,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(o,"SwitchStatement")},K.parseThrowStatement=function(o){return this.next(),ye.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),o.argument=this.parseExpression(),this.semicolon(),this.finishNode(o,"ThrowStatement")};var bI=[];K.parseTryStatement=function(o){if(this.next(),o.block=this.parseBlock(),o.handler=null,this.type===w._catch){var u=this.startNode();if(this.next(),this.eat(w.parenL)){u.param=this.parseBindingAtom();var m=u.param.type==="Identifier";this.enterScope(m?Bo:0),this.checkLValPattern(u.param,m?Sb:Ri),this.expect(w.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),u.param=null,this.enterScope(0);u.body=this.parseBlock(!1),this.exitScope(),o.handler=this.finishNode(u,"CatchClause")}return o.finalizer=this.eat(w._finally)?this.parseBlock():null,!o.handler&&!o.finalizer&&this.raise(o.start,"Missing catch or finally clause"),this.finishNode(o,"TryStatement")},K.parseVarStatement=function(o,u){return this.next(),this.parseVar(o,!1,u),this.semicolon(),this.finishNode(o,"VariableDeclaration")},K.parseWhileStatement=function(o){return this.next(),o.test=this.parseParenExpression(),this.labels.push(V0),o.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(o,"WhileStatement")},K.parseWithStatement=function(o){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),o.object=this.parseParenExpression(),o.body=this.parseStatement("with"),this.finishNode(o,"WithStatement")},K.parseEmptyStatement=function(o){return this.next(),this.finishNode(o,"EmptyStatement")},K.parseLabeledStatement=function(o,u,m,y){for(var g=0,E=this.labels;g<E.length;g+=1){var P=E[g];P.name===u&&this.raise(m.start,"Label '"+u+"' is already declared")}for(var A=this.type.isLoop?"loop":this.type===w._switch?"switch":null,L=this.labels.length-1;L>=0;L--){var Z=this.labels[L];if(Z.statementStart===o.start)Z.statementStart=this.start,Z.kind=A;else break}return this.labels.push({name:u,kind:A,statementStart:this.start}),o.body=this.parseStatement(y?y.indexOf("label")===-1?y+"label":y:"label"),this.labels.pop(),o.label=m,this.finishNode(o,"LabeledStatement")},K.parseExpressionStatement=function(o,u){return o.expression=u,this.semicolon(),this.finishNode(o,"ExpressionStatement")},K.parseBlock=function(o,u,m){for(o===void 0&&(o=!0),u===void 0&&(u=this.startNode()),u.body=[],this.expect(w.braceL),o&&this.enterScope(0);this.type!==w.braceR;){var y=this.parseStatement(null);u.body.push(y)}return m&&(this.strict=!1),this.next(),o&&this.exitScope(),this.finishNode(u,"BlockStatement")},K.parseFor=function(o,u){return o.init=u,this.expect(w.semi),o.test=this.type===w.semi?null:this.parseExpression(),this.expect(w.semi),o.update=this.type===w.parenR?null:this.parseExpression(),this.expect(w.parenR),o.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(o,"ForStatement")},K.parseForIn=function(o,u){var m=this.type===w._in;return this.next(),u.type==="VariableDeclaration"&&u.declarations[0].init!=null&&(!m||this.options.ecmaVersion<8||this.strict||u.kind!=="var"||u.declarations[0].id.type!=="Identifier")&&this.raise(u.start,(m?"for-in":"for-of")+" loop variable declaration may not have an initializer"),o.left=u,o.right=m?this.parseExpression():this.parseMaybeAssign(),this.expect(w.parenR),o.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(o,m?"ForInStatement":"ForOfStatement")},K.parseVar=function(o,u,m){for(o.declarations=[],o.kind=m;;){var y=this.startNode();if(this.parseVarId(y,m),this.eat(w.eq)?y.init=this.parseMaybeAssign(u):m==="const"&&!(this.type===w._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():y.id.type!=="Identifier"&&!(u&&(this.type===w._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):y.init=null,o.declarations.push(this.finishNode(y,"VariableDeclarator")),!this.eat(w.comma))break}return o},K.parseVarId=function(o,u){o.id=this.parseBindingAtom(),this.checkLValPattern(o.id,u==="var"?A0:Ri,!1)};var ns=1,R0=2,Eb=4;K.parseFunction=function(o,u,m,y,g){this.initFunction(o),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!y)&&(this.type===w.star&&u&R0&&this.unexpected(),o.generator=this.eat(w.star)),this.options.ecmaVersion>=8&&(o.async=!!y),u&ns&&(o.id=u&Eb&&this.type!==w.name?null:this.parseIdent(),o.id&&!(u&R0)&&this.checkLValSimple(o.id,this.strict||o.generator||o.async?this.treatFunctionsAsVar?A0:Ri:Ib));var E=this.yieldPos,P=this.awaitPos,A=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(M0(o.async,o.generator)),u&ns||(o.id=this.type===w.name?this.parseIdent():null),this.parseFunctionParams(o),this.parseFunctionBody(o,m,!1,g),this.yieldPos=E,this.awaitPos=P,this.awaitIdentPos=A,this.finishNode(o,u&ns?"FunctionDeclaration":"FunctionExpression")},K.parseFunctionParams=function(o){this.expect(w.parenL),o.params=this.parseBindingList(w.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},K.parseClass=function(o,u){this.next();var m=this.strict;this.strict=!0,this.parseClassId(o,u),this.parseClassSuper(o);var y=this.enterClassBody(),g=this.startNode(),E=!1;for(g.body=[],this.expect(w.braceL);this.type!==w.braceR;){var P=this.parseClassElement(o.superClass!==null);P&&(g.body.push(P),P.type==="MethodDefinition"&&P.kind==="constructor"?(E&&this.raise(P.start,"Duplicate constructor in the same class"),E=!0):P.key&&P.key.type==="PrivateIdentifier"&&wI(y,P)&&this.raiseRecoverable(P.key.start,"Identifier '#"+P.key.name+"' has already been declared"))}return this.strict=m,this.next(),o.body=this.finishNode(g,"ClassBody"),this.exitClassBody(),this.finishNode(o,u?"ClassDeclaration":"ClassExpression")},K.parseClassElement=function(o){if(this.eat(w.semi))return null;var u=this.options.ecmaVersion,m=this.startNode(),y="",g=!1,E=!1,P="method",A=!1;if(this.eatContextual("static")){if(u>=13&&this.eat(w.braceL))return this.parseClassStaticBlock(m),m;this.isClassElementNameStart()||this.type===w.star?A=!0:y="static"}if(m.static=A,!y&&u>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===w.star)&&!this.canInsertSemicolon()?E=!0:y="async"),!y&&(u>=9||!E)&&this.eat(w.star)&&(g=!0),!y&&!E&&!g){var L=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?P=L:y=L)}if(y?(m.computed=!1,m.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),m.key.name=y,this.finishNode(m.key,"Identifier")):this.parseClassElementName(m),u<13||this.type===w.parenL||P!=="method"||g||E){var Z=!m.static&&Sf(m,"constructor"),se=Z&&o;Z&&P!=="method"&&this.raise(m.key.start,"Constructor can't have get/set modifier"),m.kind=Z?"constructor":P,this.parseClassMethod(m,g,E,se)}else this.parseClassField(m);return m},K.isClassElementNameStart=function(){return this.type===w.name||this.type===w.privateId||this.type===w.num||this.type===w.string||this.type===w.bracketL||this.type.keyword},K.parseClassElementName=function(o){this.type===w.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),o.computed=!1,o.key=this.parsePrivateIdent()):this.parsePropertyName(o)},K.parseClassMethod=function(o,u,m,y){var g=o.key;o.kind==="constructor"?(u&&this.raise(g.start,"Constructor can't be a generator"),m&&this.raise(g.start,"Constructor can't be an async method")):o.static&&Sf(o,"prototype")&&this.raise(g.start,"Classes may not have a static property named prototype");var E=o.value=this.parseMethod(u,m,y);return o.kind==="get"&&E.params.length!==0&&this.raiseRecoverable(E.start,"getter should have no params"),o.kind==="set"&&E.params.length!==1&&this.raiseRecoverable(E.start,"setter should have exactly one param"),o.kind==="set"&&E.params[0].type==="RestElement"&&this.raiseRecoverable(E.params[0].start,"Setter cannot use rest params"),this.finishNode(o,"MethodDefinition")},K.parseClassField=function(o){if(Sf(o,"constructor")?this.raise(o.key.start,"Classes can't have a field named 'constructor'"):o.static&&Sf(o,"prototype")&&this.raise(o.key.start,"Classes can't have a static field named 'prototype'"),this.eat(w.eq)){var u=this.currentThisScope(),m=u.inClassFieldInit;u.inClassFieldInit=!0,o.value=this.parseMaybeAssign(),u.inClassFieldInit=m}else o.value=null;return this.semicolon(),this.finishNode(o,"PropertyDefinition")},K.parseClassStaticBlock=function(o){o.body=[];var u=this.labels;for(this.labels=[],this.enterScope(is|Rt);this.type!==w.braceR;){var m=this.parseStatement(null);o.body.push(m)}return this.next(),this.exitScope(),this.labels=u,this.finishNode(o,"StaticBlock")},K.parseClassId=function(o,u){this.type===w.name?(o.id=this.parseIdent(),u&&this.checkLValSimple(o.id,Ri,!1)):(u===!0&&this.unexpected(),o.id=null)},K.parseClassSuper=function(o){o.superClass=this.eat(w._extends)?this.parseExprSubscripts(!1):null},K.enterClassBody=function(){var o={declared:Object.create(null),used:[]};return this.privateNameStack.push(o),o.declared},K.exitClassBody=function(){for(var o=this.privateNameStack.pop(),u=o.declared,m=o.used,y=this.privateNameStack.length,g=y===0?null:this.privateNameStack[y-1],E=0;E<m.length;++E){var P=m[E];ut(u,P.name)||(g?g.used.push(P):this.raiseRecoverable(P.start,"Private field '#"+P.name+"' must be declared in an enclosing class"))}};function wI(o,u){var m=u.key.name,y=o[m],g="true";return u.type==="MethodDefinition"&&(u.kind==="get"||u.kind==="set")&&(g=(u.static?"s":"i")+u.kind),y==="iget"&&g==="iset"||y==="iset"&&g==="iget"||y==="sget"&&g==="sset"||y==="sset"&&g==="sget"?(o[m]="true",!1):y?!0:(o[m]=g,!1)}s(wI,"isPrivateNameConflicted");function Sf(o,u){var m=o.computed,y=o.key;return!m&&(y.type==="Identifier"&&y.name===u||y.type==="Literal"&&y.value===u)}s(Sf,"checkKeyName"),K.parseExport=function(o,u){if(this.next(),this.eat(w.star))return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(o.exported=this.parseModuleExportName(),this.checkExport(u,o.exported,this.lastTokStart)):o.exported=null),this.expectContextual("from"),this.type!==w.string&&this.unexpected(),o.source=this.parseExprAtom(),this.semicolon(),this.finishNode(o,"ExportAllDeclaration");if(this.eat(w._default)){this.checkExport(u,"default",this.lastTokStart);var m;if(this.type===w._function||(m=this.isAsyncFunction())){var y=this.startNode();this.next(),m&&this.next(),o.declaration=this.parseFunction(y,ns|Eb,!1,m)}else if(this.type===w._class){var g=this.startNode();o.declaration=this.parseClass(g,"nullableID")}else o.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(o,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())o.declaration=this.parseStatement(null),o.declaration.type==="VariableDeclaration"?this.checkVariableExport(u,o.declaration.declarations):this.checkExport(u,o.declaration.id,o.declaration.id.start),o.specifiers=[],o.source=null;else{if(o.declaration=null,o.specifiers=this.parseExportSpecifiers(u),this.eatContextual("from"))this.type!==w.string&&this.unexpected(),o.source=this.parseExprAtom();else{for(var E=0,P=o.specifiers;E<P.length;E+=1){var A=P[E];this.checkUnreserved(A.local),this.checkLocalExport(A.local),A.local.type==="Literal"&&this.raise(A.local.start,"A string literal cannot be used as an exported binding without `from`.")}o.source=null}this.semicolon()}return this.finishNode(o,"ExportNamedDeclaration")},K.checkExport=function(o,u,m){!o||(typeof u!="string"&&(u=u.type==="Identifier"?u.name:u.value),ut(o,u)&&this.raiseRecoverable(m,"Duplicate export '"+u+"'"),o[u]=!0)},K.checkPatternExport=function(o,u){var m=u.type;if(m==="Identifier")this.checkExport(o,u,u.start);else if(m==="ObjectPattern")for(var y=0,g=u.properties;y<g.length;y+=1){var E=g[y];this.checkPatternExport(o,E)}else if(m==="ArrayPattern")for(var P=0,A=u.elements;P<A.length;P+=1){var L=A[P];L&&this.checkPatternExport(o,L)}else m==="Property"?this.checkPatternExport(o,u.value):m==="AssignmentPattern"?this.checkPatternExport(o,u.left):m==="RestElement"?this.checkPatternExport(o,u.argument):m==="ParenthesizedExpression"&&this.checkPatternExport(o,u.expression)},K.checkVariableExport=function(o,u){if(!!o)for(var m=0,y=u;m<y.length;m+=1){var g=y[m];this.checkPatternExport(o,g.id)}},K.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()},K.parseExportSpecifiers=function(o){var u=[],m=!0;for(this.expect(w.braceL);!this.eat(w.braceR);){if(m)m=!1;else if(this.expect(w.comma),this.afterTrailingComma(w.braceR))break;var y=this.startNode();y.local=this.parseModuleExportName(),y.exported=this.eatContextual("as")?this.parseModuleExportName():y.local,this.checkExport(o,y.exported,y.exported.start),u.push(this.finishNode(y,"ExportSpecifier"))}return u},K.parseImport=function(o){return this.next(),this.type===w.string?(o.specifiers=bI,o.source=this.parseExprAtom()):(o.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),o.source=this.type===w.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(o,"ImportDeclaration")},K.parseImportSpecifiers=function(){var o=[],u=!0;if(this.type===w.name){var m=this.startNode();if(m.local=this.parseIdent(),this.checkLValSimple(m.local,Ri),o.push(this.finishNode(m,"ImportDefaultSpecifier")),!this.eat(w.comma))return o}if(this.type===w.star){var y=this.startNode();return this.next(),this.expectContextual("as"),y.local=this.parseIdent(),this.checkLValSimple(y.local,Ri),o.push(this.finishNode(y,"ImportNamespaceSpecifier")),o}for(this.expect(w.braceL);!this.eat(w.braceR);){if(u)u=!1;else if(this.expect(w.comma),this.afterTrailingComma(w.braceR))break;var g=this.startNode();g.imported=this.parseModuleExportName(),this.eatContextual("as")?g.local=this.parseIdent():(this.checkUnreserved(g.imported),g.local=g.imported),this.checkLValSimple(g.local,Ri),o.push(this.finishNode(g,"ImportSpecifier"))}return o},K.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===w.string){var o=this.parseLiteral(this.value);return Gt.test(o.value)&&this.raise(o.start,"An export name cannot include a lone surrogate."),o}return this.parseIdent(!0)},K.adaptDirectivePrologue=function(o){for(var u=0;u<o.length&&this.isDirectiveCandidate(o[u]);++u)o[u].directive=o[u].expression.raw.slice(1,-1)},K.isDirectiveCandidate=function(o){return this.options.ecmaVersion>=5&&o.type==="ExpressionStatement"&&o.expression.type==="Literal"&&typeof o.expression.value=="string"&&(this.input[o.start]==='"'||this.input[o.start]==="'")};var $t=Be.prototype;$t.toAssignable=function(o,u,m){if(this.options.ecmaVersion>=6&&o)switch(o.type){case"Identifier":this.inAsync&&o.name==="await"&&this.raise(o.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":o.type="ObjectPattern",m&&this.checkPatternErrors(m,!0);for(var y=0,g=o.properties;y<g.length;y+=1){var E=g[y];this.toAssignable(E,u),E.type==="RestElement"&&(E.argument.type==="ArrayPattern"||E.argument.type==="ObjectPattern")&&this.raise(E.argument.start,"Unexpected token")}break;case"Property":o.kind!=="init"&&this.raise(o.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(o.value,u);break;case"ArrayExpression":o.type="ArrayPattern",m&&this.checkPatternErrors(m,!0),this.toAssignableList(o.elements,u);break;case"SpreadElement":o.type="RestElement",this.toAssignable(o.argument,u),o.argument.type==="AssignmentPattern"&&this.raise(o.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":o.operator!=="="&&this.raise(o.left.end,"Only '=' operator can be used for specifying default value."),o.type="AssignmentPattern",delete o.operator,this.toAssignable(o.left,u);break;case"ParenthesizedExpression":this.toAssignable(o.expression,u,m);break;case"ChainExpression":this.raiseRecoverable(o.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!u)break;default:this.raise(o.start,"Assigning to rvalue")}else m&&this.checkPatternErrors(m,!0);return o},$t.toAssignableList=function(o,u){for(var m=o.length,y=0;y<m;y++){var g=o[y];g&&this.toAssignable(g,u)}if(m){var E=o[m-1];this.options.ecmaVersion===6&&u&&E&&E.type==="RestElement"&&E.argument.type!=="Identifier"&&this.unexpected(E.argument.start)}return o},$t.parseSpread=function(o){var u=this.startNode();return this.next(),u.argument=this.parseMaybeAssign(!1,o),this.finishNode(u,"SpreadElement")},$t.parseRestBinding=function(){var o=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==w.name&&this.unexpected(),o.argument=this.parseBindingAtom(),this.finishNode(o,"RestElement")},$t.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case w.bracketL:var o=this.startNode();return this.next(),o.elements=this.parseBindingList(w.bracketR,!0,!0),this.finishNode(o,"ArrayPattern");case w.braceL:return this.parseObj(!0)}return this.parseIdent()},$t.parseBindingList=function(o,u,m){for(var y=[],g=!0;!this.eat(o);)if(g?g=!1:this.expect(w.comma),u&&this.type===w.comma)y.push(null);else{if(m&&this.afterTrailingComma(o))break;if(this.type===w.ellipsis){var E=this.parseRestBinding();this.parseBindingListItem(E),y.push(E),this.type===w.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(o);break}else{var P=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(P),y.push(P)}}return y},$t.parseBindingListItem=function(o){return o},$t.parseMaybeDefault=function(o,u,m){if(m=m||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(w.eq))return m;var y=this.startNodeAt(o,u);return y.left=m,y.right=this.parseMaybeAssign(),this.finishNode(y,"AssignmentPattern")},$t.checkLValSimple=function(o,u,m){u===void 0&&(u=Tf);var y=u!==Tf;switch(o.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(o.name)&&this.raiseRecoverable(o.start,(y?"Binding ":"Assigning to ")+o.name+" in strict mode"),y&&(u===Ri&&o.name==="let"&&this.raiseRecoverable(o.start,"let is disallowed as a lexically bound name"),m&&(ut(m,o.name)&&this.raiseRecoverable(o.start,"Argument name clash"),m[o.name]=!0),u!==Cb&&this.declareName(o.name,u,o.start));break;case"ChainExpression":this.raiseRecoverable(o.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":y&&this.raiseRecoverable(o.start,"Binding member expression");break;case"ParenthesizedExpression":return y&&this.raiseRecoverable(o.start,"Binding parenthesized expression"),this.checkLValSimple(o.expression,u,m);default:this.raise(o.start,(y?"Binding":"Assigning to")+" rvalue")}},$t.checkLValPattern=function(o,u,m){switch(u===void 0&&(u=Tf),o.type){case"ObjectPattern":for(var y=0,g=o.properties;y<g.length;y+=1){var E=g[y];this.checkLValInnerPattern(E,u,m)}break;case"ArrayPattern":for(var P=0,A=o.elements;P<A.length;P+=1){var L=A[P];L&&this.checkLValInnerPattern(L,u,m)}break;default:this.checkLValSimple(o,u,m)}},$t.checkLValInnerPattern=function(o,u,m){switch(u===void 0&&(u=Tf),o.type){case"Property":this.checkLValInnerPattern(o.value,u,m);break;case"AssignmentPattern":this.checkLValPattern(o.left,u,m);break;case"RestElement":this.checkLValPattern(o.argument,u,m);break;default:this.checkLValPattern(o,u,m)}};var Ht=s(function(u,m,y,g,E){this.token=u,this.isExpr=!!m,this.preserveSpace=!!y,this.override=g,this.generator=!!E},"TokContext"),Se={b_stat:new Ht("{",!1),b_expr:new Ht("{",!0),b_tmpl:new Ht("${",!1),p_stat:new Ht("(",!1),p_expr:new Ht("(",!0),q_tmpl:new Ht("`",!0,!0,function(o){return o.tryReadTemplateToken()}),f_stat:new Ht("function",!1),f_expr:new Ht("function",!0),f_expr_gen:new Ht("function",!0,!1,null,!0),f_gen:new Ht("function",!1,!1,null,!0)},Lo=Be.prototype;Lo.initialContext=function(){return[Se.b_stat]},Lo.curContext=function(){return this.context[this.context.length-1]},Lo.braceIsBlock=function(o){var u=this.curContext();return u===Se.f_expr||u===Se.f_stat?!0:o===w.colon&&(u===Se.b_stat||u===Se.b_expr)?!u.isExpr:o===w._return||o===w.name&&this.exprAllowed?ye.test(this.input.slice(this.lastTokEnd,this.start)):o===w._else||o===w.semi||o===w.eof||o===w.parenR||o===w.arrow?!0:o===w.braceL?u===Se.b_stat:o===w._var||o===w._const||o===w.name?!1:!this.exprAllowed},Lo.inGeneratorContext=function(){for(var o=this.context.length-1;o>=1;o--){var u=this.context[o];if(u.token==="function")return u.generator}return!1},Lo.updateContext=function(o){var u,m=this.type;m.keyword&&o===w.dot?this.exprAllowed=!1:(u=m.updateContext)?u.call(this,o):this.exprAllowed=m.beforeExpr},Lo.overrideContext=function(o){this.curContext()!==o&&(this.context[this.context.length-1]=o)},w.parenR.updateContext=w.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var o=this.context.pop();o===Se.b_stat&&this.curContext().token==="function"&&(o=this.context.pop()),this.exprAllowed=!o.isExpr},w.braceL.updateContext=function(o){this.context.push(this.braceIsBlock(o)?Se.b_stat:Se.b_expr),this.exprAllowed=!0},w.dollarBraceL.updateContext=function(){this.context.push(Se.b_tmpl),this.exprAllowed=!0},w.parenL.updateContext=function(o){var u=o===w._if||o===w._for||o===w._with||o===w._while;this.context.push(u?Se.p_stat:Se.p_expr),this.exprAllowed=!0},w.incDec.updateContext=function(){},w._function.updateContext=w._class.updateContext=function(o){o.beforeExpr&&o!==w._else&&!(o===w.semi&&this.curContext()!==Se.p_stat)&&!(o===w._return&&ye.test(this.input.slice(this.lastTokEnd,this.start)))&&!((o===w.colon||o===w.braceL)&&this.curContext()===Se.b_stat)?this.context.push(Se.f_expr):this.context.push(Se.f_stat),this.exprAllowed=!1},w.backQuote.updateContext=function(){this.curContext()===Se.q_tmpl?this.context.pop():this.context.push(Se.q_tmpl),this.exprAllowed=!1},w.star.updateContext=function(o){if(o===w._function){var u=this.context.length-1;this.context[u]===Se.f_expr?this.context[u]=Se.f_expr_gen:this.context[u]=Se.f_gen}this.exprAllowed=!0},w.name.updateContext=function(o){var u=!1;this.options.ecmaVersion>=6&&o!==w.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(u=!0),this.exprAllowed=u};var oe=Be.prototype;oe.checkPropClash=function(o,u,m){if(!(this.options.ecmaVersion>=9&&o.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(o.computed||o.method||o.shorthand))){var y=o.key,g;switch(y.type){case"Identifier":g=y.name;break;case"Literal":g=String(y.value);break;default:return}var E=o.kind;if(this.options.ecmaVersion>=6){g==="__proto__"&&E==="init"&&(u.proto&&(m?m.doubleProto<0&&(m.doubleProto=y.start):this.raiseRecoverable(y.start,"Redefinition of __proto__ property")),u.proto=!0);return}g="$"+g;var P=u[g];if(P){var A;E==="init"?A=this.strict&&P.init||P.get||P.set:A=P.init||P[E],A&&this.raiseRecoverable(y.start,"Redefinition of property")}else P=u[g]={init:!1,get:!1,set:!1};P[E]=!0}},oe.parseExpression=function(o,u){var m=this.start,y=this.startLoc,g=this.parseMaybeAssign(o,u);if(this.type===w.comma){var E=this.startNodeAt(m,y);for(E.expressions=[g];this.eat(w.comma);)E.expressions.push(this.parseMaybeAssign(o,u));return this.finishNode(E,"SequenceExpression")}return g},oe.parseMaybeAssign=function(o,u,m){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(o);this.exprAllowed=!1}var y=!1,g=-1,E=-1,P=-1;u?(g=u.parenthesizedAssign,E=u.trailingComma,P=u.doubleProto,u.parenthesizedAssign=u.trailingComma=-1):(u=new If,y=!0);var A=this.start,L=this.startLoc;(this.type===w.parenL||this.type===w.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=o==="await");var Z=this.parseMaybeConditional(o,u);if(m&&(Z=m.call(this,Z,A,L)),this.type.isAssign){var se=this.startNodeAt(A,L);return se.operator=this.value,this.type===w.eq&&(Z=this.toAssignable(Z,!1,u)),y||(u.parenthesizedAssign=u.trailingComma=u.doubleProto=-1),u.shorthandAssign>=Z.start&&(u.shorthandAssign=-1),this.type===w.eq?this.checkLValPattern(Z):this.checkLValSimple(Z),se.left=Z,this.next(),se.right=this.parseMaybeAssign(o),P>-1&&(u.doubleProto=P),this.finishNode(se,"AssignmentExpression")}else y&&this.checkExpressionErrors(u,!0);return g>-1&&(u.parenthesizedAssign=g),E>-1&&(u.trailingComma=E),Z},oe.parseMaybeConditional=function(o,u){var m=this.start,y=this.startLoc,g=this.parseExprOps(o,u);if(this.checkExpressionErrors(u))return g;if(this.eat(w.question)){var E=this.startNodeAt(m,y);return E.test=g,E.consequent=this.parseMaybeAssign(),this.expect(w.colon),E.alternate=this.parseMaybeAssign(o),this.finishNode(E,"ConditionalExpression")}return g},oe.parseExprOps=function(o,u){var m=this.start,y=this.startLoc,g=this.parseMaybeUnary(u,!1,!1,o);return this.checkExpressionErrors(u)||g.start===m&&g.type==="ArrowFunctionExpression"?g:this.parseExprOp(g,m,y,-1,o)},oe.parseExprOp=function(o,u,m,y,g){var E=this.type.binop;if(E!=null&&(!g||this.type!==w._in)&&E>y){var P=this.type===w.logicalOR||this.type===w.logicalAND,A=this.type===w.coalesce;A&&(E=w.logicalAND.binop);var L=this.value;this.next();var Z=this.start,se=this.startLoc,ct=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,g),Z,se,E,g),Un=this.buildBinary(u,m,o,ct,L,P||A);return(P&&this.type===w.coalesce||A&&(this.type===w.logicalOR||this.type===w.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(Un,u,m,y,g)}return o},oe.buildBinary=function(o,u,m,y,g,E){y.type==="PrivateIdentifier"&&this.raise(y.start,"Private identifier can only be left side of binary expression");var P=this.startNodeAt(o,u);return P.left=m,P.operator=g,P.right=y,this.finishNode(P,E?"LogicalExpression":"BinaryExpression")},oe.parseMaybeUnary=function(o,u,m,y){var g=this.start,E=this.startLoc,P;if(this.isContextual("await")&&this.canAwait)P=this.parseAwait(y),u=!0;else if(this.type.prefix){var A=this.startNode(),L=this.type===w.incDec;A.operator=this.value,A.prefix=!0,this.next(),A.argument=this.parseMaybeUnary(null,!0,L,y),this.checkExpressionErrors(o,!0),L?this.checkLValSimple(A.argument):this.strict&&A.operator==="delete"&&A.argument.type==="Identifier"?this.raiseRecoverable(A.start,"Deleting local variable in strict mode"):A.operator==="delete"&&kb(A.argument)?this.raiseRecoverable(A.start,"Private fields can not be deleted"):u=!0,P=this.finishNode(A,L?"UpdateExpression":"UnaryExpression")}else if(!u&&this.type===w.privateId)(y||this.privateNameStack.length===0)&&this.unexpected(),P=this.parsePrivateIdent(),this.type!==w._in&&this.unexpected();else{if(P=this.parseExprSubscripts(o,y),this.checkExpressionErrors(o))return P;for(;this.type.postfix&&!this.canInsertSemicolon();){var Z=this.startNodeAt(g,E);Z.operator=this.value,Z.prefix=!1,Z.argument=P,this.checkLValSimple(P),this.next(),P=this.finishNode(Z,"UpdateExpression")}}if(!m&&this.eat(w.starstar))if(u)this.unexpected(this.lastTokStart);else return this.buildBinary(g,E,P,this.parseMaybeUnary(null,!1,!1,y),"**",!1);else return P};function kb(o){return o.type==="MemberExpression"&&o.property.type==="PrivateIdentifier"||o.type==="ChainExpression"&&kb(o.expression)}s(kb,"isPrivateFieldAccess"),oe.parseExprSubscripts=function(o,u){var m=this.start,y=this.startLoc,g=this.parseExprAtom(o,u);if(g.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return g;var E=this.parseSubscripts(g,m,y,!1,u);return o&&E.type==="MemberExpression"&&(o.parenthesizedAssign>=E.start&&(o.parenthesizedAssign=-1),o.parenthesizedBind>=E.start&&(o.parenthesizedBind=-1),o.trailingComma>=E.start&&(o.trailingComma=-1)),E},oe.parseSubscripts=function(o,u,m,y,g){for(var E=this.options.ecmaVersion>=8&&o.type==="Identifier"&&o.name==="async"&&this.lastTokEnd===o.end&&!this.canInsertSemicolon()&&o.end-o.start===5&&this.potentialArrowAt===o.start,P=!1;;){var A=this.parseSubscript(o,u,m,y,E,P,g);if(A.optional&&(P=!0),A===o||A.type==="ArrowFunctionExpression"){if(P){var L=this.startNodeAt(u,m);L.expression=A,A=this.finishNode(L,"ChainExpression")}return A}o=A}},oe.parseSubscript=function(o,u,m,y,g,E,P){var A=this.options.ecmaVersion>=11,L=A&&this.eat(w.questionDot);y&&L&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var Z=this.eat(w.bracketL);if(Z||L&&this.type!==w.parenL&&this.type!==w.backQuote||this.eat(w.dot)){var se=this.startNodeAt(u,m);se.object=o,Z?(se.property=this.parseExpression(),this.expect(w.bracketR)):this.type===w.privateId&&o.type!=="Super"?se.property=this.parsePrivateIdent():se.property=this.parseIdent(this.options.allowReserved!=="never"),se.computed=!!Z,A&&(se.optional=L),o=this.finishNode(se,"MemberExpression")}else if(!y&&this.eat(w.parenL)){var ct=new If,Un=this.yieldPos,ss=this.awaitPos,Do=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var Pf=this.parseExprList(w.parenR,this.options.ecmaVersion>=8,!1,ct);if(g&&!L&&!this.canInsertSemicolon()&&this.eat(w.arrow))return this.checkPatternErrors(ct,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=Un,this.awaitPos=ss,this.awaitIdentPos=Do,this.parseArrowExpression(this.startNodeAt(u,m),Pf,!0,P);this.checkExpressionErrors(ct,!0),this.yieldPos=Un||this.yieldPos,this.awaitPos=ss||this.awaitPos,this.awaitIdentPos=Do||this.awaitIdentPos;var jo=this.startNodeAt(u,m);jo.callee=o,jo.arguments=Pf,A&&(jo.optional=L),o=this.finishNode(jo,"CallExpression")}else if(this.type===w.backQuote){(L||E)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var Yo=this.startNodeAt(u,m);Yo.tag=o,Yo.quasi=this.parseTemplate({isTagged:!0}),o=this.finishNode(Yo,"TaggedTemplateExpression")}return o},oe.parseExprAtom=function(o,u){this.type===w.slash&&this.readRegexp();var m,y=this.potentialArrowAt===this.start;switch(this.type){case w._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),m=this.startNode(),this.next(),this.type===w.parenL&&!this.allowDirectSuper&&this.raise(m.start,"super() call outside constructor of a subclass"),this.type!==w.dot&&this.type!==w.bracketL&&this.type!==w.parenL&&this.unexpected(),this.finishNode(m,"Super");case w._this:return m=this.startNode(),this.next(),this.finishNode(m,"ThisExpression");case w.name:var g=this.start,E=this.startLoc,P=this.containsEsc,A=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!P&&A.name==="async"&&!this.canInsertSemicolon()&&this.eat(w._function))return this.overrideContext(Se.f_expr),this.parseFunction(this.startNodeAt(g,E),0,!1,!0,u);if(y&&!this.canInsertSemicolon()){if(this.eat(w.arrow))return this.parseArrowExpression(this.startNodeAt(g,E),[A],!1,u);if(this.options.ecmaVersion>=8&&A.name==="async"&&this.type===w.name&&!P&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return A=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(w.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(g,E),[A],!0,u)}return A;case w.regexp:var L=this.value;return m=this.parseLiteral(L.value),m.regex={pattern:L.pattern,flags:L.flags},m;case w.num:case w.string:return this.parseLiteral(this.value);case w._null:case w._true:case w._false:return m=this.startNode(),m.value=this.type===w._null?null:this.type===w._true,m.raw=this.type.keyword,this.next(),this.finishNode(m,"Literal");case w.parenL:var Z=this.start,se=this.parseParenAndDistinguishExpression(y,u);return o&&(o.parenthesizedAssign<0&&!this.isSimpleAssignTarget(se)&&(o.parenthesizedAssign=Z),o.parenthesizedBind<0&&(o.parenthesizedBind=Z)),se;case w.bracketL:return m=this.startNode(),this.next(),m.elements=this.parseExprList(w.bracketR,!0,!0,o),this.finishNode(m,"ArrayExpression");case w.braceL:return this.overrideContext(Se.b_expr),this.parseObj(!1,o);case w._function:return m=this.startNode(),this.next(),this.parseFunction(m,0);case w._class:return this.parseClass(this.startNode(),!1);case w._new:return this.parseNew();case w.backQuote:return this.parseTemplate();case w._import:return this.options.ecmaVersion>=11?this.parseExprImport():this.unexpected();default:this.unexpected()}},oe.parseExprImport=function(){var o=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var u=this.parseIdent(!0);switch(this.type){case w.parenL:return this.parseDynamicImport(o);case w.dot:return o.meta=u,this.parseImportMeta(o);default:this.unexpected()}},oe.parseDynamicImport=function(o){if(this.next(),o.source=this.parseMaybeAssign(),!this.eat(w.parenR)){var u=this.start;this.eat(w.comma)&&this.eat(w.parenR)?this.raiseRecoverable(u,"Trailing comma is not allowed in import()"):this.unexpected(u)}return this.finishNode(o,"ImportExpression")},oe.parseImportMeta=function(o){this.next();var u=this.containsEsc;return o.property=this.parseIdent(!0),o.property.name!=="meta"&&this.raiseRecoverable(o.property.start,"The only valid meta property for import is 'import.meta'"),u&&this.raiseRecoverable(o.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(o.start,"Cannot use 'import.meta' outside a module"),this.finishNode(o,"MetaProperty")},oe.parseLiteral=function(o){var u=this.startNode();return u.value=o,u.raw=this.input.slice(this.start,this.end),u.raw.charCodeAt(u.raw.length-1)===110&&(u.bigint=u.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(u,"Literal")},oe.parseParenExpression=function(){this.expect(w.parenL);var o=this.parseExpression();return this.expect(w.parenR),o},oe.parseParenAndDistinguishExpression=function(o,u){var m=this.start,y=this.startLoc,g,E=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var P=this.start,A=this.startLoc,L=[],Z=!0,se=!1,ct=new If,Un=this.yieldPos,ss=this.awaitPos,Do;for(this.yieldPos=0,this.awaitPos=0;this.type!==w.parenR;)if(Z?Z=!1:this.expect(w.comma),E&&this.afterTrailingComma(w.parenR,!0)){se=!0;break}else if(this.type===w.ellipsis){Do=this.start,L.push(this.parseParenItem(this.parseRestBinding())),this.type===w.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}else L.push(this.parseMaybeAssign(!1,ct,this.parseParenItem));var Pf=this.lastTokEnd,jo=this.lastTokEndLoc;if(this.expect(w.parenR),o&&!this.canInsertSemicolon()&&this.eat(w.arrow))return this.checkPatternErrors(ct,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=Un,this.awaitPos=ss,this.parseParenArrowList(m,y,L,u);(!L.length||se)&&this.unexpected(this.lastTokStart),Do&&this.unexpected(Do),this.checkExpressionErrors(ct,!0),this.yieldPos=Un||this.yieldPos,this.awaitPos=ss||this.awaitPos,L.length>1?(g=this.startNodeAt(P,A),g.expressions=L,this.finishNodeAt(g,"SequenceExpression",Pf,jo)):g=L[0]}else g=this.parseParenExpression();if(this.options.preserveParens){var Yo=this.startNodeAt(m,y);return Yo.expression=g,this.finishNode(Yo,"ParenthesizedExpression")}else return g},oe.parseParenItem=function(o){return o},oe.parseParenArrowList=function(o,u,m,y){return this.parseArrowExpression(this.startNodeAt(o,u),m,!1,y)};var gI=[];oe.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var o=this.startNode(),u=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(w.dot)){o.meta=u;var m=this.containsEsc;return o.property=this.parseIdent(!0),o.property.name!=="target"&&this.raiseRecoverable(o.property.start,"The only valid meta property for new is 'new.target'"),m&&this.raiseRecoverable(o.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(o.start,"'new.target' can only be used in functions and class static block"),this.finishNode(o,"MetaProperty")}var y=this.start,g=this.startLoc,E=this.type===w._import;return o.callee=this.parseSubscripts(this.parseExprAtom(),y,g,!0,!1),E&&o.callee.type==="ImportExpression"&&this.raise(y,"Cannot use new with import()"),this.eat(w.parenL)?o.arguments=this.parseExprList(w.parenR,this.options.ecmaVersion>=8,!1):o.arguments=gI,this.finishNode(o,"NewExpression")},oe.parseTemplateElement=function(o){var u=o.isTagged,m=this.startNode();return this.type===w.invalidTemplate?(u||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),m.value={raw:this.value,cooked:null}):m.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),m.tail=this.type===w.backQuote,this.finishNode(m,"TemplateElement")},oe.parseTemplate=function(o){o===void 0&&(o={});var u=o.isTagged;u===void 0&&(u=!1);var m=this.startNode();this.next(),m.expressions=[];var y=this.parseTemplateElement({isTagged:u});for(m.quasis=[y];!y.tail;)this.type===w.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(w.dollarBraceL),m.expressions.push(this.parseExpression()),this.expect(w.braceR),m.quasis.push(y=this.parseTemplateElement({isTagged:u}));return this.next(),this.finishNode(m,"TemplateLiteral")},oe.isAsyncProp=function(o){return!o.computed&&o.key.type==="Identifier"&&o.key.name==="async"&&(this.type===w.name||this.type===w.num||this.type===w.string||this.type===w.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===w.star)&&!ye.test(this.input.slice(this.lastTokEnd,this.start))},oe.parseObj=function(o,u){var m=this.startNode(),y=!0,g={};for(m.properties=[],this.next();!this.eat(w.braceR);){if(y)y=!1;else if(this.expect(w.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(w.braceR))break;var E=this.parseProperty(o,u);o||this.checkPropClash(E,g,u),m.properties.push(E)}return this.finishNode(m,o?"ObjectPattern":"ObjectExpression")},oe.parseProperty=function(o,u){var m=this.startNode(),y,g,E,P;if(this.options.ecmaVersion>=9&&this.eat(w.ellipsis))return o?(m.argument=this.parseIdent(!1),this.type===w.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(m,"RestElement")):(m.argument=this.parseMaybeAssign(!1,u),this.type===w.comma&&u&&u.trailingComma<0&&(u.trailingComma=this.start),this.finishNode(m,"SpreadElement"));this.options.ecmaVersion>=6&&(m.method=!1,m.shorthand=!1,(o||u)&&(E=this.start,P=this.startLoc),o||(y=this.eat(w.star)));var A=this.containsEsc;return this.parsePropertyName(m),!o&&!A&&this.options.ecmaVersion>=8&&!y&&this.isAsyncProp(m)?(g=!0,y=this.options.ecmaVersion>=9&&this.eat(w.star),this.parsePropertyName(m,u)):g=!1,this.parsePropertyValue(m,o,y,g,E,P,u,A),this.finishNode(m,"Property")},oe.parsePropertyValue=function(o,u,m,y,g,E,P,A){if((m||y)&&this.type===w.colon&&this.unexpected(),this.eat(w.colon))o.value=u?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,P),o.kind="init";else if(this.options.ecmaVersion>=6&&this.type===w.parenL)u&&this.unexpected(),o.kind="init",o.method=!0,o.value=this.parseMethod(m,y);else if(!u&&!A&&this.options.ecmaVersion>=5&&!o.computed&&o.key.type==="Identifier"&&(o.key.name==="get"||o.key.name==="set")&&this.type!==w.comma&&this.type!==w.braceR&&this.type!==w.eq){(m||y)&&this.unexpected(),o.kind=o.key.name,this.parsePropertyName(o),o.value=this.parseMethod(!1);var L=o.kind==="get"?0:1;if(o.value.params.length!==L){var Z=o.value.start;o.kind==="get"?this.raiseRecoverable(Z,"getter should have no params"):this.raiseRecoverable(Z,"setter should have exactly one param")}else o.kind==="set"&&o.value.params[0].type==="RestElement"&&this.raiseRecoverable(o.value.params[0].start,"Setter cannot use rest params")}else this.options.ecmaVersion>=6&&!o.computed&&o.key.type==="Identifier"?((m||y)&&this.unexpected(),this.checkUnreserved(o.key),o.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=g),o.kind="init",u?o.value=this.parseMaybeDefault(g,E,this.copyNode(o.key)):this.type===w.eq&&P?(P.shorthandAssign<0&&(P.shorthandAssign=this.start),o.value=this.parseMaybeDefault(g,E,this.copyNode(o.key))):o.value=this.copyNode(o.key),o.shorthand=!0):this.unexpected()},oe.parsePropertyName=function(o){if(this.options.ecmaVersion>=6){if(this.eat(w.bracketL))return o.computed=!0,o.key=this.parseMaybeAssign(),this.expect(w.bracketR),o.key;o.computed=!1}return o.key=this.type===w.num||this.type===w.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")},oe.initFunction=function(o){o.id=null,this.options.ecmaVersion>=6&&(o.generator=o.expression=!1),this.options.ecmaVersion>=8&&(o.async=!1)},oe.parseMethod=function(o,u,m){var y=this.startNode(),g=this.yieldPos,E=this.awaitPos,P=this.awaitIdentPos;return this.initFunction(y),this.options.ecmaVersion>=6&&(y.generator=o),this.options.ecmaVersion>=8&&(y.async=!!u),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(M0(u,y.generator)|Rt|(m?Tb:0)),this.expect(w.parenL),y.params=this.parseBindingList(w.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(y,!1,!0,!1),this.yieldPos=g,this.awaitPos=E,this.awaitIdentPos=P,this.finishNode(y,"FunctionExpression")},oe.parseArrowExpression=function(o,u,m,y){var g=this.yieldPos,E=this.awaitPos,P=this.awaitIdentPos;return this.enterScope(M0(m,!1)|et),this.initFunction(o),this.options.ecmaVersion>=8&&(o.async=!!m),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,o.params=this.toAssignableList(u,!0),this.parseFunctionBody(o,!0,!1,y),this.yieldPos=g,this.awaitPos=E,this.awaitIdentPos=P,this.finishNode(o,"ArrowFunctionExpression")},oe.parseFunctionBody=function(o,u,m,y){var g=u&&this.type!==w.braceL,E=this.strict,P=!1;if(g)o.body=this.parseMaybeAssign(y),o.expression=!0,this.checkParams(o,!1);else{var A=this.options.ecmaVersion>=7&&!this.isSimpleParamList(o.params);(!E||A)&&(P=this.strictDirective(this.end),P&&A&&this.raiseRecoverable(o.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var L=this.labels;this.labels=[],P&&(this.strict=!0),this.checkParams(o,!E&&!P&&!u&&!m&&this.isSimpleParamList(o.params)),this.strict&&o.id&&this.checkLValSimple(o.id,Cb),o.body=this.parseBlock(!1,void 0,P&&!E),o.expression=!1,this.adaptDirectivePrologue(o.body.body),this.labels=L}this.exitScope()},oe.isSimpleParamList=function(o){for(var u=0,m=o;u<m.length;u+=1){var y=m[u];if(y.type!=="Identifier")return!1}return!0},oe.checkParams=function(o,u){for(var m=Object.create(null),y=0,g=o.params;y<g.length;y+=1){var E=g[y];this.checkLValInnerPattern(E,A0,u?null:m)}},oe.parseExprList=function(o,u,m,y){for(var g=[],E=!0;!this.eat(o);){if(E)E=!1;else if(this.expect(w.comma),u&&this.afterTrailingComma(o))break;var P=void 0;m&&this.type===w.comma?P=null:this.type===w.ellipsis?(P=this.parseSpread(y),y&&this.type===w.comma&&y.trailingComma<0&&(y.trailingComma=this.start)):P=this.parseMaybeAssign(!1,y),g.push(P)}return g},oe.checkUnreserved=function(o){var u=o.start,m=o.end,y=o.name;if(this.inGenerator&&y==="yield"&&this.raiseRecoverable(u,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&y==="await"&&this.raiseRecoverable(u,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&y==="arguments"&&this.raiseRecoverable(u,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(y==="arguments"||y==="await")&&this.raise(u,"Cannot use "+y+" in class static initialization block"),this.keywords.test(y)&&this.raise(u,"Unexpected keyword '"+y+"'"),!(this.options.ecmaVersion<6&&this.input.slice(u,m).indexOf("\\")!==-1)){var g=this.strict?this.reservedWordsStrict:this.reservedWords;g.test(y)&&(!this.inAsync&&y==="await"&&this.raiseRecoverable(u,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(u,"The keyword '"+y+"' is reserved"))}},oe.parseIdent=function(o,u){var m=this.startNode();return this.type===w.name?m.name=this.value:this.type.keyword?(m.name=this.type.keyword,(m.name==="class"||m.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop()):this.unexpected(),this.next(!!o),this.finishNode(m,"Identifier"),o||(this.checkUnreserved(m),m.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=m.start)),m},oe.parsePrivateIdent=function(){var o=this.startNode();return this.type===w.privateId?o.name=this.value:this.unexpected(),this.next(),this.finishNode(o,"PrivateIdentifier"),this.privateNameStack.length===0?this.raise(o.start,"Private field '#"+o.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(o),o},oe.parseYield=function(o){this.yieldPos||(this.yieldPos=this.start);var u=this.startNode();return this.next(),this.type===w.semi||this.canInsertSemicolon()||this.type!==w.star&&!this.type.startsExpr?(u.delegate=!1,u.argument=null):(u.delegate=this.eat(w.star),u.argument=this.parseMaybeAssign(o)),this.finishNode(u,"YieldExpression")},oe.parseAwait=function(o){this.awaitPos||(this.awaitPos=this.start);var u=this.startNode();return this.next(),u.argument=this.parseMaybeUnary(null,!0,!1,o),this.finishNode(u,"AwaitExpression")};var Cf=Be.prototype;Cf.raise=function(o,u){var m=bt(this.input,o);u+=" ("+m.line+":"+m.column+")";var y=new SyntaxError(u);throw y.pos=o,y.loc=m,y.raisedAt=this.pos,y},Cf.raiseRecoverable=Cf.raise,Cf.curPosition=function(){if(this.options.locations)return new nt(this.curLine,this.pos-this.lineStart)};var pn=Be.prototype,xI=s(function(u){this.flags=u,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1},"Scope");pn.enterScope=function(o){this.scopeStack.push(new xI(o))},pn.exitScope=function(){this.scopeStack.pop()},pn.treatFunctionsAsVarInScope=function(o){return o.flags&De||!this.inModule&&o.flags&Ae},pn.declareName=function(o,u,m){var y=!1;if(u===Ri){var g=this.currentScope();y=g.lexical.indexOf(o)>-1||g.functions.indexOf(o)>-1||g.var.indexOf(o)>-1,g.lexical.push(o),this.inModule&&g.flags&Ae&&delete this.undefinedExports[o]}else if(u===Sb){var E=this.currentScope();E.lexical.push(o)}else if(u===Ib){var P=this.currentScope();this.treatFunctionsAsVar?y=P.lexical.indexOf(o)>-1:y=P.lexical.indexOf(o)>-1||P.var.indexOf(o)>-1,P.functions.push(o)}else for(var A=this.scopeStack.length-1;A>=0;--A){var L=this.scopeStack[A];if(L.lexical.indexOf(o)>-1&&!(L.flags&Bo&&L.lexical[0]===o)||!this.treatFunctionsAsVarInScope(L)&&L.functions.indexOf(o)>-1){y=!0;break}if(L.var.push(o),this.inModule&&L.flags&Ae&&delete this.undefinedExports[o],L.flags&N0)break}y&&this.raiseRecoverable(m,"Identifier '"+o+"' has already been declared")},pn.checkLocalExport=function(o){this.scopeStack[0].lexical.indexOf(o.name)===-1&&this.scopeStack[0].var.indexOf(o.name)===-1&&(this.undefinedExports[o.name]=o)},pn.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},pn.currentVarScope=function(){for(var o=this.scopeStack.length-1;;o--){var u=this.scopeStack[o];if(u.flags&N0)return u}},pn.currentThisScope=function(){for(var o=this.scopeStack.length-1;;o--){var u=this.scopeStack[o];if(u.flags&N0&&!(u.flags&et))return u}};var os=s(function(u,m,y){this.type="",this.start=m,this.end=0,u.options.locations&&(this.loc=new lt(u,y)),u.options.directSourceFile&&(this.sourceFile=u.options.directSourceFile),u.options.ranges&&(this.range=[m,0])},"Node"),rs=Be.prototype;rs.startNode=function(){return new os(this,this.start,this.startLoc)},rs.startNodeAt=function(o,u){return new os(this,o,u)};function Pb(o,u,m,y){return o.type=u,o.end=m,this.options.locations&&(o.loc.end=y),this.options.ranges&&(o.range[1]=m),o}s(Pb,"finishNodeAt"),rs.finishNode=function(o,u){return Pb.call(this,o,u,this.lastTokEnd,this.lastTokEndLoc)},rs.finishNodeAt=function(o,u,m,y){return Pb.call(this,o,u,m,y)},rs.copyNode=function(o){var u=new os(this,o.start,this.startLoc);for(var m in o)u[m]=o[m];return u};var Nb="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",Mb=Nb+" Extended_Pictographic",Ab=Mb,Vb=Ab+" EBase EComp EMod EPres ExtPict",TI=Vb,II={9:Nb,10:Mb,11:Ab,12:Vb,13:TI},Rb="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",Fb="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",Ob=Fb+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",Bb=Ob+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",Lb=Bb+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",SI=Lb+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",CI={9:Fb,10:Ob,11:Bb,12:Lb,13:SI},Db={};function EI(o){var u=Db[o]={binary:Ze(II[o]+" "+Rb),nonBinary:{General_Category:Ze(Rb),Script:Ze(CI[o])}};u.nonBinary.Script_Extensions=u.nonBinary.Script,u.nonBinary.gc=u.nonBinary.General_Category,u.nonBinary.sc=u.nonBinary.Script,u.nonBinary.scx=u.nonBinary.Script_Extensions}s(EI,"buildUnicodeData");for(var F0=0,jb=[9,10,11,12,13];F0<jb.length;F0+=1){var kI=jb[F0];EI(kI)}var H=Be.prototype,Fi=s(function(u){this.parser=u,this.validFlags="gim"+(u.options.ecmaVersion>=6?"uy":"")+(u.options.ecmaVersion>=9?"s":"")+(u.options.ecmaVersion>=13?"d":""),this.unicodeProperties=Db[u.options.ecmaVersion>=13?13:u.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]},"RegExpValidationState");Fi.prototype.reset=s(function(u,m,y){var g=y.indexOf("u")!==-1;this.start=u|0,this.source=m+"",this.flags=y,this.switchU=g&&this.parser.options.ecmaVersion>=6,this.switchN=g&&this.parser.options.ecmaVersion>=9},"reset"),Fi.prototype.raise=s(function(u){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+u)},"raise"),Fi.prototype.at=s(function(u,m){m===void 0&&(m=!1);var y=this.source,g=y.length;if(u>=g)return-1;var E=y.charCodeAt(u);if(!(m||this.switchU)||E<=55295||E>=57344||u+1>=g)return E;var P=y.charCodeAt(u+1);return P>=56320&&P<=57343?(E<<10)+P-56613888:E},"at"),Fi.prototype.nextIndex=s(function(u,m){m===void 0&&(m=!1);var y=this.source,g=y.length;if(u>=g)return g;var E=y.charCodeAt(u),P;return!(m||this.switchU)||E<=55295||E>=57344||u+1>=g||(P=y.charCodeAt(u+1))<56320||P>57343?u+1:u+2},"nextIndex"),Fi.prototype.current=s(function(u){return u===void 0&&(u=!1),this.at(this.pos,u)},"current"),Fi.prototype.lookahead=s(function(u){return u===void 0&&(u=!1),this.at(this.nextIndex(this.pos,u),u)},"lookahead"),Fi.prototype.advance=s(function(u){u===void 0&&(u=!1),this.pos=this.nextIndex(this.pos,u)},"advance"),Fi.prototype.eat=s(function(u,m){return m===void 0&&(m=!1),this.current(m)===u?(this.advance(m),!0):!1},"eat"),H.validateRegExpFlags=function(o){for(var u=o.validFlags,m=o.flags,y=0;y<m.length;y++){var g=m.charAt(y);u.indexOf(g)===-1&&this.raise(o.start,"Invalid regular expression flag"),m.indexOf(g,y+1)>-1&&this.raise(o.start,"Duplicate regular expression flag")}},H.validateRegExpPattern=function(o){this.regexp_pattern(o),!o.switchN&&this.options.ecmaVersion>=9&&o.groupNames.length>0&&(o.switchN=!0,this.regexp_pattern(o))},H.regexp_pattern=function(o){o.pos=0,o.lastIntValue=0,o.lastStringValue="",o.lastAssertionIsQuantifiable=!1,o.numCapturingParens=0,o.maxBackReference=0,o.groupNames.length=0,o.backReferenceNames.length=0,this.regexp_disjunction(o),o.pos!==o.source.length&&(o.eat(41)&&o.raise("Unmatched ')'"),(o.eat(93)||o.eat(125))&&o.raise("Lone quantifier brackets")),o.maxBackReference>o.numCapturingParens&&o.raise("Invalid escape");for(var u=0,m=o.backReferenceNames;u<m.length;u+=1){var y=m[u];o.groupNames.indexOf(y)===-1&&o.raise("Invalid named capture referenced")}},H.regexp_disjunction=function(o){for(this.regexp_alternative(o);o.eat(124);)this.regexp_alternative(o);this.regexp_eatQuantifier(o,!0)&&o.raise("Nothing to repeat"),o.eat(123)&&o.raise("Lone quantifier brackets")},H.regexp_alternative=function(o){for(;o.pos<o.source.length&&this.regexp_eatTerm(o););},H.regexp_eatTerm=function(o){return this.regexp_eatAssertion(o)?(o.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(o)&&o.switchU&&o.raise("Invalid quantifier"),!0):(o.switchU?this.regexp_eatAtom(o):this.regexp_eatExtendedAtom(o))?(this.regexp_eatQuantifier(o),!0):!1},H.regexp_eatAssertion=function(o){var u=o.pos;if(o.lastAssertionIsQuantifiable=!1,o.eat(94)||o.eat(36))return!0;if(o.eat(92)){if(o.eat(66)||o.eat(98))return!0;o.pos=u}if(o.eat(40)&&o.eat(63)){var m=!1;if(this.options.ecmaVersion>=9&&(m=o.eat(60)),o.eat(61)||o.eat(33))return this.regexp_disjunction(o),o.eat(41)||o.raise("Unterminated group"),o.lastAssertionIsQuantifiable=!m,!0}return o.pos=u,!1},H.regexp_eatQuantifier=function(o,u){return u===void 0&&(u=!1),this.regexp_eatQuantifierPrefix(o,u)?(o.eat(63),!0):!1},H.regexp_eatQuantifierPrefix=function(o,u){return o.eat(42)||o.eat(43)||o.eat(63)||this.regexp_eatBracedQuantifier(o,u)},H.regexp_eatBracedQuantifier=function(o,u){var m=o.pos;if(o.eat(123)){var y=0,g=-1;if(this.regexp_eatDecimalDigits(o)&&(y=o.lastIntValue,o.eat(44)&&this.regexp_eatDecimalDigits(o)&&(g=o.lastIntValue),o.eat(125)))return g!==-1&&g<y&&!u&&o.raise("numbers out of order in {} quantifier"),!0;o.switchU&&!u&&o.raise("Incomplete quantifier"),o.pos=m}return!1},H.regexp_eatAtom=function(o){return this.regexp_eatPatternCharacters(o)||o.eat(46)||this.regexp_eatReverseSolidusAtomEscape(o)||this.regexp_eatCharacterClass(o)||this.regexp_eatUncapturingGroup(o)||this.regexp_eatCapturingGroup(o)},H.regexp_eatReverseSolidusAtomEscape=function(o){var u=o.pos;if(o.eat(92)){if(this.regexp_eatAtomEscape(o))return!0;o.pos=u}return!1},H.regexp_eatUncapturingGroup=function(o){var u=o.pos;if(o.eat(40)){if(o.eat(63)&&o.eat(58)){if(this.regexp_disjunction(o),o.eat(41))return!0;o.raise("Unterminated group")}o.pos=u}return!1},H.regexp_eatCapturingGroup=function(o){if(o.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(o):o.current()===63&&o.raise("Invalid group"),this.regexp_disjunction(o),o.eat(41))return o.numCapturingParens+=1,!0;o.raise("Unterminated group")}return!1},H.regexp_eatExtendedAtom=function(o){return o.eat(46)||this.regexp_eatReverseSolidusAtomEscape(o)||this.regexp_eatCharacterClass(o)||this.regexp_eatUncapturingGroup(o)||this.regexp_eatCapturingGroup(o)||this.regexp_eatInvalidBracedQuantifier(o)||this.regexp_eatExtendedPatternCharacter(o)},H.regexp_eatInvalidBracedQuantifier=function(o){return this.regexp_eatBracedQuantifier(o,!0)&&o.raise("Nothing to repeat"),!1},H.regexp_eatSyntaxCharacter=function(o){var u=o.current();return Yb(u)?(o.lastIntValue=u,o.advance(),!0):!1};function Yb(o){return o===36||o>=40&&o<=43||o===46||o===63||o>=91&&o<=94||o>=123&&o<=125}s(Yb,"isSyntaxCharacter"),H.regexp_eatPatternCharacters=function(o){for(var u=o.pos,m=0;(m=o.current())!==-1&&!Yb(m);)o.advance();return o.pos!==u},H.regexp_eatExtendedPatternCharacter=function(o){var u=o.current();return u!==-1&&u!==36&&!(u>=40&&u<=43)&&u!==46&&u!==63&&u!==91&&u!==94&&u!==124?(o.advance(),!0):!1},H.regexp_groupSpecifier=function(o){if(o.eat(63)){if(this.regexp_eatGroupName(o)){o.groupNames.indexOf(o.lastStringValue)!==-1&&o.raise("Duplicate capture group name"),o.groupNames.push(o.lastStringValue);return}o.raise("Invalid group")}},H.regexp_eatGroupName=function(o){if(o.lastStringValue="",o.eat(60)){if(this.regexp_eatRegExpIdentifierName(o)&&o.eat(62))return!0;o.raise("Invalid capture group name")}return!1},H.regexp_eatRegExpIdentifierName=function(o){if(o.lastStringValue="",this.regexp_eatRegExpIdentifierStart(o)){for(o.lastStringValue+=qe(o.lastIntValue);this.regexp_eatRegExpIdentifierPart(o);)o.lastStringValue+=qe(o.lastIntValue);return!0}return!1},H.regexp_eatRegExpIdentifierStart=function(o){var u=o.pos,m=this.options.ecmaVersion>=11,y=o.current(m);return o.advance(m),y===92&&this.regexp_eatRegExpUnicodeEscapeSequence(o,m)&&(y=o.lastIntValue),PI(y)?(o.lastIntValue=y,!0):(o.pos=u,!1)};function PI(o){return I(o,!0)||o===36||o===95}s(PI,"isRegExpIdentifierStart"),H.regexp_eatRegExpIdentifierPart=function(o){var u=o.pos,m=this.options.ecmaVersion>=11,y=o.current(m);return o.advance(m),y===92&&this.regexp_eatRegExpUnicodeEscapeSequence(o,m)&&(y=o.lastIntValue),NI(y)?(o.lastIntValue=y,!0):(o.pos=u,!1)};function NI(o){return C(o,!0)||o===36||o===95||o===8204||o===8205}s(NI,"isRegExpIdentifierPart"),H.regexp_eatAtomEscape=function(o){return this.regexp_eatBackReference(o)||this.regexp_eatCharacterClassEscape(o)||this.regexp_eatCharacterEscape(o)||o.switchN&&this.regexp_eatKGroupName(o)?!0:(o.switchU&&(o.current()===99&&o.raise("Invalid unicode escape"),o.raise("Invalid escape")),!1)},H.regexp_eatBackReference=function(o){var u=o.pos;if(this.regexp_eatDecimalEscape(o)){var m=o.lastIntValue;if(o.switchU)return m>o.maxBackReference&&(o.maxBackReference=m),!0;if(m<=o.numCapturingParens)return!0;o.pos=u}return!1},H.regexp_eatKGroupName=function(o){if(o.eat(107)){if(this.regexp_eatGroupName(o))return o.backReferenceNames.push(o.lastStringValue),!0;o.raise("Invalid named reference")}return!1},H.regexp_eatCharacterEscape=function(o){return this.regexp_eatControlEscape(o)||this.regexp_eatCControlLetter(o)||this.regexp_eatZero(o)||this.regexp_eatHexEscapeSequence(o)||this.regexp_eatRegExpUnicodeEscapeSequence(o,!1)||!o.switchU&&this.regexp_eatLegacyOctalEscapeSequence(o)||this.regexp_eatIdentityEscape(o)},H.regexp_eatCControlLetter=function(o){var u=o.pos;if(o.eat(99)){if(this.regexp_eatControlLetter(o))return!0;o.pos=u}return!1},H.regexp_eatZero=function(o){return o.current()===48&&!Ef(o.lookahead())?(o.lastIntValue=0,o.advance(),!0):!1},H.regexp_eatControlEscape=function(o){var u=o.current();return u===116?(o.lastIntValue=9,o.advance(),!0):u===110?(o.lastIntValue=10,o.advance(),!0):u===118?(o.lastIntValue=11,o.advance(),!0):u===102?(o.lastIntValue=12,o.advance(),!0):u===114?(o.lastIntValue=13,o.advance(),!0):!1},H.regexp_eatControlLetter=function(o){var u=o.current();return Ub(u)?(o.lastIntValue=u%32,o.advance(),!0):!1};function Ub(o){return o>=65&&o<=90||o>=97&&o<=122}s(Ub,"isControlLetter"),H.regexp_eatRegExpUnicodeEscapeSequence=function(o,u){u===void 0&&(u=!1);var m=o.pos,y=u||o.switchU;if(o.eat(117)){if(this.regexp_eatFixedHexDigits(o,4)){var g=o.lastIntValue;if(y&&g>=55296&&g<=56319){var E=o.pos;if(o.eat(92)&&o.eat(117)&&this.regexp_eatFixedHexDigits(o,4)){var P=o.lastIntValue;if(P>=56320&&P<=57343)return o.lastIntValue=(g-55296)*1024+(P-56320)+65536,!0}o.pos=E,o.lastIntValue=g}return!0}if(y&&o.eat(123)&&this.regexp_eatHexDigits(o)&&o.eat(125)&&MI(o.lastIntValue))return!0;y&&o.raise("Invalid unicode escape"),o.pos=m}return!1};function MI(o){return o>=0&&o<=1114111}s(MI,"isValidUnicode"),H.regexp_eatIdentityEscape=function(o){if(o.switchU)return this.regexp_eatSyntaxCharacter(o)?!0:o.eat(47)?(o.lastIntValue=47,!0):!1;var u=o.current();return u!==99&&(!o.switchN||u!==107)?(o.lastIntValue=u,o.advance(),!0):!1},H.regexp_eatDecimalEscape=function(o){o.lastIntValue=0;var u=o.current();if(u>=49&&u<=57){do o.lastIntValue=10*o.lastIntValue+(u-48),o.advance();while((u=o.current())>=48&&u<=57);return!0}return!1},H.regexp_eatCharacterClassEscape=function(o){var u=o.current();if(AI(u))return o.lastIntValue=-1,o.advance(),!0;if(o.switchU&&this.options.ecmaVersion>=9&&(u===80||u===112)){if(o.lastIntValue=-1,o.advance(),o.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(o)&&o.eat(125))return!0;o.raise("Invalid property name")}return!1};function AI(o){return o===100||o===68||o===115||o===83||o===119||o===87}s(AI,"isCharacterClassEscape"),H.regexp_eatUnicodePropertyValueExpression=function(o){var u=o.pos;if(this.regexp_eatUnicodePropertyName(o)&&o.eat(61)){var m=o.lastStringValue;if(this.regexp_eatUnicodePropertyValue(o)){var y=o.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(o,m,y),!0}}if(o.pos=u,this.regexp_eatLoneUnicodePropertyNameOrValue(o)){var g=o.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(o,g),!0}return!1},H.regexp_validateUnicodePropertyNameAndValue=function(o,u,m){ut(o.unicodeProperties.nonBinary,u)||o.raise("Invalid property name"),o.unicodeProperties.nonBinary[u].test(m)||o.raise("Invalid property value")},H.regexp_validateUnicodePropertyNameOrValue=function(o,u){o.unicodeProperties.binary.test(u)||o.raise("Invalid property name")},H.regexp_eatUnicodePropertyName=function(o){var u=0;for(o.lastStringValue="";Wb(u=o.current());)o.lastStringValue+=qe(u),o.advance();return o.lastStringValue!==""};function Wb(o){return Ub(o)||o===95}s(Wb,"isUnicodePropertyNameCharacter"),H.regexp_eatUnicodePropertyValue=function(o){var u=0;for(o.lastStringValue="";VI(u=o.current());)o.lastStringValue+=qe(u),o.advance();return o.lastStringValue!==""};function VI(o){return Wb(o)||Ef(o)}s(VI,"isUnicodePropertyValueCharacter"),H.regexp_eatLoneUnicodePropertyNameOrValue=function(o){return this.regexp_eatUnicodePropertyValue(o)},H.regexp_eatCharacterClass=function(o){if(o.eat(91)){if(o.eat(94),this.regexp_classRanges(o),o.eat(93))return!0;o.raise("Unterminated character class")}return!1},H.regexp_classRanges=function(o){for(;this.regexp_eatClassAtom(o);){var u=o.lastIntValue;if(o.eat(45)&&this.regexp_eatClassAtom(o)){var m=o.lastIntValue;o.switchU&&(u===-1||m===-1)&&o.raise("Invalid character class"),u!==-1&&m!==-1&&u>m&&o.raise("Range out of order in character class")}}},H.regexp_eatClassAtom=function(o){var u=o.pos;if(o.eat(92)){if(this.regexp_eatClassEscape(o))return!0;if(o.switchU){var m=o.current();(m===99||Hb(m))&&o.raise("Invalid class escape"),o.raise("Invalid escape")}o.pos=u}var y=o.current();return y!==93?(o.lastIntValue=y,o.advance(),!0):!1},H.regexp_eatClassEscape=function(o){var u=o.pos;if(o.eat(98))return o.lastIntValue=8,!0;if(o.switchU&&o.eat(45))return o.lastIntValue=45,!0;if(!o.switchU&&o.eat(99)){if(this.regexp_eatClassControlLetter(o))return!0;o.pos=u}return this.regexp_eatCharacterClassEscape(o)||this.regexp_eatCharacterEscape(o)},H.regexp_eatClassControlLetter=function(o){var u=o.current();return Ef(u)||u===95?(o.lastIntValue=u%32,o.advance(),!0):!1},H.regexp_eatHexEscapeSequence=function(o){var u=o.pos;if(o.eat(120)){if(this.regexp_eatFixedHexDigits(o,2))return!0;o.switchU&&o.raise("Invalid escape"),o.pos=u}return!1},H.regexp_eatDecimalDigits=function(o){var u=o.pos,m=0;for(o.lastIntValue=0;Ef(m=o.current());)o.lastIntValue=10*o.lastIntValue+(m-48),o.advance();return o.pos!==u};function Ef(o){return o>=48&&o<=57}s(Ef,"isDecimalDigit"),H.regexp_eatHexDigits=function(o){var u=o.pos,m=0;for(o.lastIntValue=0;Gb(m=o.current());)o.lastIntValue=16*o.lastIntValue+Jb(m),o.advance();return o.pos!==u};function Gb(o){return o>=48&&o<=57||o>=65&&o<=70||o>=97&&o<=102}s(Gb,"isHexDigit");function Jb(o){return o>=65&&o<=70?10+(o-65):o>=97&&o<=102?10+(o-97):o-48}s(Jb,"hexToInt"),H.regexp_eatLegacyOctalEscapeSequence=function(o){if(this.regexp_eatOctalDigit(o)){var u=o.lastIntValue;if(this.regexp_eatOctalDigit(o)){var m=o.lastIntValue;u<=3&&this.regexp_eatOctalDigit(o)?o.lastIntValue=u*64+m*8+o.lastIntValue:o.lastIntValue=u*8+m}else o.lastIntValue=u;return!0}return!1},H.regexp_eatOctalDigit=function(o){var u=o.current();return Hb(u)?(o.lastIntValue=u-48,o.advance(),!0):(o.lastIntValue=0,!1)};function Hb(o){return o>=48&&o<=55}s(Hb,"isOctalDigit"),H.regexp_eatFixedHexDigits=function(o,u){var m=o.pos;o.lastIntValue=0;for(var y=0;y<u;++y){var g=o.current();if(!Gb(g))return o.pos=m,!1;o.lastIntValue=16*o.lastIntValue+Jb(g),o.advance()}return!0};var kf=s(function(u){this.type=u.type,this.value=u.value,this.start=u.start,this.end=u.end,u.options.locations&&(this.loc=new lt(u,u.startLoc,u.endLoc)),u.options.ranges&&(this.range=[u.start,u.end])},"Token"),le=Be.prototype;le.next=function(o){!o&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new kf(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},le.getToken=function(){return this.next(),new kf(this)},typeof Symbol<"u"&&(le[Symbol.iterator]=function(){var o=this;return{next:function(){var u=o.getToken();return{done:u.type===w.eof,value:u}}}}),le.nextToken=function(){var o=this.curContext();if((!o||!o.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(w.eof);if(o.override)return o.override(this);this.readToken(this.fullCharCodeAtPos())},le.readToken=function(o){return I(o,this.options.ecmaVersion>=6)||o===92?this.readWord():this.getTokenFromCode(o)},le.fullCharCodeAtPos=function(){var o=this.input.charCodeAt(this.pos);if(o<=55295||o>=56320)return o;var u=this.input.charCodeAt(this.pos+1);return u<=56319||u>=57344?o:(o<<10)+u-56613888},le.skipBlockComment=function(){var o=this.options.onComment&&this.curPosition(),u=this.pos,m=this.input.indexOf("*/",this.pos+=2);if(m===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=m+2,this.options.locations)for(var y=void 0,g=u;(y=Qe(this.input,g,this.pos))>-1;)++this.curLine,g=this.lineStart=y;this.options.onComment&&this.options.onComment(!0,this.input.slice(u+2,m),u,this.pos,o,this.curPosition())},le.skipLineComment=function(o){for(var u=this.pos,m=this.options.onComment&&this.curPosition(),y=this.input.charCodeAt(this.pos+=o);this.pos<this.input.length&&!Ie(y);)y=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(u+o,this.pos),u,this.pos,m,this.curPosition())},le.skipSpace=function(){e:for(;this.pos<this.input.length;){var o=this.input.charCodeAt(this.pos);switch(o){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(o>8&&o<14||o>=5760&&ne.test(String.fromCharCode(o)))++this.pos;else break e}}},le.finishToken=function(o,u){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var m=this.type;this.type=o,this.value=u,this.updateContext(m)},le.readToken_dot=function(){var o=this.input.charCodeAt(this.pos+1);if(o>=48&&o<=57)return this.readNumber(!0);var u=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&o===46&&u===46?(this.pos+=3,this.finishToken(w.ellipsis)):(++this.pos,this.finishToken(w.dot))},le.readToken_slash=function(){var o=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):o===61?this.finishOp(w.assign,2):this.finishOp(w.slash,1)},le.readToken_mult_modulo_exp=function(o){var u=this.input.charCodeAt(this.pos+1),m=1,y=o===42?w.star:w.modulo;return this.options.ecmaVersion>=7&&o===42&&u===42&&(++m,y=w.starstar,u=this.input.charCodeAt(this.pos+2)),u===61?this.finishOp(w.assign,m+1):this.finishOp(y,m)},le.readToken_pipe_amp=function(o){var u=this.input.charCodeAt(this.pos+1);if(u===o){if(this.options.ecmaVersion>=12){var m=this.input.charCodeAt(this.pos+2);if(m===61)return this.finishOp(w.assign,3)}return this.finishOp(o===124?w.logicalOR:w.logicalAND,2)}return u===61?this.finishOp(w.assign,2):this.finishOp(o===124?w.bitwiseOR:w.bitwiseAND,1)},le.readToken_caret=function(){var o=this.input.charCodeAt(this.pos+1);return o===61?this.finishOp(w.assign,2):this.finishOp(w.bitwiseXOR,1)},le.readToken_plus_min=function(o){var u=this.input.charCodeAt(this.pos+1);return u===o?u===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||ye.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(w.incDec,2):u===61?this.finishOp(w.assign,2):this.finishOp(w.plusMin,1)},le.readToken_lt_gt=function(o){var u=this.input.charCodeAt(this.pos+1),m=1;return u===o?(m=o===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+m)===61?this.finishOp(w.assign,m+1):this.finishOp(w.bitShift,m)):u===33&&o===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(u===61&&(m=2),this.finishOp(w.relational,m))},le.readToken_eq_excl=function(o){var u=this.input.charCodeAt(this.pos+1);return u===61?this.finishOp(w.equality,this.input.charCodeAt(this.pos+2)===61?3:2):o===61&&u===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(w.arrow)):this.finishOp(o===61?w.eq:w.prefix,1)},le.readToken_question=function(){var o=this.options.ecmaVersion;if(o>=11){var u=this.input.charCodeAt(this.pos+1);if(u===46){var m=this.input.charCodeAt(this.pos+2);if(m<48||m>57)return this.finishOp(w.questionDot,2)}if(u===63){if(o>=12){var y=this.input.charCodeAt(this.pos+2);if(y===61)return this.finishOp(w.assign,3)}return this.finishOp(w.coalesce,2)}}return this.finishOp(w.question,1)},le.readToken_numberSign=function(){var o=this.options.ecmaVersion,u=35;if(o>=13&&(++this.pos,u=this.fullCharCodeAtPos(),I(u,!0)||u===92))return this.finishToken(w.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+qe(u)+"'")},le.getTokenFromCode=function(o){switch(o){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(w.parenL);case 41:return++this.pos,this.finishToken(w.parenR);case 59:return++this.pos,this.finishToken(w.semi);case 44:return++this.pos,this.finishToken(w.comma);case 91:return++this.pos,this.finishToken(w.bracketL);case 93:return++this.pos,this.finishToken(w.bracketR);case 123:return++this.pos,this.finishToken(w.braceL);case 125:return++this.pos,this.finishToken(w.braceR);case 58:return++this.pos,this.finishToken(w.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(w.backQuote);case 48:var u=this.input.charCodeAt(this.pos+1);if(u===120||u===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(u===111||u===79)return this.readRadixNumber(8);if(u===98||u===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(o);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(o);case 124:case 38:return this.readToken_pipe_amp(o);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(o);case 60:case 62:return this.readToken_lt_gt(o);case 61:case 33:return this.readToken_eq_excl(o);case 63:return this.readToken_question();case 126:return this.finishOp(w.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+qe(o)+"'")},le.finishOp=function(o,u){var m=this.input.slice(this.pos,this.pos+u);return this.pos+=u,this.finishToken(o,m)},le.readRegexp=function(){for(var o,u,m=this.pos;;){this.pos>=this.input.length&&this.raise(m,"Unterminated regular expression");var y=this.input.charAt(this.pos);if(ye.test(y)&&this.raise(m,"Unterminated regular expression"),o)o=!1;else{if(y==="[")u=!0;else if(y==="]"&&u)u=!1;else if(y==="/"&&!u)break;o=y==="\\"}++this.pos}var g=this.input.slice(m,this.pos);++this.pos;var E=this.pos,P=this.readWord1();this.containsEsc&&this.unexpected(E);var A=this.regexpState||(this.regexpState=new Fi(this));A.reset(m,g,P),this.validateRegExpFlags(A),this.validateRegExpPattern(A);var L=null;try{L=new RegExp(g,P)}catch(Z){}return this.finishToken(w.regexp,{pattern:g,flags:P,value:L})},le.readInt=function(o,u,m){for(var y=this.options.ecmaVersion>=12&&u===void 0,g=m&&this.input.charCodeAt(this.pos)===48,E=this.pos,P=0,A=0,L=0,Z=u==null?1/0:u;L<Z;++L,++this.pos){var se=this.input.charCodeAt(this.pos),ct=void 0;if(y&&se===95){g&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),A===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),L===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),A=se;continue}if(se>=97?ct=se-97+10:se>=65?ct=se-65+10:se>=48&&se<=57?ct=se-48:ct=1/0,ct>=o)break;A=se,P=P*o+ct}return y&&A===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===E||u!=null&&this.pos-E!==u?null:P};function RI(o,u){return u?parseInt(o,8):parseFloat(o.replace(/_/g,""))}s(RI,"stringToNumber");function zb(o){return typeof BigInt!="function"?null:BigInt(o.replace(/_/g,""))}s(zb,"stringToBigInt"),le.readRadixNumber=function(o){var u=this.pos;this.pos+=2;var m=this.readInt(o);return m==null&&this.raise(this.start+2,"Expected number in radix "+o),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(m=zb(this.input.slice(u,this.pos)),++this.pos):I(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(w.num,m)},le.readNumber=function(o){var u=this.pos;!o&&this.readInt(10,void 0,!0)===null&&this.raise(u,"Invalid number");var m=this.pos-u>=2&&this.input.charCodeAt(u)===48;m&&this.strict&&this.raise(u,"Invalid number");var y=this.input.charCodeAt(this.pos);if(!m&&!o&&this.options.ecmaVersion>=11&&y===110){var g=zb(this.input.slice(u,this.pos));return++this.pos,I(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(w.num,g)}m&&/[89]/.test(this.input.slice(u,this.pos))&&(m=!1),y===46&&!m&&(++this.pos,this.readInt(10),y=this.input.charCodeAt(this.pos)),(y===69||y===101)&&!m&&(y=this.input.charCodeAt(++this.pos),(y===43||y===45)&&++this.pos,this.readInt(10)===null&&this.raise(u,"Invalid number")),I(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var E=RI(this.input.slice(u,this.pos),m);return this.finishToken(w.num,E)},le.readCodePoint=function(){var o=this.input.charCodeAt(this.pos),u;if(o===123){this.options.ecmaVersion<6&&this.unexpected();var m=++this.pos;u=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,u>1114111&&this.invalidStringToken(m,"Code point out of bounds")}else u=this.readHexChar(4);return u},le.readString=function(o){for(var u="",m=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var y=this.input.charCodeAt(this.pos);if(y===o)break;y===92?(u+=this.input.slice(m,this.pos),u+=this.readEscapedChar(!1),m=this.pos):y===8232||y===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(Ie(y)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return u+=this.input.slice(m,this.pos++),this.finishToken(w.string,u)};var Kb={};le.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(o){if(o===Kb)this.readInvalidTemplateToken();else throw o}this.inTemplateElement=!1},le.invalidStringToken=function(o,u){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Kb;this.raise(o,u)},le.readTmplToken=function(){for(var o="",u=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var m=this.input.charCodeAt(this.pos);if(m===96||m===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===w.template||this.type===w.invalidTemplate)?m===36?(this.pos+=2,this.finishToken(w.dollarBraceL)):(++this.pos,this.finishToken(w.backQuote)):(o+=this.input.slice(u,this.pos),this.finishToken(w.template,o));if(m===92)o+=this.input.slice(u,this.pos),o+=this.readEscapedChar(!0),u=this.pos;else if(Ie(m)){switch(o+=this.input.slice(u,this.pos),++this.pos,m){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:o+=`
`;break;default:o+=String.fromCharCode(m);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),u=this.pos}else++this.pos}},le.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(w.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},le.readEscapedChar=function(o){var u=this.input.charCodeAt(++this.pos);switch(++this.pos,u){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return qe(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),o){var m=this.pos-1;return this.invalidStringToken(m,"Invalid escape sequence in template string"),null}default:if(u>=48&&u<=55){var y=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],g=parseInt(y,8);return g>255&&(y=y.slice(0,-1),g=parseInt(y,8)),this.pos+=y.length-1,u=this.input.charCodeAt(this.pos),(y!=="0"||u===56||u===57)&&(this.strict||o)&&this.invalidStringToken(this.pos-1-y.length,o?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(g)}return Ie(u)?"":String.fromCharCode(u)}},le.readHexChar=function(o){var u=this.pos,m=this.readInt(16,o);return m===null&&this.invalidStringToken(u,"Bad character escape sequence"),m},le.readWord1=function(){this.containsEsc=!1;for(var o="",u=!0,m=this.pos,y=this.options.ecmaVersion>=6;this.pos<this.input.length;){var g=this.fullCharCodeAtPos();if(C(g,y))this.pos+=g<=65535?1:2;else if(g===92){this.containsEsc=!0,o+=this.input.slice(m,this.pos);var E=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var P=this.readCodePoint();(u?I:C)(P,y)||this.invalidStringToken(E,"Invalid Unicode escape"),o+=qe(P),m=this.pos}else break;u=!1}return o+this.input.slice(m,this.pos)},le.readWord=function(){var o=this.readWord1(),u=w.name;return this.keywords.test(o)&&(u=Y[o]),this.finishToken(u,o)};var qb="8.8.1";Be.acorn={Parser:Be,version:qb,defaultOptions:_t,Position:nt,SourceLocation:lt,getLineInfo:bt,Node:os,TokenType:k,tokTypes:w,keywordTypes:Y,TokContext:Ht,tokContexts:Se,isIdentifierChar:C,isIdentifierStart:I,Token:kf,isNewLine:Ie,lineBreak:ye,lineBreakG:Ke,nonASCIIwhitespace:ne};function FI(o,u){return Be.parse(o,u)}s(FI,"parse");function OI(o,u,m){return Be.parseExpressionAt(o,u,m)}s(OI,"parseExpressionAt");function BI(o,u){return Be.tokenizer(o,u)}s(BI,"tokenizer"),n.Node=os,n.Parser=Be,n.Position=nt,n.SourceLocation=lt,n.TokContext=Ht,n.Token=kf,n.TokenType=k,n.defaultOptions=_t,n.getLineInfo=bt,n.isIdentifierChar=C,n.isIdentifierStart=I,n.isNewLine=Ie,n.keywordTypes=Y,n.lineBreak=ye,n.lineBreakG=Ke,n.nonASCIIwhitespace=ne,n.parse=FI,n.parseExpressionAt=OI,n.tokContexts=Se,n.tokTypes=w,n.tokenizer=BI,n.version=qb,Object.defineProperty(n,"__esModule",{value:!0})})});var Yw=re(Di=>{"use strict";var jS=Di&&Di.__classPrivateFieldSet||function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},YS=Di&&Di.__classPrivateFieldGet||function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},US=Di&&Di.__importDefault||function(n){return n&&n.__esModule?n:{default:n}},_h;Object.defineProperty(Di,"__esModule",{value:!0});var WS=US(Lw()),GS=jw(),vh=class{constructor(e){_h.set(this,void 0);let t=(0,GS.parse)(e,{ecmaVersion:2020});jS(this,_h,t.body,"f"),this.visitor=new WS.default(YS(this,_h,"f")),this.scope=this.visitor.scope,this.scope.set("print",i=>console.log(...i)),this.visitor.on("console",(i,r)=>{if(i.type==="Identifier")return console;if(i.type==="CallExpression"&&i.callee.type==="MemberExpression"){let a=r.visitNode(i.callee.property),l=i.arguments.map(v=>r.visitNode(v)),h=console[a];return h?h(...l):"proceed"}return"proceed"}),this.visitor.on("Math",(i,r)=>{if(i.type==="Identifier")return Math;if(i.type==="CallExpression"&&i.callee.type==="MemberExpression"){let a=r.visitNode(i.callee.property),l=i.arguments.map(v=>r.visitNode(v)),h=Math[a];return h?h(...l):"proceed"}return"proceed"}),this.visitor.on("String",(i,r)=>{if(i.type==="Identifier")return String;if(i.type==="CallExpression"&&i.callee.type==="MemberExpression"){let a=r.visitNode(i.callee.property),l=i.arguments.map(v=>r.visitNode(v)),h=String[a];return h?h(l):"proceed"}return"proceed"}),this.visitor.on("Date",i=>{if(i.type==="Identifier")return Date})}interpret(){return this.visitor.run()}};s(vh,"Jinter");Di.default=vh;_h=new WeakMap});var Ww=re(zn=>{"use strict";var JS=zn&&zn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(zn,"__esModule",{value:!0});zn.Jinter=void 0;var Uw=JS(Yw());zn.Jinter=Uw.default;zn.default=Uw.default});var W0={};Oi(W0,{ChannelError:()=>Go,InnertubeError:()=>x,MissingParamError:()=>Jn,OAuthError:()=>hi,ParsingError:()=>Ft,Platform:()=>U,PlayerError:()=>Ot,SessionError:()=>Wo,base64ToU8:()=>U0,concatMemos:()=>j0,debugFetch:()=>qI,deepCompare:()=>Mf,escapeStringRegexp:()=>L0,generateRandomString:()=>Li,generateSidAuth:()=>D0,getRandomUserAgent:()=>hn,getStringBetweenStrings:()=>wt,hasKeys:()=>KI,streamToIterable:()=>Y0,throwIfMissing:()=>fe,timeToSeconds:()=>dt,u8ToBase64:()=>zt});var B0={};Oi(B0,{Maybe:()=>Gn,Memo:()=>fn,SuperParsedResult:()=>fi,YTNode:()=>c,observe:()=>Le});var q=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},$b=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},O0,Xb,$e,ge,pi,Bi,Wn,Qb=Symbol("ObservedArray.isObserved"),c=class{constructor(){O0.add(this),this.type=this.constructor.type}is(...e){return e.some(t=>q(this,O0,"m",Xb).call(this,t))}as(...e){if(!this.is(...e))throw new Ft(`Cannot cast ${this.type} to one of ${e.map(t=>t.type).join(", ")}`);return this}hasKey(e){return Reflect.has(this,e)}key(e){if(!this.hasKey(e))throw new Ft(`Missing key ${e}`);return new Gn(this[e])}};s(c,"YTNode");O0=new WeakSet,Xb=s(function(e){return this.type===e.type},"_YTNode_is");c.type="YTNode";var Gn=class{constructor(e){$e.add(this),ge.set(this,void 0),$b(this,ge,e,"f")}get typeof(){return typeof q(this,ge,"f")}string(){return q(this,$e,"m",Bi).call(this,"string")}isString(){return q(this,$e,"m",pi).call(this,"string")}number(){return q(this,$e,"m",Bi).call(this,"number")}isNumber(){return q(this,$e,"m",pi).call(this,"number")}bigint(){return q(this,$e,"m",Bi).call(this,"bigint")}isBigint(){return q(this,$e,"m",pi).call(this,"bigint")}boolean(){return q(this,$e,"m",Bi).call(this,"boolean")}isBoolean(){return q(this,$e,"m",pi).call(this,"boolean")}symbol(){return q(this,$e,"m",Bi).call(this,"symbol")}isSymbol(){return q(this,$e,"m",pi).call(this,"symbol")}undefined(){return q(this,$e,"m",Bi).call(this,"undefined")}isUndefined(){return q(this,$e,"m",pi).call(this,"undefined")}null(){if(q(this,ge,"f")!==null)throw new TypeError(`Expected null, got ${typeof q(this,ge,"f")}`);return q(this,ge,"f")}isNull(){return q(this,ge,"f")===null}object(){return q(this,$e,"m",Bi).call(this,"object")}isObject(){return q(this,$e,"m",pi).call(this,"object")}function(){return q(this,$e,"m",Bi).call(this,"function")}isFunction(){return q(this,$e,"m",pi).call(this,"function")}array(){if(!Array.isArray(q(this,ge,"f")))throw new TypeError(`Expected array, got ${typeof q(this,ge,"f")}`);return q(this,ge,"f")}arrayOfMaybe(){let e=[];return new Proxy(this.array(),{get(t,i){return Reflect.has(e,i)?Reflect.get(t,i):new Gn(Reflect.get(t,i))}})}isArray(){return Array.isArray(q(this,ge,"f"))}node(){if(!(q(this,ge,"f")instanceof c))throw new TypeError(`Expected YTNode, got ${q(this,ge,"f").constructor.name}`);return q(this,ge,"f")}isNode(){return q(this,ge,"f")instanceof c}nodeOfType(...e){return this.node().as(...e)}isNodeOfType(...e){return this.isNode()&&this.node().is(...e)}observed(){if(!this.isObserved())throw new TypeError(`Expected ObservedArray, got ${typeof q(this,ge,"f")}`);return q(this,ge,"f")}isObserved(){var e;return(e=q(this,ge,"f"))===null||e===void 0?void 0:e[Qb]}parsed(){if(!(q(this,ge,"f")instanceof fi))throw new TypeError(`Expected SuperParsedResult, got ${typeof q(this,ge,"f")}`);return q(this,ge,"f")}isParsed(){return q(this,ge,"f")instanceof fi}any(){return console.warn("This call is not meant to be used outside of debugging. Please use the specific type getter instead."),q(this,ge,"f")}instanceof(e){if(!this.isInstanceof(e))throw new TypeError(`Expected instance of ${e.name}, got ${q(this,ge,"f").constructor.name}`);return q(this,ge,"f")}isInstanceof(e){return q(this,ge,"f")instanceof e}};s(Gn,"Maybe");ge=new WeakMap,$e=new WeakSet,pi=s(function(e){return typeof q(this,ge,"f")===e},"_Maybe_checkPrimative"),Bi=s(function(e){if(!q(this,$e,"m",pi).call(this,e))throw new TypeError(`Expected ${e}, got ${this.typeof}`);return q(this,ge,"f")},"_Maybe_assertPrimative");var fi=class{constructor(e){Wn.set(this,void 0),$b(this,Wn,e,"f")}get is_null(){return q(this,Wn,"f")===null}get is_array(){return!this.is_null&&Array.isArray(q(this,Wn,"f"))}get is_node(){return!this.is_array}array(){if(!this.is_array)throw new TypeError("Expected an array, got a node");return q(this,Wn,"f")}item(){if(!this.is_node)throw new TypeError("Expected a node, got an array");return q(this,Wn,"f")}};s(fi,"SuperParsedResult");Wn=new WeakMap;function Le(n){return new Proxy(n,{get(e,t){return t=="get"?(i,r)=>e.find((a,l)=>{let h=Mf(i,a);return h&&r&&e.splice(l,1),h}):t==Qb?!0:t=="getAll"?(i,r)=>e.filter((a,l)=>{let h=Mf(i,a);return h&&r&&e.splice(l,1),h}):t=="matchCondition"?i=>e.find(r=>i(r)):t=="filterType"?(...i)=>Le(e.filter(r=>!!r.is(...i))):t=="firstOfType"?(...i)=>e.find(r=>!!r.is(...i)):t=="first"?()=>e[0]:t=="as"?(...i)=>Le(e.map(r=>{if(r.is(...i))return r;throw new Ft(`Expected node of any type ${i.map(a=>a.type).join(", ")}, got ${r.type}`)})):t=="remove"?i=>e.splice(i,1):Reflect.get(e,t)}})}s(Le,"observe");var fn=class extends Map{getType(...e){return e=e.flat(),Le(e.flatMap(t=>this.get(t.type)||[]))}};s(fn,"Memo");var Zb={desktop:["Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.3 Safari/605.1.15","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36 Edg/109.0.1518.61","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.2 Safari/605.1.15","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/105.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36"],mobile:["Mozilla/5.0 (iPhone; CPU iPhone OS 16_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.1 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/109.0.5414.83 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/109.0.5414.83 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/109.0.5414.83 Mobile/15E148 Safari/604.1","Mozilla/5.0 (Linux; Android 12; SM-G990U) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Mobile Safari/537.36","Mozilla/5.0 (Linux; Android 13; SM-G998B) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Mobile Safari/537.36","Mozilla/5.0 (iPhone; CPU iPhone OS 16_1_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) FxiOS/108.1  Mobile/15E148 Safari/605.1.15","Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/109.0.5414.83 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 11_4_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15G77 ChannelId(73) NebulaSDK/1.8.100112 Nebula PSDType(1) AlipayDefined(nt:4G,ws:320|504|2.0) AliApp(AP/10.1.30.300) AlipayClient/10.1.30.300 Alipay Language/zh-Hans","Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.2 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_1_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.1 Mobile/15E148 Safari/604.1","Mozilla/5.0 (Linux; Android 13; SM-N981U) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Mobile Safari/537.36","Mozilla/5.0 (Linux; Android 13; SM-A515F) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Mobile Safari/537.36","Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.2 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.0 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/109.0.5414.83 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/109.0.5414.83 Mobile/15E148 Safari/604.1","Mozilla/5.0 (Linux; Android 12; M2010J19SG) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Mobile Safari/537.36","Mozilla/5.0 (iPhone; CPU iPhone OS 15_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.5 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_1_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.1 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/109.0.5414.83 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 15_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.1 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_1_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.1 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/109.0.5414.83 Mobile/15E148 Safari/604.1","Mozilla/5.0 (Linux; Android 11; M2102J20SG) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Mobile Safari/537.36","Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.2 Mobile/15E148 Safari/604.1"]};var JI=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},HI=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},ew=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},Uo=function(n){return this instanceof Uo?(this.v=n,this):new Uo(n)},zI=function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,a=[];return r={},l("next"),l("throw"),l("return"),r[Symbol.asyncIterator]=function(){return this},r;function l(I){i[I]&&(r[I]=function(C){return new Promise(function(k,F){a.push([I,C,k,F])>1||h(I,C)})})}function h(I,C){try{v(i[I](C))}catch(k){b(a[0][3],k)}}function v(I){I.value instanceof Uo?Promise.resolve(I.value.v).then(_,p):b(a[0][2],I)}function _(I){h("next",I)}function p(I){h("throw",I)}function b(I,C){I(C),a.shift(),a.length&&h(a[0][0],a[0][1])}},Af,Vf,U=class{static load(e){HI(U,Af,e,"f",Vf)}static get shim(){if(!ew(U,Af,"f",Vf))throw new Error("Platform is not loaded");return ew(U,Af,"f",Vf)}};s(U,"Platform");Af=U;Vf={value:void 0};var x=class extends Error{constructor(e,t){super(e),t&&(this.info=t),this.date=new Date,this.version=U.shim.info.version}};s(x,"InnertubeError");var Ft=class extends x{};s(Ft,"ParsingError");var Jn=class extends x{};s(Jn,"MissingParamError");var hi=class extends x{};s(hi,"OAuthError");var Ot=class extends Error{};s(Ot,"PlayerError");var Wo=class extends Error{};s(Wo,"SessionError");var Go=class extends Error{};s(Go,"ChannelError");function Mf(n,e){return Reflect.ownKeys(n).some(i=>{var r;let a=((r=e[i])===null||r===void 0?void 0:r.constructor.name)==="Text";return!a&&typeof e[i]=="object"?JSON.stringify(n[i])===JSON.stringify(e[i]):n[i]===(a?e[i].toString():e[i])})}s(Mf,"deepCompare");function wt(n,e,t){let i=new RegExp(`${L0(e)}(.*?)${L0(t)}`,"s"),r=n.match(i);return r?r[1]:void 0}s(wt,"getStringBetweenStrings");function L0(n){return n.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}s(L0,"escapeStringRegexp");function hn(n){let e=Zb[n],t=Math.floor(Math.random()*e.length);return e[t]}s(hn,"getRandomUserAgent");function D0(n){return JI(this,void 0,void 0,function*(){let e="https://www.youtube.com",t=Math.floor(new Date().getTime()/1e3),i=[t,n,e].join(" "),r=yield U.shim.sha1Hash(i);return["SAPISIDHASH",[t,r].join("_")].join(" ")})}s(D0,"generateSidAuth");function Li(n){let e=[],t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";for(let i=0;i<n;i++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}s(Li,"generateRandomString");function dt(n){let e=n.split(":").map(t=>parseInt(t.replace(/\D/g,"")));switch(e.length){case 1:return e[0];case 2:return e[0]*60+e[1];case 3:return e[0]*3600+e[1]*60+e[2];default:throw new Error("Invalid time string")}}s(dt,"timeToSeconds");function j0(...n){let e=new fn;for(let t of n)if(!!t)for(let i of t)e.set(...i);return e}s(j0,"concatMemos");function fe(n){for(let[e,t]of Object.entries(n))if(!t)throw new Jn(`${e} is missing`)}s(fe,"throwIfMissing");function KI(n,...e){for(let t of e)if(!Reflect.has(n,t)||n[t]===void 0)return!1;return!0}s(KI,"hasKeys");function Y0(n){return zI(this,arguments,s(function*(){let t=n.getReader();try{for(;;){let{done:i,value:r}=yield Uo(t.read());if(i)return yield Uo(void 0);yield yield Uo(r)}}finally{t.releaseLock()}},"streamToIterable_1"))}s(Y0,"streamToIterable");var qI=s((n,e)=>{let t=typeof n=="string"?new URL(n):n instanceof URL?n:new URL(n.url),i=e!=null&&e.headers?new Headers(e.headers):n instanceof Request?n.headers:new Headers,r=[...i],a=e!=null&&e.body?typeof e.body=="string"?i.get("content-type")==="application/json"?JSON.stringify(JSON.parse(e.body),null,2):e.body:"    <binary>":"    (none)",l=r.length>0?`${r.map(([h,v])=>`    ${h}: ${v}`).join(`
`)}`:"    (none)";return console.log(`YouTube.js Fetch:
  url: ${t.toString()}
  method: ${(e==null?void 0:e.method)||"GET"}
  headers:
${l}
' + 
    '  body:
${a}`),U.shim.fetch(n,e)},"debugFetch");function zt(n){return btoa(String.fromCharCode.apply(null,Array.from(n)))}s(zt,"u8ToBase64");function U0(n){return new Uint8Array(atob(n).split("").map(e=>e.charCodeAt(0)))}s(U0,"base64ToU8");var $I=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})};function G0(n){return $I(this,void 0,void 0,function*(){let e=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];function t(i){let r=new Uint8Array(i),a=[];for(let l=0;l<r.length;++l)a.push(e[r[l]]);return a.join("")}return s(t,"hex"),t(yield crypto.subtle.digest("SHA-1",new TextEncoder().encode(n)))})}s(G0,"sha1Hash");var Rf={name:"youtubei.js",version:"4.1.0",description:"A wrapper around YouTube's private API. Supports YouTube, YouTube Music, YouTube Kids and YouTube Studio (WIP).",type:"module",types:"./dist/src/platform/lib.d.ts",typesVersions:{"*":{agnostic:["./dist/src/platform/lib.d.ts"],web:["./dist/src/platform/lib.d.ts"],"web.bundle":["./dist/src/platform/lib.d.ts"],"web.bundle.min":["./dist/src/platform/lib.d.ts"]}},exports:{".":{node:{import:"./dist/src/platform/node.js",require:"./bundle/node.cjs"},deno:"./dist/src/platform/deno.js",types:"./dist/src/platform/lib.d.ts",browser:"./dist/src/platform/web.js",default:"./dist/src/platform/web.js"},"./agnostic":{types:"./dist/src/platform/lib.d.ts",default:"./dist/src/platform/lib.js"},"./web":{types:"./dist/src/platform/lib.d.ts",default:"./dist/src/platform/web.js"},"./web.bundle":{types:"./dist/src/platform/lib.d.ts",default:"./bundle/browser.js"},"./web.bundle.min":{types:"./dist/src/platform/lib.d.ts",default:"./bundle/browser.min.js"}},author:"LuanRT <luan.lrt4@gmail.com> (https://github.com/LuanRT)",funding:["https://github.com/sponsors/LuanRT"],contributors:["Wykerd (https://github.com/wykerd/)","MasterOfBob777 (https://github.com/MasterOfBob777)","patrickkfkan (https://github.com/patrickkfkan)","akkadaska (https://github.com/akkadaska)"],directories:{test:"./test",examples:"./examples",dist:"./dist"},scripts:{test:"npx jest --verbose",lint:"npx eslint ./src","lint:fix":"npx eslint --fix ./src",build:"npm run build:parser-map && npm run build:proto && npm run build:esm && npm run bundle:node && npm run bundle:browser && npm run bundle:browser:prod","build:parser-map":"node ./scripts/build-parser-map.cjs","build:proto":'npx pb-gen-ts --entry-path="src/proto" --out-dir="src/proto/generated" --ext-in-import=".js"',"build:esm":"npx tsc","build:deno":`npx cpy ./src ./deno && npx cpy ./package.json ./deno && npx replace ".js';" ".ts';" ./deno -r && npx replace '.js";' '.ts";' ./deno -r && npx replace "'linkedom';" "'https://esm.sh/linkedom';" ./deno -r && npx replace "'jintr';" "'https://esm.sh/jintr';" ./deno -r && npx replace "new Jinter.default" "new Jinter" ./deno -r`,"bundle:node":'npx esbuild ./dist/src/platform/node.js --bundle --target=node10 --keep-names --format=cjs --platform=node --outfile=./bundle/node.cjs --external:jintr --external:undici --external:linkedom --sourcemap --banner:js="/* eslint-disable */"',"bundle:browser":'npx esbuild ./dist/src/platform/web.js --banner:js="/* eslint-disable */" --bundle --target=chrome58 --keep-names --format=esm --sourcemap --define:global=globalThis --outfile=./bundle/browser.js --platform=browser',"bundle:browser:prod":"npm run bundle:browser -- --outfile=./bundle/browser.min.js --minify",prepare:"npm run build",watch:"npx tsc --watch"},repository:{type:"git",url:"git+https://github.com/LuanRT/YouTube.js.git"},license:"MIT",dependencies:{jintr:"^0.4.1",linkedom:"^0.14.12",undici:"^5.19.1"},devDependencies:{"@types/jest":"^28.1.7","@types/node":"^17.0.45","@typescript-eslint/eslint-plugin":"^5.30.6","@typescript-eslint/parser":"^5.30.6","cpy-cli":"^4.2.0",esbuild:"^0.14.49",eslint:"^8.19.0","eslint-plugin-tsdoc":"^0.2.16",glob:"^8.0.3",jest:"^28.1.3",pbkit:"^0.0.59",replace:"^1.2.2","ts-jest":"^28.0.8",typescript:"^4.9.5"},bugs:{url:"https://github.com/LuanRT/YouTube.js/issues"},homepage:"https://github.com/LuanRT/YouTube.js#readme",keywords:["yt","dl","ytdl","youtube","youtubedl","youtube-dl","youtube-downloader","youtube-music","youtube-studio","innertube","unofficial","downloader","livechat","studio","upload","ytmusic","search","music","api"]};var Gw=GI(Ww(),1);function Sy(n,e){let t=new Gw.default.default(n);for(let[i,r]of Object.entries(e))t.scope.set(i,r);return t.interpret()}s(Sy,"evaluate");var ji={};Oi(ji,{CLIENTS:()=>Xt,INNERTUBE_HEADERS_BASE:()=>Kw,OAUTH:()=>Hw,STREAM_HEADERS:()=>zw,URLS:()=>Jw,default:()=>G});var Jw=Object.freeze({YT_BASE:"https://www.youtube.com",YT_MUSIC_BASE:"https://music.youtube.com",YT_SUGGESTIONS:"https://suggestqueries.google.com/complete/",YT_UPLOAD:"https://upload.youtube.com/",API:Object.freeze({BASE:"https://youtubei.googleapis.com",PRODUCTION_1:"https://www.youtube.com/youtubei/",PRODUCTION_2:"https://youtubei.googleapis.com/youtubei/",STAGING:"https://green-youtubei.sandbox.googleapis.com/youtubei/",RELEASE:"https://release-youtubei.sandbox.googleapis.com/youtubei/",TEST:"https://test-youtubei.sandbox.googleapis.com/youtubei/",CAMI:"http://cami-youtubei.sandbox.googleapis.com/youtubei/",UYTFE:"https://uytfe.sandbox.google.com/youtubei/"})}),Hw=Object.freeze({SCOPE:"http://gdata.youtube.com https://www.googleapis.com/auth/youtube-paid-content",GRANT_TYPE:"http://oauth.net/grant_type/device/1.0",MODEL_NAME:"ytlr::",HEADERS:Object.freeze({accept:"*/*",origin:"https://www.youtube.com","user-agent":"Mozilla/5.0 (ChromiumStylePlatform) Cobalt/Version","content-type":"application/json",referer:"https://www.youtube.com/tv","accept-language":"en-US"}),REGEX:Object.freeze({AUTH_SCRIPT:/<script id="base-js" src="(.*?)" nonce=".*?"><\/script>/,CLIENT_IDENTITY:new RegExp('.+?={};var .+?={clientId:"(?<client_id>.+?)",.+?:"(?<client_secret>.+?)"},')})}),Xt=Object.freeze({WEB:{NAME:"WEB",VERSION:"2.20230104.01.00",API_KEY:"AIzaSyAO_FJ2SlqU8Q4STEHLGCilw_Y9_11qcW8",API_VERSION:"v1",STATIC_VISITOR_ID:"6zpwvWUNAco"},WEB_KIDS:{NAME:"WEB_KIDS",VERSION:"2.20230111.00.00"},YTMUSIC:{NAME:"WEB_REMIX",VERSION:"1.20211213.00.00"},ANDROID:{NAME:"ANDROID",VERSION:"18.06.35",SDK_VERSION:"29",USER_AGENT:"com.google.android.youtube/18.06.35 (Linux; U; Android 10; US)"},YTSTUDIO_ANDROID:{NAME:"ANDROID_CREATOR",VERSION:"22.43.101"},YTMUSIC_ANDROID:{NAME:"ANDROID_MUSIC",VERSION:"5.34.51"},TV_EMBEDDED:{NAME:"TVHTML5_SIMPLY_EMBEDDED_PLAYER",VERSION:"2.0"}}),zw=Object.freeze({accept:"*/*",origin:"https://www.youtube.com",referer:"https://www.youtube.com",DNT:"?1"}),Kw=Object.freeze({accept:"*/*","accept-encoding":"gzip, deflate","content-type":"application/json"}),G={URLS:Jw,OAUTH:Hw,CLIENTS:Xt,STREAM_HEADERS:zw,INNERTUBE_HEADERS_BASE:Kw};var yh=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},Ho,Yi=class extends EventTarget{constructor(){super(),Ho.set(this,new Map)}emit(e,...t){let i=new U.shim.CustomEvent(e,{detail:t});this.dispatchEvent(i)}on(e,t){let i=s(r=>{r instanceof U.shim.CustomEvent?t(...r.detail):t(r)},"wrapper");yh(this,Ho,"f").set(t,i),this.addEventListener(e,i)}once(e,t){let i=s(r=>{r instanceof U.shim.CustomEvent?t(...r.detail):t(r),this.off(e,t)},"wrapper");yh(this,Ho,"f").set(t,i),this.addEventListener(e,i)}off(e,t){let i=yh(this,Ho,"f").get(t);i&&(this.removeEventListener(e,i),yh(this,Ho,"f").delete(t))}};s(Yi,"EventEmitterLike");Ho=new WeakMap;var cs=class extends c{constructor(e){super(),this.audio_only_availability=e.audioOnlyAvailability}};s(cs,"AudioOnlyPlayability");cs.type="AudioOnlyPlayability";var bh=cs;var ds=class extends c{constructor(e){var t,i,r,a;super(),e.text&&(this.text=new d(e.text).toString()),!((t=e.accessibility)===null||t===void 0)&&t.label&&(this.label=(i=e.accessibility)===null||i===void 0?void 0:i.label),e.tooltip&&(this.tooltip=e.tooltip),!((r=e.icon)===null||r===void 0)&&r.iconType&&(this.icon_type=(a=e.icon)===null||a===void 0?void 0:a.iconType),Reflect.has(e,"isDisabled")&&(this.is_disabled=e.isDisabled),this.endpoint=new T(e.navigationEndpoint||e.serviceEndpoint||e.command)}};s(ds,"Button");ds.type="Button";var M=ds;var ps=class extends c{constructor(e){var t,i,r;super(),this.label=new d(e.label).toString(),this.selected=!!e.isSelected,e.int32Value?this.value=e.int32Value:e.stringValue&&(this.value=e.stringValue),!((t=e.onSelectCommand)===null||t===void 0)&&t.browseEndpoint&&(this.endpoint=new T(e.onSelectCommand)),!((i=e.icon)===null||i===void 0)&&i.iconType&&(this.icon_type=(r=e.icon)===null||r===void 0?void 0:r.iconType),e.descriptionText&&(this.description=new d(e.descriptionText).toString())}};s(ps,"DropdownItem");ps.type="DropdownItem";var wh=ps;var fs=class extends c{constructor(e){super(),this.label=e.label||"",this.entries=f.parseArray(e.entries,wh)}};s(fs,"Dropdown");fs.type="Dropdown";var zo=fs;var hs=class extends c{constructor(e){var t;super(),this.title=new d(e.dialogTitle).toString(),this.title_placeholder=e.titlePlaceholder||"",this.privacy_option=((t=f.parseItem(e.privacyOption,zo))===null||t===void 0?void 0:t.entries)||null,this.create_button=f.parseItem(e.cancelButton,M),this.cancel_button=f.parseItem(e.cancelButton,M)}};s(hs,"CreatePlaylistDialog");hs.type="CreatePlaylistDialog";var gh=hs;var ms=class extends c{constructor(e){var t,i,r,a,l,h,v,_;super(),Reflect.has(e||{},"innertubeCommand")&&(e=e.innertubeCommand);let p=Object.keys(e||{}).find(b=>b.endsWith("Endpoint")||b.endsWith("Command"));this.payload=p?Reflect.get(e,p):{},Reflect.has(this.payload,"dialog")&&(this.dialog=f.parse(this.payload.dialog)),e!=null&&e.serviceEndpoint&&(e=e.serviceEndpoint),this.metadata={},!((i=(t=e==null?void 0:e.commandMetadata)===null||t===void 0?void 0:t.webCommandMetadata)===null||i===void 0)&&i.url&&(this.metadata.url=e.commandMetadata.webCommandMetadata.url),!((a=(r=e==null?void 0:e.commandMetadata)===null||r===void 0?void 0:r.webCommandMetadata)===null||a===void 0)&&a.webPageType&&(this.metadata.page_type=e.commandMetadata.webCommandMetadata.webPageType),!((h=(l=e==null?void 0:e.commandMetadata)===null||l===void 0?void 0:l.webCommandMetadata)===null||h===void 0)&&h.apiUrl?this.metadata.api_url=e.commandMetadata.webCommandMetadata.apiUrl.replace("/youtubei/v1/",""):p&&(this.metadata.api_url=this.getEndpoint(p)),!((_=(v=e==null?void 0:e.commandMetadata)===null||v===void 0?void 0:v.webCommandMetadata)===null||_===void 0)&&_.sendPost&&(this.metadata.send_post=e.commandMetadata.webCommandMetadata.sendPost),e!=null&&e.createPlaylistEndpoint&&e!=null&&e.createPlaylistEndpoint.createPlaylistDialog&&(this.dialog=f.parseItem(e==null?void 0:e.createPlaylistEndpoint.createPlaylistDialog,gh))}getEndpoint(e){switch(e){case"browseEndpoint":return"/browse";case"watchEndpoint":return"/player";case"searchEndpoint":return"/search";case"watchPlaylistEndpoint":return"/next";case"liveChatItemContextMenuEndpoint":return"live_chat/get_item_context_menu"}}call(e,t){if(!e)throw new Error("An active caller must be provided");if(!this.metadata.api_url)throw new Error("Expected an api_url, but none was found, this is a bug.");return e.execute(this.metadata.api_url,Object.assign(Object.assign({},this.payload),t))}toURL(){if(!!this.metadata.url&&!!this.metadata.page_type)return this.metadata.page_type==="WEB_PAGE_TYPE_UNKNOWN"?this.metadata.url:`https://www.youtube.com${this.metadata.url}`}};s(ms,"NavigationEndpoint");ms.type="NavigationEndpoint";var T=ms;var xh=class{constructor(e){this.text=e.text,this.bold=Boolean(e.bold),this.italics=Boolean(e.italics),this.strikethrough=Boolean(e.strikethrough),this.endpoint=e.navigationEndpoint?new T(e.navigationEndpoint):void 0,this.attachment=e.attachment}toString(){return this.text}toHTML(){let e=[];this.bold&&e.push("b"),this.italics&&e.push("i"),this.strikethrough&&e.push("s");let t=Ih(this.text),r=`<span style="white-space: pre-wrap;">${e.map(a=>`<${a}>`).join("")+t+e.map(a=>`</${a}>`).join("")}</span>`;if(this.attachment&&this.attachment.element.type.imageType.image.sources.length){let{url:a}=this.attachment.element.type.imageType.image.sources[0];if(this.endpoint){let l=this.endpoint.toURL();if(l)return`<a href="${l}" class="yt-ch-link" display: block; width: fit-content; font-size: small;><img src="${a}" style="vertical-align: middle; height: ${this.attachment.element.properties.layoutProperties.height.value}px; width: ${this.attachment.element.properties.layoutProperties.width.value}px;">${r}</a>`}}if(this.endpoint){let a=this.endpoint.toURL();if(a)return`<a href="${a}">${r}</a>`}return r}};s(xh,"TextRun");var Th=xh;var Ko=class{constructor(e){this.url=e.url,this.width=e.width,this.height=e.height}static fromResponse(e){return!e||!e.thumbnails?[]:e.thumbnails.map(t=>new Ko(t)).sort((t,i)=>i.width-t.width)}};s(Ko,"Thumbnail");var S=Ko;var Sh=class{constructor(e){var t,i,r,a,l,h;this.text=((t=e.emoji)===null||t===void 0?void 0:t.emojiId)||((r=(i=e.emoji)===null||i===void 0?void 0:i.shortcuts)===null||r===void 0?void 0:r[0])||"",this.emoji={emoji_id:e.emoji.emojiId,shortcuts:((a=e.emoji)===null||a===void 0?void 0:a.shortcuts)||[],search_terms:((l=e.emoji)===null||l===void 0?void 0:l.searchTerms)||[],image:S.fromResponse(e.emoji.image),is_custom:!!(!((h=e.emoji)===null||h===void 0)&&h.isCustomEmoji)}}toString(){return this.text}toHTML(){let e=Ih(this.text);return`<img src="${this.emoji.image[0].url}" alt="${e}" title="${e}" style="display: inline-block; vertical-align: text-top; height: var(--yt-emoji-size, 1rem); width: var(--yt-emoji-size, 1rem);" loading="lazy" crossorigin="anonymous" />`}};s(Sh,"EmojiRun");var Ch=Sh;function Ih(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}s(Ih,"escape");var d=class{constructor(e){var t,i,r,a;(e==null?void 0:e.hasOwnProperty("runs"))&&Array.isArray(e.runs)?(this.runs=e.runs.map(l=>l.emoji?new Ch(l):new Th(l)),this.text=this.runs.map(l=>l.text).join("")):this.text=e==null?void 0:e.simpleText,typeof e=="object"&&e!==null&&Reflect.has(e,"navigationEndpoint")&&(this.endpoint=new T(e.navigationEndpoint)),typeof e=="object"&&e!==null&&Reflect.has(e,"titleNavigationEndpoint")&&(this.endpoint=new T(e.titleNavigationEndpoint)),this.endpoint||!((i=(t=this.runs)===null||t===void 0?void 0:t[0])===null||i===void 0)&&i.endpoint&&(this.endpoint=(a=(r=this.runs)===null||r===void 0?void 0:r[0])===null||a===void 0?void 0:a.endpoint)}toHTML(){return this.runs?this.runs.map(e=>e.toHTML()).join(""):this.text}isEmpty(){return this.text===void 0}toString(){return this.text||"N/A"}};s(d,"Text");var _s=class extends c{constructor(e){super(),this.cards=f.parseArray(e.cards),this.header=new d(e.headerText),this.allow_teaser_dismiss=e.allowTeaserDismiss}};s(_s,"CardCollection");_s.type="CardCollection";var Eh=_s;var vs=class extends c{constructor(e){super(),this.elements=f.parseArray(e.elements),this.start_ms=e.startMs}};s(vs,"Endscreen");vs.type="Endscreen";var kh=vs;var ys=class extends c{constructor(e){super(),Reflect.has(e,"featuredChannel")&&(this.featured_channel={start_time_ms:e.featuredChannel.startTimeMs,end_time_ms:e.featuredChannel.endTimeMs,watermark:S.fromResponse(e.featuredChannel.watermark),channel_name:e.featuredChannel.channelName,endpoint:new T(e.featuredChannel.navigationEndpoint),subscribe_button:f.parseItem(e.featuredChannel.subscribeButton)}),this.allow_swipe_dismiss=e.allowSwipeDismiss,this.annotation_id=e.annotationId}};s(ys,"PlayerAnnotationsExpanded");ys.type="PlayerAnnotationsExpanded";var Ph=ys;var bs=class extends c{constructor(e){super(),this.caption_tracks=e.captionTracks.map(t=>({base_url:t.baseUrl,name:new d(t.name),vss_id:t.vssId,language_code:t.languageCode,kind:t.kind,is_translatable:t.isTranslatable})),this.audio_tracks=e.audioTracks.map(t=>({audio_track_id:t.audioTrackId,captions_initial_state:t.captionsInitialState,default_caption_track_index:t.defaultCaptionTrackIndex,has_default_track:t.hasDefaultTrack,visibility:t.visibility,caption_track_indices:t.captionTrackIndices})),this.default_audio_track_index=e.defaultAudioTrackIndex,this.translation_languages=e.translationLanguages.map(t=>({language_code:t.languageCode,language_name:new d(t.languageName)}))}};s(bs,"PlayerCaptionsTracklist");bs.type="PlayerCaptionsTracklist";var Nh=bs;var ws=class extends c{constructor(){super()}};s(ws,"PlayerLiveStoryboardSpec");ws.type="PlayerLiveStoryboardSpec";var Mh=ws;var gs=class extends c{constructor(e){super();let t=e.spec.split("|"),i=new URL(t.shift());this.boards=t.map((r,a)=>{let[l,h,v,_,p,b,I,C]=r.split("#");i.searchParams.set("sigh",C);let k=Math.ceil(parseInt(v,10)/(parseInt(_,10)*parseInt(p,10)));return{template_url:i.toString().replace("$L",a).replace("$N",I),thumbnail_width:parseInt(l,10),thumbnail_height:parseInt(h,10),thumbnail_count:parseInt(v,10),interval:parseInt(b,10),columns:parseInt(_,10),rows:parseInt(p,10),storyboard_count:k}})}};s(gs,"PlayerStoryboardSpec");gs.type="PlayerStoryboardSpec";var Ah=gs;var xs=class extends c{constructor(e){super(),this.text=new d(e.text).toString()}};s(xs,"Message");xs.type="Message";var pt=xs;var Ts=class extends c{constructor(e){super(),this.name=new d(e.authorName),this.photo=S.fromResponse(e.authorPhoto),this.badges=f.parse(e.authorBadges)}};s(Ts,"LiveChatParticipant");Ts.type="LiveChatParticipant";var Vh=Ts;var Is=class extends c{constructor(e){super(),this.title=new d(e.title),this.participants=f.parseArray(e.participants,Vh)}};s(Is,"LiveChatParticipantsList");Is.type="LiveChatParticipantsList";var Rh=Is;var Ss=class extends c{constructor(e){var t,i;super(),this.items=f.parseArray(e.items),this.top_level_buttons=f.parseArray(e.topLevelButtons),this.label=((i=(t=e.accessibility)===null||t===void 0?void 0:t.accessibilityData)===null||i===void 0?void 0:i.label)||null}get contents(){return this.items}};s(Ss,"Menu");Ss.type="Menu";var ee=Ss;var Cs=class extends c{constructor(e){var t,i,r;super(),e.title&&(this.title=e.title),!((t=e.icon)===null||t===void 0)&&t.iconType&&(this.icon_type=e.icon.iconType),!((r=(i=e.accessibility)===null||i===void 0?void 0:i.accessibilityData)===null||r===void 0)&&r.label&&(this.label=e.accessibility.accessibilityData.label),e.tooltip&&(this.tooltip=e.tooltip),e.subMenuItems&&(this.sub_menu_items=e.subMenuItems.map(a=>{var l,h;return{title:a.title,selected:a.selected,continuation:(h=(l=a.continuation)===null||l===void 0?void 0:l.reloadContinuationData)===null||h===void 0?void 0:h.continuation,endpoint:new T(a.serviceEndpoint||a.navigationEndpoint),subtitle:a.subtitle||null}}))}};s(Cs,"SortFilterSubMenu");Cs.type="SortFilterSubMenu";var Ui=Cs;var Es=class extends c{constructor(e){super(),this.overflow_menu=f.parseItem(e.overflowMenu,ee),this.collapse_button=f.parseItem(e.collapseButton,M),this.view_selector=f.parseItem(e.viewSelector,Ui)}};s(Es,"LiveChatHeader");Es.type="LiveChatHeader";var Fh=Es;var ks=class extends c{constructor(e){super(),this.max_items_to_display=e.maxItemsToDisplay,this.more_comments_below_button=f.parseItem(e.moreCommentsBelowButton,M)}};s(ks,"LiveChatItemList");ks.type="LiveChatItemList";var Oh=ks;var Ps=class extends c{constructor(e){super(),this.text=new d(e.text),this.alert_type=e.type}};s(Ps,"Alert");Ps.type="Alert";var Bh=Ps;var Ns=class extends c{constructor(e){var t;super(),this.title=new d(e.title).toString(),this.form_item_entity_key=e.formItemEntityKey,this.selected_icon_type=((t=e.selectedIcon)===null||t===void 0?void 0:t.iconType)||null,this.endpoint=e.selectedCommand?new T(e.selectedCommand):null,this.selected=!!this.endpoint}};s(Ns,"MusicMultiSelectMenuItem");Ns.type="MusicMultiSelectMenuItem";var Bt=Ns;var Lh=class{constructor(e){var t,i,r,a,l,h,v,_;if(this.itag=e.itag,this.mime_type=e.mimeType,this.is_type_otf=e.type==="FORMAT_STREAM_TYPE_OTF",this.bitrate=e.bitrate,this.average_bitrate=e.averageBitrate,this.width=e.width||void 0,this.height=e.height||void 0,this.init_range=e.initRange?{start:parseInt(e.initRange.start),end:parseInt(e.initRange.end)}:void 0,this.index_range=e.indexRange?{start:parseInt(e.indexRange.start),end:parseInt(e.indexRange.end)}:void 0,this.last_modified=new Date(Math.floor(parseInt(e.lastModified)/1e3)),this.content_length=parseInt(e.contentLength),this.quality=e.quality,this.quality_label=e.qualityLabel||void 0,this.fps=e.fps||void 0,this.url=e.url||void 0,this.cipher=e.cipher||void 0,this.signature_cipher=e.signatureCipher||void 0,this.audio_quality=e.audioQuality||void 0,this.approx_duration_ms=parseInt(e.approxDurationMs),this.audio_sample_rate=parseInt(e.audioSampleRate),this.audio_channels=e.audioChannels,this.loudness_db=e.loudnessDb,this.has_audio=!!e.audioBitrate||!!e.audioQuality,this.has_video=!!e.qualityLabel,this.has_audio){let p=new URLSearchParams(this.cipher||this.signature_cipher),b=new URLSearchParams(p.get("url")||this.url);this.language=((i=(t=b.get("xtags"))===null||t===void 0?void 0:t.split(":").find(I=>I.startsWith("lang=")))===null||i===void 0?void 0:i.split("=").at(1))||null,this.is_dubbed=((a=(r=b.get("xtags"))===null||r===void 0?void 0:r.split(":").find(I=>I.startsWith("acont=")))===null||a===void 0?void 0:a.split("=").at(1))==="dubbed",this.is_descriptive=((h=(l=b.get("xtags"))===null||l===void 0?void 0:l.split(":").find(I=>I.startsWith("acont=")))===null||h===void 0?void 0:h.split("=").at(1))==="descriptive",this.is_original=((_=(v=b.get("xtags"))===null||v===void 0?void 0:v.split(":").find(I=>I.startsWith("acont=")))===null||_===void 0?void 0:_.split("=").at(1))==="original"||!this.is_dubbed,e.audioTrack&&(this.audio_track={audio_is_default:e.audioTrack.audioIsDefault,display_name:e.audioTrack.displayName,id:e.audioTrack.id})}}decipher(e){if(!e)throw new x("Cannot decipher format, this session appears to have no valid player.");return e.decipher(this.url,this.signature_cipher,this.cipher)}};s(Lh,"Format");var Dh=Lh;var jh=class{constructor(e){this.id=e.videoId,this.channel_id=e.channelId,this.title=e.title,this.duration=parseInt(e.lengthSeconds),this.keywords=e.keywords,this.is_owner_viewing=!!e.isOwnerViewing,this.short_description=e.shortDescription,this.thumbnail=S.fromResponse(e.thumbnail),this.allow_ratings=!!e.allowRatings,this.view_count=parseInt(e.viewCount),this.author=e.author,this.is_private=!!e.isPrivate,this.is_live=!!e.isLive,this.is_live_content=!!e.isLiveContent,this.is_upcoming=!!e.isUpcoming,this.is_crawlable=!!e.isCrawlable}};s(jh,"VideoDetails");var Yh=jh;var Dp={};Oi(Dp,{AccountChannel:()=>Uh,AccountItemSection:()=>Gh,AccountItemSectionHeader:()=>Wh,AccountSectionList:()=>Jh,AddBannerToLiveChatCommand:()=>Ax,AddChatItemAction:()=>Zm,AddLiveChatTickerItemAction:()=>Vx,Alert:()=>Bh,AnalyticsMainAppKeyMetrics:()=>$w,AnalyticsRoot:()=>Xw,AnalyticsShortsCarouselCard:()=>Qw,AnalyticsVideo:()=>Kh,AnalyticsVodCarouselCard:()=>Zw,AnchoredSection:()=>nv,AppendContinuationItemsAction:()=>Hh,AudioOnlyPlayability:()=>bh,AuthorCommentBadge:()=>um,AutomixPreviewVideo:()=>mn,BackstageImage:()=>qh,BackstagePost:()=>_n,BackstagePostThread:()=>ig,BrowseFeedActions:()=>Qh,BrowserMediaSession:()=>ng,Button:()=>M,C4TabbedHeader:()=>qo,CallToActionButton:()=>og,Card:()=>rg,CardCollection:()=>Eh,CarouselHeader:()=>tm,CarouselItem:()=>sg,Channel:()=>im,ChannelAboutFullMetadata:()=>nm,ChannelAgeGate:()=>ag,ChannelFeaturedContent:()=>ug,ChannelHeaderLinks:()=>Zh,ChannelMetadata:()=>om,ChannelMobileHeader:()=>lg,ChannelOptions:()=>rm,ChannelSubMenu:()=>ya,ChannelThumbnailWithLink:()=>cg,ChannelVideoPlayer:()=>dg,Chapter:()=>sm,ChildVideo:()=>pg,ChipCloud:()=>Wi,ChipCloudChip:()=>je,CollaboratorInfoCardContent:()=>fg,CollageHeroImage:()=>hg,Comment:()=>Zo,CommentActionButtons:()=>Kn,CommentDialog:()=>ox,CommentReplies:()=>ym,CommentReplyDialog:()=>lm,CommentSimplebox:()=>wm,CommentThread:()=>gm,CommentsEntryPointHeader:()=>bm,CommentsHeader:()=>er,CompactChannel:()=>sx,CompactLink:()=>tr,CompactMix:()=>ax,CompactPlaylist:()=>ux,CompactStation:()=>lx,CompactVideo:()=>xm,ConfirmDialog:()=>cx,ContinuationItem:()=>rt,ConversationBar:()=>dx,CopyLink:()=>Tm,CreatePlaylistDialog:()=>gh,CreatorHeart:()=>Xh,CtaGoToCreatorStudio:()=>eg,DataModelSection:()=>zh,DecoratedPlayerBar:()=>Em,DefaultPromoPanel:()=>px,DidYouMean:()=>km,DimChatItemAction:()=>Rx,DownloadButton:()=>fx,Dropdown:()=>zo,DropdownItem:()=>wh,Element:()=>ir,EmergencyOnebox:()=>hx,EmojiPicker:()=>vm,EmojiPickerCategory:()=>mx,EmojiPickerCategoryButton:()=>_x,EmojiPickerUpsellCategory:()=>vx,EndScreenPlaylist:()=>Nm,EndScreenVideo:()=>Mm,Endscreen:()=>kh,EndscreenElement:()=>yx,ExpandableMetadata:()=>Rm,ExpandableTab:()=>rr,ExpandedShelfContents:()=>bx,FeedFilterChipBar:()=>Hi,FeedTabbedHeader:()=>Om,GameCard:()=>Vm,GameDetails:()=>wx,Grid:()=>eo,GridChannel:()=>Bm,GridHeader:()=>gx,GridMix:()=>xx,GridMovie:()=>Tx,GridPlaylist:()=>Lm,GridShow:()=>to,GridVideo:()=>jm,GuideCollapsibleEntry:()=>Ix,GuideCollapsibleSectionEntry:()=>Sx,GuideDownloadsEntry:()=>Cx,GuideEntry:()=>Ym,GuideSection:()=>sr,GuideSubscriptionsSection:()=>Um,HashtagHeader:()=>Wm,HeatMarker:()=>Im,Heatmap:()=>Sm,HeroPlaylistThumbnail:()=>Ex,HighlightsCarousel:()=>Wu,HistorySuggestion:()=>kx,HorizontalCardList:()=>or,HorizontalList:()=>Px,HorizontalMovieList:()=>Nx,IconLink:()=>Jm,InfoPanelContainer:()=>io,InfoPanelContent:()=>Ki,InteractiveTabbedHeader:()=>Hm,ItemSection:()=>Re,ItemSectionHeader:()=>zm,ItemSectionTab:()=>Km,ItemSectionTabbedHeader:()=>qm,KidsCategoriesHeader:()=>ov,KidsCategoryTab:()=>_r,KidsHomeScreen:()=>rv,LikeButton:()=>Mx,LiveChat:()=>$m,LiveChatActionPanel:()=>i_,LiveChatAuthorBadge:()=>rT,LiveChatAutoModMessage:()=>Fx,LiveChatBanner:()=>Qm,LiveChatBannerHeader:()=>Xm,LiveChatBannerPoll:()=>Ox,LiveChatDialog:()=>sT,LiveChatHeader:()=>Fh,LiveChatItemList:()=>Oh,LiveChatMembershipItem:()=>Bx,LiveChatMessageInput:()=>aT,LiveChatPaidMessage:()=>Lx,LiveChatPaidSticker:()=>Dx,LiveChatParticipant:()=>Vh,LiveChatParticipantsList:()=>Rh,LiveChatPlaceholderItem:()=>jx,LiveChatProductItem:()=>Yx,LiveChatRestrictedParticipation:()=>Ux,LiveChatTextMessage:()=>Wx,LiveChatTickerPaidMessageItem:()=>t_,LiveChatTickerPaidStickerItem:()=>Gx,LiveChatTickerSponsorItem:()=>Jx,LiveChatViewerEngagementMessage:()=>Hx,MacroMarkersListItem:()=>Am,MarkChatItemAsDeletedAction:()=>Kx,MarkChatItemsByAuthorAsDeletedAction:()=>qx,Menu:()=>ee,MenuNavigationItem:()=>uT,MenuServiceItem:()=>ar,MenuServiceItemDownload:()=>lT,MerchandiseItem:()=>pT,MerchandiseShelf:()=>d_,Message:()=>pt,MetadataBadge:()=>gt,MetadataRow:()=>fT,MetadataRowContainer:()=>p_,MetadataRowHeader:()=>hT,MetadataScreen:()=>mT,MicroformatData:()=>vi,Mix:()=>_T,Movie:()=>vT,MovingThumbnail:()=>yT,MultiMarkersPlayerBar:()=>Cm,MultiPageMenu:()=>cT,MultiPageMenuNotificationSection:()=>dT,MusicCardShelf:()=>$i,MusicCardShelfHeaderBasic:()=>qi,MusicCarouselShelf:()=>Ge,MusicCarouselShelfBasicHeader:()=>v_,MusicDescriptionShelf:()=>oo,MusicDetailHeader:()=>ro,MusicDownloadStateBadge:()=>ET,MusicEditablePlaylistDetailHeader:()=>y_,MusicElementHeader:()=>Tc,MusicHeader:()=>gn,MusicImmersiveHeader:()=>b_,MusicInlineBadge:()=>f_,MusicItemThumbnailOverlay:()=>yn,MusicLargeCardItemCarousel:()=>kT,MusicMenuItemDivider:()=>u_,MusicMultiSelectMenu:()=>l_,MusicMultiSelectMenuItem:()=>Bt,MusicNavigationButton:()=>lr,MusicPlayButton:()=>h_,MusicPlaylistShelf:()=>so,MusicQueue:()=>cr,MusicResponsiveListItem:()=>wn,MusicResponsiveListItemFixedColumn:()=>__,MusicResponsiveListItemFlexColumn:()=>m_,MusicShelf:()=>Fe,MusicSideAlignedItem:()=>g_,MusicSortFilterButton:()=>Bc,MusicThumbnail:()=>bn,MusicTwoRowItem:()=>ur,MusicVisualHeader:()=>x_,NavigationEndpoint:()=>T,Notification:()=>T_,OpenPopupAction:()=>qw,PageIntroduction:()=>I_,PdgCommentChip:()=>dm,PlayerAnnotationsExpanded:()=>Ph,PlayerCaptionsTracklist:()=>Nh,PlayerErrorMessage:()=>PT,PlayerLegacyDesktopYpcOffer:()=>NT,PlayerLegacyDesktopYpcTrailer:()=>Jc,PlayerLiveStoryboardSpec:()=>Mh,PlayerMicroformat:()=>wi,PlayerOverlay:()=>xn,PlayerOverlayAutoplay:()=>C_,PlayerStoryboardSpec:()=>Ah,Playlist:()=>_i,PlaylistCustomThumbnail:()=>k_,PlaylistHeader:()=>P_,PlaylistInfoCardContent:()=>MT,PlaylistMetadata:()=>N_,PlaylistPanel:()=>bi,PlaylistPanelVideo:()=>Xi,PlaylistPanelVideoWrapper:()=>w_,PlaylistSidebar:()=>AT,PlaylistSidebarPrimaryInfo:()=>M_,PlaylistSidebarSecondaryInfo:()=>A_,PlaylistVideo:()=>V_,PlaylistVideoList:()=>VT,PlaylistVideoThumbnail:()=>R_,Poll:()=>RT,PollHeader:()=>zx,Post:()=>F_,PostMultiImage:()=>FT,ProfileColumn:()=>OT,ProfileColumnStats:()=>O_,ProfileColumnStatsEntry:()=>BT,ProfileColumnUserInfo:()=>B_,RecognitionShelf:()=>LT,ReelItem:()=>L_,ReelShelf:()=>D_,RelatedChipCloud:()=>j_,RemoveBannerForLiveChatCommand:()=>$x,RemoveChatItemAction:()=>Xx,RemoveChatItemByAuthorAction:()=>Qx,ReplaceChatItemAction:()=>Zx,ReplayChatItemAction:()=>eT,RichGrid:()=>Tn,RichItem:()=>DT,RichListHeader:()=>jT,RichMetadata:()=>gd,RichMetadataRow:()=>Td,RichSection:()=>YT,RichShelf:()=>Y_,SearchBox:()=>UT,SearchFilter:()=>U_,SearchFilterGroup:()=>W_,SearchRefinementCard:()=>Qn,SearchSubMenu:()=>G_,SearchSuggestion:()=>Gm,SearchSuggestionsSection:()=>J_,SecondarySearchContainer:()=>WT,SectionList:()=>pe,SegmentedLikeDislikeButton:()=>ao,SettingBoolean:()=>GT,SettingsCheckbox:()=>H_,SettingsOptions:()=>pr,SettingsSidebar:()=>z_,SettingsSwitch:()=>dr,SharedPost:()=>K_,Shelf:()=>fr,ShowCustomThumbnail:()=>zi,ShowLiveChatActionPanelAction:()=>tT,ShowLiveChatDialogAction:()=>iT,ShowLiveChatTooltipCommand:()=>nT,ShowingResultsFor:()=>Qi,SimpleCardContent:()=>JT,SimpleCardTeaser:()=>HT,SimpleMenuHeader:()=>c_,SimpleTextSection:()=>zT,SingleActionEmergencySupport:()=>KT,SingleColumnBrowseResults:()=>gi,SingleColumnMusicWatchNextResults:()=>qT,SingleHeroImage:()=>$T,SlimOwner:()=>XT,SlimVideoMetadata:()=>q_,SortFilterSubMenu:()=>Ui,SponsorCommentBadge:()=>cm,StatRow:()=>tg,SubFeedOption:()=>QT,SubFeedSelector:()=>ZT,SubscribeButton:()=>ft,SubscriptionNotificationToggleButton:()=>em,Tab:()=>Ee,Tabbed:()=>e1,TabbedSearchResults:()=>$_,TextHeader:()=>t1,ThumbnailLandscapePortrait:()=>i1,ThumbnailOverlayBottomPanel:()=>Dm,ThumbnailOverlayEndorsement:()=>n1,ThumbnailOverlayHoverText:()=>o1,ThumbnailOverlayInlineUnplayable:()=>r1,ThumbnailOverlayLoadingPreview:()=>s1,ThumbnailOverlayNowPlaying:()=>a1,ThumbnailOverlayPinking:()=>u1,ThumbnailOverlayPlaybackStatus:()=>l1,ThumbnailOverlayResumePlayback:()=>c1,ThumbnailOverlaySidePanel:()=>d1,ThumbnailOverlayTimeStatus:()=>Zn,ThumbnailOverlayToggleButton:()=>p1,TimedMarkerDecoration:()=>f1,TitleAndButtonListHeader:()=>h1,ToggleButton:()=>ot,ToggleMenuServiceItem:()=>m1,Tooltip:()=>_1,TopicChannelDetails:()=>v1,TwoColumnBrowseResults:()=>In,TwoColumnSearchResults:()=>X_,TwoColumnWatchNextResults:()=>hr,UniversalWatchCard:()=>Z_,UpdateDateTextAction:()=>n_,UpdateDescriptionAction:()=>o_,UpdateLiveChatPollAction:()=>oT,UpdateTitleAction:()=>r_,UpdateToggleButtonTextAction:()=>s_,UpdateViewershipAction:()=>a_,UpsellDialog:()=>b1,VerticalList:()=>w1,VerticalWatchCardList:()=>g1,Video:()=>nr,VideoCard:()=>Fm,VideoInfoCardContent:()=>x1,VideoOwner:()=>mr,VideoPrimaryInfo:()=>ev,VideoSecondaryInfo:()=>Pp,WatchCardCompactVideo:()=>tv,WatchCardHeroVideo:()=>I1,WatchCardRichHeader:()=>S1,WatchCardSectionSequence:()=>C1,WatchNextEndScreen:()=>E_,WatchNextTabbedResults:()=>iv,YpcTrailer:()=>S_});var Ms=class extends c{constructor(e){super(),this.title=new d(e.title),this.endpoint=new T(e.navigationEndpoint)}};s(Ms,"AccountChannel");Ms.type="AccountChannel";var Uh=Ms;var As=class extends c{constructor(e){super(),this.title=new d(e.title)}};s(As,"AccountItemSectionHeader");As.type="AccountItemSectionHeader";var Wh=As;var Vs=class{constructor(e){this.account_name=new d(e.accountName),this.account_photo=S.fromResponse(e.accountPhoto),this.is_selected=e.isSelected,this.is_disabled=e.isDisabled,this.has_channel=e.hasChannel,this.endpoint=new T(e.serviceEndpoint),this.account_byline=new d(e.accountByline)}};s(Vs,"AccountItem");Vs.type="AccountItem";var Rs=class extends c{constructor(e){super(),this.contents=e.contents.map(t=>new Vs(t.accountItem)),this.header=f.parseItem(e.header,Wh)}};s(Rs,"AccountItemSection");Rs.type="AccountItemSection";var Gh=Rs;var Fs=class extends c{constructor(e){super(),this.contents=f.parseItem(e.contents[0],Gh),this.footers=f.parseItem(e.footers[0],Uh)}};s(Fs,"AccountSectionList");Fs.type="AccountSectionList";var Jh=Fs;var Os=class extends c{constructor(e){super(),this.items=f.parse(e.continuationItems),this.target=e.target}};s(Os,"AppendContinuationItemsAction");Os.type="AppendContinuationItemsAction";var Hh=Os;var Bs=class extends c{constructor(e){super(),this.popup=f.parseItem(e.popup),this.popup_type=e.popupType}};s(Bs,"OpenPopupAction");Bs.type="OpenPopupAction";var qw=Bs;var Ls=class extends c{constructor(e){super(),this.title=e.title,this.subtitle=e.subtitle,this.metric_value=e.metricValue,this.comparison_indicator=e.comparisonIndicator;let t=e.seriesConfiguration.lineSeries;this.series_configuration={line_series:{lines_data:{x:t.linesData[0].x,y:t.linesData[0].y,style:{line_width:t.linesData[0].style.lineWidth,line_color:t.linesData[0].style.lineColor}},domain_axis:{tick_values:t.domainAxis.tickValues,custom_formatter:t.domainAxis.customFormatter},measure_axis:{tick_values:t.measureAxis.tickValues,custom_formatter:t.measureAxis.customFormatter}}}}};s(Ls,"DataModelSection");Ls.type="DataModelSection";var zh=Ls;var Ds=class extends c{constructor(e){super(),this.period=e.cardData.periodLabel;let t=e.cardData.sections[0].analyticsKeyMetricsData;this.sections=t.dataModel.sections.map(i=>new zh(i))}};s(Ds,"AnalyticsMainAppKeyMetrics");Ds.type="AnalyticsMainAppKeyMetrics";var $w=Ds;var js=class extends c{constructor(e){super();let t=e.analyticsTableCarouselData.data.tableCards;this.title=e.analyticsTableCarouselData.carouselTitle,this.selected_card_index_key=e.analyticsTableCarouselData.selectedCardIndexKey,this.table_cards=t.map(i=>({title:i.cardData.title,rows:i.cardData.rows.map(r=>({label:r.label,display_value:r.displayValue,display_value_a11y:r.displayValueA11y,bar_ratio:r.barRatio,bar_color:r.barColor,bar_opacity:r.barOpacity}))})),this.use_main_app_specs=e.analyticsTableCarouselData.useMainAppSpecs}};s(js,"AnalyticsRoot");js.type="AnalyticsRoot";var Xw=js;var Ys=class extends c{constructor(e){super(),this.title=e.title,this.shorts=e.shortsCarouselData.shorts.map(t=>({description:t.shortsDescription,thumbnail_url:t.thumbnailUrl,endpoint:new T(t.videoEndpoint)}))}};s(Ys,"AnalyticsShortsCarouselCard");Ys.type="AnalyticsShortsCarouselCard";var Qw=Ys;var Us=class extends c{constructor(e){super(),this.title=e.videoTitle,this.metadata={views:e.videoDescription.split("\xB7")[0].trim(),published:e.videoDescription.split("\xB7")[1].trim(),thumbnails:S.fromResponse(e.thumbnailDetails),duration:e.formattedLength,is_short:e.isShort}}};s(Us,"AnalyticsVideo");Us.type="AnalyticsVideo";var Kh=Us;var Ws=class extends c{constructor(e){var t;super(),this.title=e.title,e.noDataMessage&&(this.no_data_message=e.noDataMessage),this.videos=((t=e.videoCarouselData)===null||t===void 0?void 0:t.videos.map(i=>new Kh(i)))||null}};s(Ws,"AnalyticsVodCarouselCard");Ws.type="AnalyticsVodCarouselCard";var Zw=Ws;var Gs=class extends c{constructor(e){super(),this.title=e.buttonLabel,this.use_new_specs=e.useNewSpecs}};s(Gs,"CtaGoToCreatorStudio");Gs.type="CtaGoToCreatorStudio";var eg=Gs;var Js=class extends c{constructor(e){super(),this.title=new d(e.title),this.contents=new d(e.contents)}};s(Js,"StatRow");Js.type="StatRow";var tg=Js;var Hs=class extends c{constructor(e){var t,i;super(),!((i=(t=e==null?void 0:e.content)===null||t===void 0?void 0:t.automixPlaylistVideoRenderer)===null||i===void 0)&&i.navigationEndpoint&&(this.playlist_video={endpoint:new T(e.content.automixPlaylistVideoRenderer.navigationEndpoint)})}};s(Hs,"AutomixPreviewVideo");Hs.type="AutomixPreviewVideo";var mn=Hs;var zs=class extends c{constructor(e){super(),this.image=S.fromResponse(e.image),this.endpoint=new T(e.command)}};s(zs,"BackstageImage");zs.type="BackstageImage";var qh=zs;var HS=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},mi=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},Lt,$h=class{constructor(e,t,i,r){var a,l,h,v,_,p,b,I,C,k,F,V,D,Y,B,w,ye,Ke,Ie,Qe,ne,J,ae,ue,at,ut,At,Ze,qe,Gt,nt,lt,bt,_t,Vt,Jt,he;Lt.set(this,void 0),HS(this,Lt,new d(e),"f"),this.id=r||((_=(v=(h=(l=(a=mi(this,Lt,"f"))===null||a===void 0?void 0:a.runs)===null||l===void 0?void 0:l[0])===null||h===void 0?void 0:h.endpoint)===null||v===void 0?void 0:v.payload)===null||_===void 0?void 0:_.browseId)||((I=(b=(p=mi(this,Lt,"f"))===null||p===void 0?void 0:p.endpoint)===null||b===void 0?void 0:b.payload)===null||I===void 0?void 0:I.browseId)||"N/A",this.name=((C=mi(this,Lt,"f"))===null||C===void 0?void 0:C.text)||"N/A",this.thumbnails=i?S.fromResponse(i):[],this.endpoint=((V=(F=(k=mi(this,Lt,"f"))===null||k===void 0?void 0:k.runs)===null||F===void 0?void 0:F[0])===null||V===void 0?void 0:V.endpoint)||((D=mi(this,Lt,"f"))===null||D===void 0?void 0:D.endpoint)||null,this.badges=Array.isArray(t)?f.parseArray(t):Le([]),this.is_moderator=((Y=this.badges)===null||Y===void 0?void 0:Y.some(Ae=>Ae.icon_type=="MODERATOR"))||null,this.is_verified=((B=this.badges)===null||B===void 0?void 0:B.some(Ae=>Ae.style=="BADGE_STYLE_TYPE_VERIFIED"))||null,this.is_verified_artist=((w=this.badges)===null||w===void 0?void 0:w.some(Ae=>Ae.style=="BADGE_STYLE_TYPE_VERIFIED_ARTIST"))||null,this.url=((ne=(Qe=(Ie=(Ke=(ye=mi(this,Lt,"f"))===null||ye===void 0?void 0:ye.runs)===null||Ke===void 0?void 0:Ke[0])===null||Ie===void 0?void 0:Ie.endpoint)===null||Qe===void 0?void 0:Qe.metadata)===null||ne===void 0?void 0:ne.api_url)==="/browse"&&`${G.URLS.YT_BASE}${((ut=(at=(ue=(ae=(J=mi(this,Lt,"f"))===null||J===void 0?void 0:J.runs)===null||ae===void 0?void 0:ae[0])===null||ue===void 0?void 0:ue.endpoint)===null||at===void 0?void 0:at.payload)===null||ut===void 0?void 0:ut.canonicalBaseUrl)||`/u/${(nt=(Gt=(qe=(Ze=(At=mi(this,Lt,"f"))===null||At===void 0?void 0:At.runs)===null||Ze===void 0?void 0:Ze[0])===null||qe===void 0?void 0:qe.endpoint)===null||Gt===void 0?void 0:Gt.payload)===null||nt===void 0?void 0:nt.browseId}`}`||`${G.URLS.YT_BASE}${((_t=(bt=(lt=mi(this,Lt,"f"))===null||lt===void 0?void 0:lt.endpoint)===null||bt===void 0?void 0:bt.payload)===null||_t===void 0?void 0:_t.canonicalBaseUrl)||`/u/${(he=(Jt=(Vt=mi(this,Lt,"f"))===null||Vt===void 0?void 0:Vt.endpoint)===null||Jt===void 0?void 0:Jt.payload)===null||he===void 0?void 0:he.browseId}`}`||null}get best_thumbnail(){return this.thumbnails[0]}};s($h,"Author");Lt=new WeakMap;var W=$h;var Ks=class extends c{constructor(e){var t,i,r,a,l,h,v,_,p,b;super(),this.text=new d(e.defaultText),this.toggled_text=new d(e.toggledText),this.tooltip=e.defaultTooltip,this.toggled_tooltip=e.toggledTooltip,this.is_toggled=e.isToggled,this.is_disabled=e.isDisabled,this.icon_type=e.defaultIcon.iconType;let I=((r=(i=(t=e==null?void 0:e.defaultText)===null||t===void 0?void 0:t.accessibility)===null||i===void 0?void 0:i.accessibilityData)===null||r===void 0?void 0:r.label)||((l=(a=e==null?void 0:e.accessibilityData)===null||a===void 0?void 0:a.accessibilityData)===null||l===void 0?void 0:l.label)||((h=e==null?void 0:e.accessibility)===null||h===void 0?void 0:h.label);this.icon_type=="LIKE"&&(this.like_count=parseInt(I.replace(/\D/g,"")),this.short_like_count=new d(e.defaultText).toString()),this.endpoint=!((_=(v=e.defaultServiceEndpoint)===null||v===void 0?void 0:v.commandExecutorCommand)===null||_===void 0)&&_.commands?new T(e.defaultServiceEndpoint.commandExecutorCommand.commands.pop()):new T(e.defaultServiceEndpoint),this.toggled_endpoint=new T(e.toggledServiceEndpoint),this.button_id=((b=(p=e.toggleButtonSupportedData)===null||p===void 0?void 0:p.toggleButtonIdData)===null||b===void 0?void 0:b.id)||null,this.target_id=e.targetId||null}};s(Ks,"ToggleButton");Ks.type="ToggleButton";var ot=Ks;var qs=class extends c{constructor(e){var t,i,r;super(),this.creator_thumbnail=S.fromResponse(e.creatorThumbnail),this.heart_icon_type=(t=e.heartIcon)===null||t===void 0?void 0:t.iconType,this.heart_color={basic_color_palette_data:{foreground_title_color:(r=(i=e.heartColor)===null||i===void 0?void 0:i.basicColorPaletteData)===null||r===void 0?void 0:r.foregroundTitleColor}},this.hearted_tooltip=e.heartedTooltip,this.is_hearted=e.isHearted,this.is_enabled=e.isEnabled,this.kennedy_heart_color_string=e.kennedyHeartColorString}};s(qs,"CreatorHeart");qs.type="CreatorHeart";var Xh=qs;var $s=class extends c{constructor(e){super(),this.like_button=f.parseItem(e.likeButton,ot),this.dislike_button=f.parseItem(e.dislikeButton,ot),this.reply_button=f.parseItem(e.replyButton,M),this.creator_heart=f.parseItem(e.creatorHeart,Xh)}};s($s,"CommentActionButtons");$s.type="CommentActionButtons";var Kn=$s;var Xs=class extends c{constructor(e){super(),this.id=e.postId,this.author=new W(Object.assign(Object.assign({},e.authorText),{navigationEndpoint:e.authorEndpoint}),null,e.authorThumbnail),this.content=new d(e.contentText),this.published=new d(e.publishedTimeText),e.pollStatus&&(this.poll_status=e.pollStatus),e.voteStatus&&(this.vote_status=e.voteStatus),e.voteCount&&(this.vote_count=new d(e.voteCount)),e.actionMenu&&(this.menu=f.parseItem(e.actionMenu,ee)),e.actionButtons&&(this.action_buttons=f.parseItem(e.actionButtons,Kn)),e.voteButton&&(this.vote_button=f.parseItem(e.voteButton,Kn)),e.navigationEndpoint&&(this.endpoint=new T(e.navigationEndpoint)),e.backstageAttachment&&(this.attachment=f.parseItem(e.backstageAttachment)),this.surface=e.surface}};s(Xs,"BackstagePost");Xs.type="BackstagePost";var _n=Xs;var Qs=class extends c{constructor(e){super(),this.post=f.parseItem(e.post)}};s(Qs,"BackstagePostThread");Qs.type="BackstagePostThread";var ig=Qs;var Zs=class extends c{constructor(e){super(),this.contents=f.parseArray(e.contents)}};s(Zs,"BrowseFeedActions");Zs.type="BrowseFeedActions";var Qh=Zs;var ea=class extends c{constructor(e){super(),this.album=new d(e.album),this.thumbnails=S.fromResponse(e.thumbnailDetails)}};s(ea,"BrowserMediaSession");ea.type="BrowserMediaSession";var ng=ea;var ta=class{constructor(e){this.endpoint=new T(e.navigationEndpoint),this.icon=S.fromResponse(e.icon),this.title=new d(e.title)}};s(ta,"HeaderLink");var ia=class extends c{constructor(e){var t,i;super(),this.primary=((t=e.primaryLinks)===null||t===void 0?void 0:t.map(r=>new ta(r)))||[],this.secondary=((i=e.secondaryLinks)===null||i===void 0?void 0:i.map(r=>new ta(r)))||[]}};s(ia,"ChannelHeaderLinks");ia.type="ChannelHeaderLinks";var Zh=ia;var na=class extends c{constructor(e){super(),this.states=e.states.map(t=>({id:t.stateId,next_id:t.nextStateId,state:f.parse(t.state)})),this.current_state_id=e.currentStateId,this.target_id=e.targetId}};s(na,"SubscriptionNotificationToggleButton");na.type="SubscriptionNotificationToggleButton";var em=na;var oa=class extends c{constructor(e){var t,i;super(),this.title=new d(e.buttonText),this.subscribed=e.subscribed,this.enabled=e.enabled,this.item_type=e.type,this.channel_id=e.channelId,this.show_preferences=e.showPreferences,this.subscribed_text=new d(e.subscribedButtonText),this.unsubscribed_text=new d(e.unsubscribedButtonText),this.notification_preference_button=f.parseItem(e.notificationPreferenceButton,em),this.endpoint=new T(((t=e.serviceEndpoints)===null||t===void 0?void 0:t[0])||((i=e.onSubscribeEndpoints)===null||i===void 0?void 0:i[0]))}};s(oa,"SubscribeButton");oa.type="SubscribeButton";var ft=oa;var ra=class extends c{constructor(e){super(),this.author=new W({simpleText:e.title,navigationEndpoint:e.navigationEndpoint},e.badges,e.avatar),e.banner&&(this.banner=S.fromResponse(e.banner)),e.tv_banner&&(this.tv_banner=S.fromResponse(e.tvBanner)),e.mobile_banner&&(this.mobile_banner=S.fromResponse(e.mobileBanner)),e.subscriberCountText&&(this.subscribers=new d(e.subscriberCountText)),e.videosCountText&&(this.videos_count=new d(e.videosCountText)),e.sponsorButton&&(this.sponsor_button=f.parseItem(e.sponsorButton,M)),e.subscribeButton&&(this.subscribe_button=f.parseItem(e.subscribeButton,[ft,M])),e.headerLinks&&(this.header_links=f.parseItem(e.headerLinks,Zh)),e.channelHandleText&&(this.channel_handle=new d(e.channelHandleText)),e.channelId&&(this.channel_id=e.channelId)}};s(ra,"C4TabbedHeader");ra.type="C4TabbedHeader";var qo=ra;var sa=class extends c{constructor(e){super(),this.label=new d(e.label),this.icon_type=e.icon.iconType,this.style=e.style}};s(sa,"CallToActionButton");sa.type="CallToActionButton";var og=sa;var aa=class extends c{constructor(e){super(),this.teaser=f.parseItem(e.teaser),this.content=f.parseItem(e.content),this.card_id=e.cardId||null,this.feature=e.feature||null,this.cue_ranges=e.cueRanges.map(t=>({start_card_active_ms:t.startCardActiveMs,end_card_active_ms:t.endCardActiveMs,teaser_duration_ms:t.teaserDurationMs,icon_after_teaser_ms:t.iconAfterTeaserMs}))}};s(aa,"Card");aa.type="Card";var rg=aa;var ua=class extends c{constructor(e){super(),this.contents=f.parseArray(e.contents)}};s(ua,"CarouselHeader");ua.type="CarouselHeader";var tm=ua;var la=class extends c{constructor(e){super(),this.items=f.parseArray(e.carouselItems),this.background_color=e.backgroundColor,this.layout_style=e.layoutStyle,this.pagination_thumbnails=S.fromResponse(e.paginationThumbnails),this.paginator_alignment=e.paginatorAlignment}};s(la,"CarouselItem");la.type="CarouselItem";var sg=la;var ca=class extends c{constructor(e){super(),this.id=e.channelId,this.author=new W(Object.assign(Object.assign({},e.title),{navigationEndpoint:e.navigationEndpoint}),e.ownerBadges,e.thumbnail),this.subscribers=new d(e.subscriberCountText),this.videos=new d(e.videoCountText),this.long_byline=new d(e.longBylineText),this.short_byline=new d(e.shortBylineText),this.endpoint=new T(e.navigationEndpoint),this.subscribe_button=f.parseItem(e.subscribeButton,[ft,M]),this.description_snippet=new d(e.descriptionSnippet)}};s(ca,"Channel");ca.type="Channel";var im=ca;var da=class extends c{constructor(e){var t,i;super(),this.id=e.channelId,this.name=new d(e.title),this.avatar=S.fromResponse(e.avatar),this.canonical_channel_url=e.canonicalChannelUrl,this.primary_links=(i=(t=e.primaryLinks)===null||t===void 0?void 0:t.map(r=>({endpoint:new T(r.navigationEndpoint),icon:S.fromResponse(r.icon),title:new d(r.title)})))!==null&&i!==void 0?i:[],this.views=new d(e.viewCountText),this.joined=new d(e.joinedDateText),this.description=new d(e.description),this.email_reveal=new T(e.onBusinessEmailRevealClickCommand),this.can_reveal_email=!e.signInForBusinessEmail,this.country=new d(e.country),this.buttons=f.parseArray(e.actionButtons,M)}};s(da,"ChannelAboutFullMetadata");da.type="ChannelAboutFullMetadata";var nm=da;var pa=class extends c{constructor(e){super(),this.channel_title=e.channelTitle,this.avatar=S.fromResponse(e.avatar),this.header=new d(e.header),this.main_text=new d(e.mainText),this.sign_in_button=j.parseItem(e.signInButton,M),this.secondary_text=new d(e.secondaryText)}};s(pa,"ChannelAgeGate");pa.type="ChannelAgeGate";var ag=pa;var fa=class extends c{constructor(e){super(),this.title=new d(e.title),this.items=f.parseArray(e.items)}};s(fa,"ChannelFeaturedContent");fa.type="ChannelFeaturedContent";var ug=fa;var ha=class extends c{constructor(e){super(),this.title=e.title,this.description=e.description,this.url=e.channelUrl,this.rss_urls=e.rssUrl,this.vanity_channel_url=e.vanityChannelUrl,this.external_id=e.externalId,this.is_family_safe=e.isFamilySafe,this.keywords=e.keywords,this.avatar=S.fromResponse(e.avatar),this.available_countries=e.availableCountryCodes,this.android_deep_link=e.androidDeepLink,this.android_appindexing_link=e.androidAppindexingLink,this.ios_appindexing_link=e.iosAppindexingLink}};s(ha,"ChannelMetadata");ha.type="ChannelMetadata";var om=ha;var ma=class extends c{constructor(e){super(),this.title=new d(e.title)}};s(ma,"ChannelMobileHeader");ma.type="ChannelMobileHeader";var lg=ma;var _a=class extends c{constructor(e){super(),this.avatar=S.fromResponse(e.avatar),this.endpoint=new T(e.avatarEndpoint),this.name=e.name,this.links=e.links.map(t=>new d(t))}};s(_a,"ChannelOptions");_a.type="ChannelOptions";var rm=_a;var va=class extends c{constructor(e){super(),this.content_type_sub_menu_items=e.contentTypeSubMenuItems.map(t=>({endpoint:new T(t.navigationEndpoint||t.endpoint),selected:t.selected,title:t.title})),this.sort_setting=f.parseItem(e.sortSetting)}};s(va,"ChannelSubMenu");va.type="ChannelSubMenu";var ya=va;var ba=class extends c{constructor(e){super(),this.thumbnails=S.fromResponse(e.thumbnail),this.endpoint=new T(e.navigationEndpoint),this.label=e.accessibility.accessibilityData.label}};s(ba,"ChannelThumbnailWithLink");ba.type="ChannelThumbnailWithLink";var cg=ba;var wa=class extends c{constructor(e){super(),this.id=e.videoId,this.title=new d(e.title),this.description=new d(e.description),this.views=new d(e.viewCountText),this.published=new d(e.publishedTimeText)}};s(wa,"ChannelVideoPlayer");wa.type="ChannelVideoPlayer";var dg=wa;var ga=class extends c{constructor(e){super(),this.title=new d(e.title),this.time_range_start_millis=e.timeRangeStartMillis,this.thumbnail=S.fromResponse(e.thumbnail)}};s(ga,"Chapter");ga.type="Chapter";var sm=ga;var xa=class extends c{constructor(e){super(),this.id=e.videoId,this.title=new d(e.title),this.duration={text:e.lengthText.simpleText,seconds:dt(e.lengthText.simpleText)},this.endpoint=new T(e.navigationEndpoint)}};s(xa,"ChildVideo");xa.type="ChildVideo";var pg=xa;var Ta=class extends c{constructor(e){super(),this.is_selected=e.isSelected,this.endpoint=e.navigationEndpoint?new T(e.navigationEndpoint):void 0,this.text=new d(e.text).toString()}};s(Ta,"ChipCloudChip");Ta.type="ChipCloudChip";var je=Ta;var Ia=class extends c{constructor(e){super(),this.chips=f.parseArray(e.chips,je),this.next_button=f.parseItem(e.nextButton,M),this.previous_button=f.parseItem(e.previousButton,M),this.horizontal_scrollable=e.horizontalScrollable}};s(Ia,"ChipCloud");Ia.type="ChipCloud";var Wi=Ia;var Sa=class extends c{constructor(e){super(),this.channel_avatar=S.fromResponse(e.channelAvatar),this.custom_text=new d(e.customText),this.channel_name=new d(e.channelName),this.subscriber_count=new d(e.subscriberCountText),this.endpoint=new T(e.endpoint)}};s(Sa,"CollaboratorInfoCardContent");Sa.type="CollaboratorInfoCardContent";var fg=Sa;var Ca=class extends c{constructor(e){super(),this.left=S.fromResponse(e.leftThumbnail),this.top_right=S.fromResponse(e.topRightThumbnail),this.bottom_right=S.fromResponse(e.bottomRightThumbnail),this.endpoint=new T(e.navigationEndpoint)}};s(Ca,"CollageHeroImage");Ca.type="CollageHeroImage";var hg=Ca;var zS=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},KS=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},am,Ea=class extends c{constructor(e){var t;super(),am.set(this,void 0),this.icon_type=((t=e.icon)===null||t===void 0?void 0:t.iconType)||null,this.tooltip=e.iconTooltip,this.tooltip==="Verified"&&(this.style="BADGE_STYLE_TYPE_VERIFIED")&&(e.style="BADGE_STYLE_TYPE_VERIFIED"),zS(this,am,e,"f")}get orig_badge(){return KS(this,am,"f")}};s(Ea,"AuthorCommentBadge");am=new WeakMap;Ea.type="AuthorCommentBadge";var um=Ea;var ka=class extends c{constructor(e){super(),this.reply_button=f.parseItem(e.replyButton,M),this.cancel_button=f.parseItem(e.cancelButton,M),this.author_thumbnail=S.fromResponse(e.authorThumbnail),this.placeholder=new d(e.placeholderText),this.error_message=new d(e.errorMessage)}};s(ka,"CommentReplyDialog");ka.type="CommentReplyDialog";var lm=ka;var Pa=class extends c{constructor(e){super(),this.custom_badge=S.fromResponse(e.customBadge),this.tooltip=e.tooltip}};s(Pa,"SponsorCommentBadge");Pa.type="SponsorCommentBadge";var cm=Pa;var Na=class extends c{constructor(e){var t,i,r;super(),this.text=new d(e.chipText),this.color_pallette={background_color:(t=e.chipColorPalette)===null||t===void 0?void 0:t.backgroundColor,foreground_title_color:(i=e.chipColorPalette)===null||i===void 0?void 0:i.foregroundTitleColor},this.icon_type=(r=e.chipIcon)===null||r===void 0?void 0:r.iconType}};s(Na,"PdgCommentChip");Na.type="PdgCommentChip";var dm=Na;var R;(function(n){n[n.Varint=0]="Varint",n[n.Fixed64=1]="Fixed64",n[n.LengthDelimited=2]="LengthDelimited",n[n.StartGroup=3]="StartGroup",n[n.EndGroup=4]="EndGroup",n[n.Fixed32=5]="Fixed32"})(R=R||(R={}));var z=class extends Uint32Array{constructor(e=0,t=0){super([e,t])}toString(e=!0){let[t,i]=this;if(t===0&&i===0)return"0";if(e&&i>2147483647)return"-"+fm(Cy(this),pm).toString(!1);let r=[],a=new z(t,i);for(;XS(a,qS);){let[l,h]=$S(a);r.push(h),a=l}return r.reverse().join("")}static parse(e){let t=parseInt(e,10),i=t<0;if(Number.isNaN(t))return new z(0);if(e.length<10)return t<0?fm(Cy(new z(-t)),pm):new z(t);let r=new z,a=pm;for(let l of e.split("").reverse())parseInt(l)&&(r=fm(r,mg(new z(parseInt(l)),a))),a=mg(a,new z(10));return i?fm(Cy(r),pm):r}};s(z,"Long");var qS=new z(0),pm=new z(1);function hm(n){let[e,t]=n;return[e&65535,e>>>16,t&65535,t>>>16]}s(hm,"makeChunk");function fm(n,e){let[t,i,r,a]=hm(n),[l,h,v,_]=hm(e),p=0,b=0,I=0,C=0;return C+=t+l,I+=C>>>16,C&=65535,I+=i+h,b+=I>>>16,I&=65535,b+=r+v,p+=b>>>16,b&=65535,p+=a+_,p&=65535,new z(I<<16|C,p<<16|b)}s(fm,"add");function mg(n,e){let[t,i,r,a]=hm(n),[l,h,v,_]=hm(e),p=0,b=0,I=0,C=0;return C+=t*l,I+=C>>>16,C&=65535,I+=t*h+i*l,b+=I>>>16,I&=65535,b+=t*v+r*l+i*h,p+=b>>>16,b&=65535,p+=t*_+i*v+r*h+a*l,p&=65535,new z(I<<16|C,p<<16|b)}s(mg,"mul");function $S(n){let[e,t]=n;return[new z((t%10*(4294967295+1)+e)/10|0,t/10|0),(t%10*(4294967295+1)+e)%10]}s($S,"divByTen");function XS(n,e){let[t,i]=n,[r,a]=e;return i!==a?i-a:t-r}s(XS,"compare");function Cy(n){let[e,t]=n;return new z(~e,~t)}s(Cy,"negate");function $o(n){let e=[],r=typeof n=="number"?new z(n):n;for(;r[0]||r[1];){let[a,l]=r,h=a&127,v=l>>>7,_=a>>>7|(l&127)<<32-7;r=new z(_,v);let p=r[0]||r[1]?h|128:h;e.push(p)}return e.length<1?new Uint8Array(1):Uint8Array.from(e)}s($o,"encode");function Xo(n){let e=new z(0),t=0;for(;;){let i=n.getUint8(t);if(e=QS(e,ZS(new z(i&127),t*7)),++t,!(i>>>7))return[t,e]}}s(Xo,"decode");function QS(n,e){return new z(n[0]|e[0],n[1]|e[1])}s(QS,"or");function ZS(n,e){return e===0?n:e>=32?new z(0,n[0]<<e-32):new z(n[0]<<e,n[1]<<e|n[0]>>>32-e)}s(ZS,"leftshift");function O(n){let e=[];return n.forEach(([t,i])=>{switch(e.push($o(t<<3|i.type)),i.type){case R.Varint:e.push($o(i.value));break;case R.Fixed64:{let r=new Uint8Array(8),a=new DataView(r.buffer);a.setUint32(0,i.value[0],!0),a.setUint32(4,i.value[1],!0),e.push(r);break}case R.LengthDelimited:e.push($o(i.value.byteLength)),e.push(i.value);break;case R.Fixed32:{let r=new Uint8Array(4);new DataView(r.buffer).setUint32(0,i.value,!0),e.push(r);break}}}),Ey(e)}s(O,"serialize");function Ey(n){let e=n.reduce((i,r)=>i+r.byteLength,0),t=new Uint8Array(e);return n.reduce((i,r)=>(t.set(r,i),i+r.byteLength),0),t}s(Ey,"concat");function ky(n){if(n instanceof z){let e=new z(n[0]<<1,n[1]<<1|n[0]>>>31),t=n[1]>>>31?new z(4294967295,4294967295):new z;return new z(e[0]^t[0],e[1]^t[1])}return(n*2^n>>31)>>>0}s(ky,"encode");function Py(n){if(n instanceof z){let e=new z(n[0]>>>1|n[1]<<31,n[1]>>>1),t=n[0]&1?new z(4294967295,4294967295):new z;return new z(e[0]^t[0],e[1]^t[1])}return n>>>1^-(n&1)}s(Py,"decode");var Ny={int32:n=>n[0]|0,int64:n=>n.toString(!0),uint32:n=>n[0]>>>0,uint64:n=>n.toString(!1),sint32:n=>Py(n[0]),sint64:n=>Py(n).toString(!0),bool:n=>n[0]!==0},My={int32:n=>new z(n),int64:n=>z.parse(n),uint32:n=>new z(n),uint64:n=>z.parse(n),sint32:n=>ky(new z(n)),sint64:n=>ky(z.parse(n)),bool:n=>new z(+n)},eC=Object.fromEntries(Object.entries(Ny).map(([n,e])=>[n,t=>{if(t.type===R.Varint)return e(t.value)}])),tC=Object.fromEntries(Object.entries(My).map(([n,e])=>[n,t=>({type:R.Varint,value:e(t)})])),te=Object.assign(Object.assign({},eC),{double:n=>n.type!==R.Fixed64?void 0:new DataView(n.value.buffer).getFloat64(0,!0),float:n=>n.type!==R.Fixed32?void 0:new DataView(new Uint32Array([n.value]).buffer).getFloat32(0,!0),fixed32:n=>{if(n.type===R.Fixed32)return n.value>>>0},fixed64:n=>{if(n.type===R.Fixed64)return n.value.toString(!1)},sfixed32:n=>{if(n.type===R.Fixed32)return n.value|0},sfixed64:n=>{if(n.type===R.Fixed64)return n.value.toString(!0)},string:n=>n.type!==R.LengthDelimited?void 0:new TextDecoder().decode(n.value),bytes:n=>{if(n.type===R.LengthDelimited)return n.value}}),N=Object.assign(Object.assign({},tC),{double:n=>{let e=new z;return new DataView(e.buffer).setFloat64(0,n,!0),{type:R.Fixed64,value:e}},float:n=>{let e=new Uint32Array(1),t=new DataView(e.buffer);return t.setFloat32(0,n,!0),{type:R.Fixed32,value:t.getUint32(0,!0)}},fixed32:n=>({type:R.Fixed32,value:n>>>0}),fixed64:n=>({type:R.Fixed64,value:z.parse(n)}),sfixed32:n=>({type:R.Fixed32,value:n|0}),sfixed64:n=>({type:R.Fixed64,value:z.parse(n)}),string:n=>{let e=new TextEncoder;return{type:R.LengthDelimited,value:e.encode(n)}},bytes:n=>({type:R.LengthDelimited,value:n})}),iC=Object.fromEntries(Object.keys(Ny).map(n=>[n,function*(e){for(let t of e){let i=te[n](t);if(i!=null)yield i;else for(let r of sC(t))yield Ny[n](r)}}])),QA=Object.assign(Object.assign({},iC),{*double(n){for(let e of n){let t=te.double(e);t!=null?yield t:yield*oC(e)}},*float(n){for(let e of n){let t=te.float(e);t!=null?yield t:yield*rC(e)}},*fixed32(n){for(let e of n){let t=te.fixed32(e);if(t!=null)yield t;else for(let i of _g(e))yield i>>>0}},*fixed64(n){for(let e of n){let t=te.fixed64(e);if(t!=null)yield t;else for(let i of vg(e))yield i.toString(!1)}},*sfixed32(n){for(let e of n){let t=te.sfixed32(e);if(t!=null)yield t;else for(let i of _g(e))yield i|0}},*sfixed64(n){for(let e of n){let t=te.sfixed64(e);if(t!=null)yield t;else for(let i of vg(e))yield i.toString(!0)}}}),nC=Object.fromEntries(Object.keys(My).map(n=>[n,function(e){return{type:R.LengthDelimited,value:Ey(e.map(t=>{let i=My[n](t);return $o(i)}))}}]));function Qo(n,e){return s(function(i){let r=new Uint8Array(i.length*n),a=new DataView(r.buffer);for(let l=0;l<i.length;++l)e(a,l*n,i[l]);return{type:R.LengthDelimited,value:r}},"pack")}s(Qo,"getFixedPackFn");var ZA=Object.assign(Object.assign({},nC),{double:Qo(8,(n,e,t)=>{n.setFloat64(e,t,!0)}),float:Qo(4,(n,e,t)=>{n.setFloat32(e,t,!0)}),fixed32:Qo(4,(n,e,t)=>{n.setUint32(e,t,!0)}),fixed64:Qo(8,(n,e,t)=>{let i=z.parse(t);n.setUint32(e,i[0],!0),n.setUint32(e+4,i[1],!0)}),sfixed32:Qo(4,(n,e,t)=>{n.setInt32(e,t,!0)}),sfixed64:Qo(8,(n,e,t)=>{let i=z.parse(t);n.setUint32(e,i[0],!0),n.setUint32(e+4,i[1],!0)})});function*oC(n){if(n.type!==R.LengthDelimited)return;let{value:e}=n,t=0,i=new DataView(e.buffer,e.byteOffset);for(;t<e.length;){let r=i.getFloat64(t,!0);t+=4,yield r}}s(oC,"unpackDouble");function*rC(n){if(n.type!==R.LengthDelimited)return;let{value:e}=n,t=0,i=new DataView(e.buffer,e.byteOffset);for(;t<e.length;){let r=i.getFloat32(t,!0);t+=4,yield r}}s(rC,"unpackFloat");function*sC(n){if(n.type!==R.LengthDelimited)return;let{value:e}=n,t=0,i=e.byteOffset;for(;t<e.length;){let r=Xo(new DataView(e.buffer,i+t));t+=r[0],yield r[1]}}s(sC,"unpackVarint");function*_g(n){if(n.type!==R.LengthDelimited)return;let{value:e}=n,t=0,i=new DataView(e.buffer,e.byteOffset);for(;t<e.length;){let r=i.getUint32(t,!0);t+=4,yield r}}s(_g,"unpackFixed32");function*vg(n){if(n.type!==R.LengthDelimited)return;let{value:e}=n,t=0,i=new DataView(e.buffer,e.byteOffset);for(;t<e.length;){let r=i.getUint32(t,!0);t+=4;let a=i.getUint32(t,!0);t+=4,yield new z(r,a)}}s(vg,"unpackFixed64");function ie(n){let e=0,t=n.byteOffset,i=[],r=new DataView(n.buffer,t);for(;e<n.length;){let a=Xo(new DataView(n.buffer,t+e)),l=a[1][0];e+=a[0];let h=l&7,v=l>>>3;switch(h){default:throw new Error(`Unknown wire type ${h}`);case R.Varint:{let[b,I]=Xo(new DataView(n.buffer,t+e));i.push([v,{type:h,value:I}]),e+=b;break}case R.Fixed64:let _=r.getUint32(e,!0),p=r.getUint32(e+=4,!0);e+=4,i.push([v,{type:h,value:new z(_,p)}]);break;case R.LengthDelimited:{let[b,I]=Xo(new DataView(n.buffer,t+e));i.push([v,{type:h,value:n.subarray(e+=b,e+=I[0])}]);break}case R.StartGroup:case R.EndGroup:i.push([v,{type:h}]);break;case R.Fixed32:i.push([v,{type:h,value:r.getUint32(e,!0)}]),e+=4;break}}return i}s(ie,"deserialize");function aC(){return{id:"",timestamp:0}}s(aC,"getDefaultValue");function yg(n){let e=[];if(n.id!==void 0){let t=n.id;e.push([1,N.string(t)])}if(n.timestamp!==void 0){let t=n.timestamp;e.push([5,N.int32(t)])}return O(e)}s(yg,"encodeBinary");function bg(n){let e=aC(),t=ie(n),i=new Map(t);e:{let r=i.get(1);if(r===void 0)break e;let a=te.string(r);if(a===void 0)break e;e.id=a}e:{let r=i.get(5);if(r===void 0)break e;let a=te.int32(r);if(a===void 0)break e;e.timestamp=a}return e}s(bg,"decodeBinary");function wg(n){let e=[];if(n.channelId!==void 0){let t=n.channelId;e.push([1001,N.string(t)])}return O(e)}s(wg,"encodeBinary");function gg(n){let e=[];if(n.params!==void 0){let t=n.params;e.push([32,{type:R.LengthDelimited,value:wg(t)}])}return O(e)}s(gg,"encodeBinary");function xg(n){let e=[];if(n.uploadDate!==void 0){let t=n.uploadDate;e.push([1,N.int32(t)])}if(n.type!==void 0){let t=n.type;e.push([2,N.int32(t)])}if(n.duration!==void 0){let t=n.duration;e.push([3,N.int32(t)])}if(n.featuresHd!==void 0){let t=n.featuresHd;e.push([4,N.int32(t)])}if(n.featuresSubtitles!==void 0){let t=n.featuresSubtitles;e.push([5,N.int32(t)])}if(n.featuresCreativeCommons!==void 0){let t=n.featuresCreativeCommons;e.push([6,N.int32(t)])}if(n.features3d!==void 0){let t=n.features3d;e.push([7,N.int32(t)])}if(n.featuresLive!==void 0){let t=n.featuresLive;e.push([8,N.int32(t)])}if(n.featuresPurchased!==void 0){let t=n.featuresPurchased;e.push([9,N.int32(t)])}if(n.features4k!==void 0){let t=n.features4k;e.push([14,N.int32(t)])}if(n.features360!==void 0){let t=n.features360;e.push([15,N.int32(t)])}if(n.featuresLocation!==void 0){let t=n.featuresLocation;e.push([23,N.int32(t)])}if(n.featuresHdr!==void 0){let t=n.featuresHdr;e.push([25,N.int32(t)])}if(n.featuresVr180!==void 0){let t=n.featuresVr180;e.push([26,N.int32(t)])}return O(e)}s(xg,"encodeBinary");function Tg(n){let e=[];if(n.sortBy!==void 0){let t=n.sortBy;e.push([1,N.int32(t)])}if(n.filters!==void 0){let t=n.filters;e.push([2,{type:R.LengthDelimited,value:xg(t)}])}if(n.noFilter!==void 0){let t=n.noFilter;e.push([19,N.int32(t)])}return O(e)}s(Tg,"encodeBinary");function Ig(n){let e=[];if(n.song!==void 0){let t=n.song;e.push([1,N.int32(t)])}if(n.video!==void 0){let t=n.video;e.push([2,N.int32(t)])}if(n.album!==void 0){let t=n.album;e.push([3,N.int32(t)])}if(n.artist!==void 0){let t=n.artist;e.push([4,N.int32(t)])}if(n.playlist!==void 0){let t=n.playlist;e.push([5,N.int32(t)])}return O(e)}s(Ig,"encodeBinary");function Sg(n){let e=[];if(n.type!==void 0){let t=n.type;e.push([17,{type:R.LengthDelimited,value:Ig(t)}])}return O(e)}s(Sg,"encodeBinary");function Cg(n){let e=[];if(n.filters!==void 0){let t=n.filters;e.push([2,{type:R.LengthDelimited,value:Sg(t)}])}return O(e)}s(Cg,"encodeBinary");function Eg(n){let e=[];if(n.channelId!==void 0){let t=n.channelId;e.push([1,N.string(t)])}if(n.videoId!==void 0){let t=n.videoId;e.push([2,N.string(t)])}return O(e)}s(Eg,"encodeBinary");function kg(n){let e=[];if(n.ids!==void 0){let t=n.ids;e.push([5,{type:R.LengthDelimited,value:Eg(t)}])}return O(e)}s(kg,"encodeBinary");function Pg(n){let e=[];if(n.params!==void 0){let t=n.params;e.push([1,{type:R.LengthDelimited,value:kg(t)}])}if(n.number0!==void 0){let t=n.number0;e.push([2,N.int32(t)])}if(n.number1!==void 0){let t=n.number1;e.push([3,N.int32(t)])}return O(e)}s(Pg,"encodeBinary");function Ng(n){let e=[];if(n.videoId!==void 0){let t=n.videoId;e.push([2,N.string(t)])}return O(e)}s(Ng,"encodeBinary");function Mg(n){let e=[];if(n.unkParam!==void 0){let t=n.unkParam;e.push([1,N.int32(t)])}return O(e)}s(Mg,"encodeBinary");function Ag(n){let e=[];if(n.commentId!==void 0){let t=n.commentId;e.push([2,N.string(t)])}if(n.unkopts!==void 0){let t=n.unkopts;e.push([4,{type:R.LengthDelimited,value:Mg(t)}])}if(n.channelId!==void 0){let t=n.channelId;e.push([5,N.string(t)])}if(n.videoId!==void 0){let t=n.videoId;e.push([6,N.string(t)])}if(n.unkParam1!==void 0){let t=n.unkParam1;e.push([8,N.int32(t)])}if(n.unkParam2!==void 0){let t=n.unkParam2;e.push([9,N.int32(t)])}return O(e)}s(Ag,"encodeBinary");function Vg(n){let e=[];if(n.videoId!==void 0){let t=n.videoId;e.push([4,N.string(t)])}if(n.sortBy!==void 0){let t=n.sortBy;e.push([6,N.int32(t)])}if(n.type!==void 0){let t=n.type;e.push([15,N.int32(t)])}return O(e)}s(Vg,"encodeBinary");function Rg(n){let e=[];if(n.unkToken!==void 0){let t=n.unkToken;e.push([1,N.string(t)])}if(n.repliesOpts!==void 0){let t=n.repliesOpts;e.push([3,{type:R.LengthDelimited,value:Ag(t)}])}if(n.opts!==void 0){let t=n.opts;e.push([4,{type:R.LengthDelimited,value:Vg(t)}])}if(n.page!==void 0){let t=n.page;e.push([5,N.int32(t)])}if(n.target!==void 0){let t=n.target;e.push([8,N.string(t)])}return O(e)}s(Rg,"encodeBinary");function Fg(n){let e=[];if(n.ctx!==void 0){let t=n.ctx;e.push([2,{type:R.LengthDelimited,value:Ng(t)}])}if(n.unkParam!==void 0){let t=n.unkParam;e.push([3,N.int32(t)])}if(n.params!==void 0){let t=n.params;e.push([6,{type:R.LengthDelimited,value:Rg(t)}])}return O(e)}s(Fg,"encodeBinary");function Og(n){let e=[];if(n.index!==void 0){let t=n.index;e.push([1,N.int32(t)])}return O(e)}s(Og,"encodeBinary");function Bg(n){let e=[];if(n.videoId!==void 0){let t=n.videoId;e.push([2,N.string(t)])}if(n.params!==void 0){let t=n.params;e.push([5,{type:R.LengthDelimited,value:Og(t)}])}if(n.number!==void 0){let t=n.number;e.push([10,N.int32(t)])}return O(e)}s(Bg,"encodeBinary");function Lg(n){let e=[];if(n.text!==void 0){let t=n.text;e.push([1,N.string(t)])}return O(e)}s(Lg,"encodeBinary");function Dg(n){let e=[];if(n.comment!==void 0){let t=n.comment;e.push([1,{type:R.LengthDelimited,value:Lg(t)}])}return O(e)}s(Dg,"encodeBinary");function jg(n){let e=[];if(n.commentId!==void 0){let t=n.commentId;e.push([2,N.string(t)])}if(n.params!==void 0){let t=n.params;e.push([3,{type:R.LengthDelimited,value:Dg(t)}])}if(n.targetLanguage!==void 0){let t=n.targetLanguage;e.push([4,N.string(t)])}return O(e)}s(jg,"encodeBinary");function Yg(n){let e=[];if(n.type!==void 0){let t=n.type;e.push([1,N.int32(t)])}if(n.unkNum!==void 0){let t=n.unkNum;e.push([2,N.int32(t)])}if(n.commentId!==void 0){let t=n.commentId;e.push([3,N.string(t)])}if(n.videoId!==void 0){let t=n.videoId;e.push([5,N.string(t)])}if(n.channelId!==void 0){let t=n.channelId;e.push([23,N.string(t)])}if(n.translateCommentParams!==void 0){let t=n.translateCommentParams;e.push([31,{type:R.LengthDelimited,value:jg(t)}])}return O(e)}s(Yg,"encodeBinary");function Ug(n){let e=[];if(n.index!==void 0){let t=n.index;e.push([1,N.int32(t)])}return O(e)}s(Ug,"encodeBinary");function Wg(n){let e=[];if(n.channelId!==void 0){let t=n.channelId;e.push([1,N.string(t)])}if(n.prefId!==void 0){let t=n.prefId;e.push([2,{type:R.LengthDelimited,value:Ug(t)}])}if(n.number0!==void 0){let t=n.number0;e.push([3,N.int32(t)])}if(n.number1!==void 0){let t=n.number1;e.push([4,N.int32(t)])}return O(e)}s(Wg,"encodeBinary");function Gg(n){let e=[];if(n.unkparam!==void 0){let t=n.unkparam;e.push([16,N.int32(t)])}if(n.clientVersion!==void 0){let t=n.clientVersion;e.push([17,N.string(t)])}if(n.clientName!==void 0){let t=n.clientName;e.push([18,N.string(t)])}return O(e)}s(Gg,"encodeBinary");function Jg(n){let e=[];if(n.client!==void 0){let t=n.client;e.push([1,{type:R.LengthDelimited,value:Gg(t)}])}return O(e)}s(Jg,"encodeBinary");function Hg(n){let e=[];if(n.text!==void 0){let t=n.text;e.push([1,N.string(t)])}return O(e)}s(Hg,"encodeBinary");function zg(n){let e=[];if(n.text!==void 0){let t=n.text;e.push([1,N.string(t)])}return O(e)}s(zg,"encodeBinary");function Kg(n){let e=[];for(let t of n.list)e.push([1,N.string(t)]);return O(e)}s(Kg,"encodeBinary");function qg(n){let e=[];if(n.id!==void 0){let t=n.id;e.push([1,N.int32(t)])}return O(e)}s(qg,"encodeBinary");function $g(n){let e=[];if(n.type!==void 0){let t=n.type;e.push([1,N.string(t)])}return O(e)}s($g,"encodeBinary");function Xg(n){let e=[];if(n.imageData!==void 0){let t=n.imageData;e.push([1,N.bytes(t)])}return O(e)}s(Xg,"encodeBinary");function Qg(n){let e=[];if(n.type!==void 0){let t=n.type;e.push([1,N.int32(t)])}if(n.thumbnail!==void 0){let t=n.thumbnail;e.push([3,{type:R.LengthDelimited,value:Xg(t)}])}return O(e)}s(Qg,"encodeBinary");function Zg(n){let e=[];if(n.type!==void 0){let t=n.type;e.push([1,N.int32(t)])}return O(e)}s(Zg,"encodeBinary");function ex(n){let e=[];if(n.unkparam!==void 0){let t=n.unkparam;e.push([1,N.int32(t)])}if(n.choice!==void 0){let t=n.choice;e.push([2,N.int32(t)])}return O(e)}s(ex,"encodeBinary");function tx(n){let e=[];if(n.unkparam!==void 0){let t=n.unkparam;e.push([1,N.int32(t)])}if(n.choice!==void 0){let t=n.choice;e.push([2,N.int32(t)])}return O(e)}s(tx,"encodeBinary");function Ay(n){let e=[];if(n.context!==void 0){let t=n.context;e.push([1,{type:R.LengthDelimited,value:Jg(t)}])}if(n.target!==void 0){let t=n.target;e.push([2,N.string(t)])}if(n.title!==void 0){let t=n.title;e.push([3,{type:R.LengthDelimited,value:Hg(t)}])}if(n.description!==void 0){let t=n.description;e.push([4,{type:R.LengthDelimited,value:zg(t)}])}if(n.tags!==void 0){let t=n.tags;e.push([6,{type:R.LengthDelimited,value:Kg(t)}])}if(n.category!==void 0){let t=n.category;e.push([7,{type:R.LengthDelimited,value:qg(t)}])}if(n.license!==void 0){let t=n.license;e.push([8,{type:R.LengthDelimited,value:$g(t)}])}if(n.videoThumbnail!==void 0){let t=n.videoThumbnail;e.push([20,{type:R.LengthDelimited,value:Qg(t)}])}if(n.privacy!==void 0){let t=n.privacy;e.push([38,{type:R.LengthDelimited,value:Zg(t)}])}if(n.madeForKids!==void 0){let t=n.madeForKids;e.push([68,{type:R.LengthDelimited,value:ex(t)}])}if(n.ageRestricted!==void 0){let t=n.ageRestricted;e.push([69,{type:R.LengthDelimited,value:tx(t)}])}return O(e)}s(Ay,"encodeBinary");function ix(n){let e=[];if(n.hashtag!==void 0){let t=n.hashtag;e.push([1,N.string(t)])}if(n.type!==void 0){let t=n.type;e.push([3,N.int32(t)])}return O(e)}s(ix,"encodeBinary");function nx(n){let e=[];if(n.params!==void 0){let t=n.params;e.push([93,{type:R.LengthDelimited,value:ix(t)}])}return O(e)}s(nx,"encodeBinary");var mm=class{static encodeVisitorData(e,t){let i=yg({id:e,timestamp:t});return encodeURIComponent(zt(i).replace(/\+/g,"-").replace(/\//g,"_"))}static decodeVisitorData(e){return bg(U0(decodeURIComponent(e)))}static encodeChannelAnalyticsParams(e){let t=gg({params:{channelId:e}});return encodeURIComponent(zt(t))}static encodeSearchFilters(e){let t={all:void 0,hour:1,today:2,week:3,month:4,year:5},i={all:void 0,video:1,channel:2,playlist:3,movie:4},r={all:void 0,short:1,long:2,medium:3},a={relevance:void 0,rating:1,upload_date:2,view_count:3},l={hd:"featuresHd",subtitles:"featuresSubtitles",creative_commons:"featuresCreativeCommons","3d":"features3D",live:"featuresLive",purchased:"featuresPurchased","4k":"features4K",360:"features360",location:"featuresLocation",hdr:"featuresHdr",vr180:"featuresVr180"},h={};if(e?h.filters={}:h.noFilter=0,h.filters&&(e.upload_date&&(h.filters.uploadDate=t[e.upload_date]),e.type&&(h.filters.type=i[e.type]),e.duration&&(h.filters.duration=r[e.duration]),e.sort_by&&e.sort_by!=="relevance"&&(h.sortBy=a[e.sort_by]),e.features))for(let _ of e.features)h.filters[l[_]]=1;let v=Tg(h);return encodeURIComponent(zt(v))}static encodeMusicSearchFilters(e){var t;let i={filters:{type:{}}};e.type&&e.type!=="all"&&((t=i.filters)===null||t===void 0?void 0:t.type)&&(i.filters.type[e.type]=1);let r=Cg(i);return encodeURIComponent(zt(r))}static encodeMessageParams(e,t){let i=Pg({params:{ids:{channelId:e,videoId:t}},number0:1,number1:4});return btoa(encodeURIComponent(zt(i)))}static encodeCommentsSectionParams(e,t={}){let r=Fg({ctx:{videoId:e},unkParam:6,params:{opts:{videoId:e,sortBy:{TOP_COMMENTS:0,NEWEST_FIRST:1}[t.sort_by||"TOP_COMMENTS"],type:t.type||2},target:"comments-section"}});return encodeURIComponent(zt(r))}static encodeCommentParams(e){let t=Bg({videoId:e,params:{index:0},number:7});return encodeURIComponent(zt(t))}static encodeCommentActionParams(e,t={}){let i={type:e,commentId:t.comment_id||" ",videoId:t.video_id||" ",channelId:" ",unkNum:2};if(t.hasOwnProperty("text")){if(typeof t.target_language!="string")throw new Error("target_language must be a string");t.comment_id&&delete i.unkNum,i.translateCommentParams={params:{comment:{text:t.text}},commentId:t.comment_id||" ",targetLanguage:t.target_language}}let r=Yg(i);return encodeURIComponent(zt(r))}static encodeNotificationPref(e,t){let i=Wg({channelId:e,prefId:{index:t},number0:0,number1:4});return encodeURIComponent(zt(i))}static encodeVideoMetadataPayload(e,t){let i={context:{client:{unkparam:14,clientName:Xt.ANDROID.NAME,clientVersion:Xt.YTSTUDIO_ANDROID.VERSION}},target:e};if(Reflect.has(t,"title")&&(i.title={text:t.title||""}),Reflect.has(t,"description")&&(i.description={text:t.description||""}),Reflect.has(t,"license")&&(i.license={type:t.license||""}),Reflect.has(t,"tags")&&(i.tags={list:t.tags||[]}),Reflect.has(t,"category")&&(i.category={id:t.category||0}),Reflect.has(t,"privacy"))switch(t.privacy){case"PUBLIC":i.privacy={type:1};break;case"UNLISTED":i.privacy={type:2};break;case"PRIVATE":i.privacy={type:3};break;default:throw new Error("Invalid visibility option")}return Reflect.has(t,"made_for_kids")&&(i.madeForKids={unkparam:1,choice:t.made_for_kids?1:2}),Reflect.has(t,"age_restricted")&&(i.ageRestricted={unkparam:1,choice:t.age_restricted?1:2}),Ay(i)}static encodeCustomThumbnailPayload(e,t){let i={context:{client:{unkparam:14,clientName:Xt.ANDROID.NAME,clientVersion:Xt.YTSTUDIO_ANDROID.VERSION}},target:e,videoThumbnail:{type:3,thumbnail:{imageData:t}}};return Ay(i)}static encodeHashtag(e){let t=nx({params:{hashtag:e,type:1}});return encodeURIComponent(zt(t))}};s(mm,"Proto");var Ve=mm;var _m=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},vn=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},bC=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},Qt,Ma=class extends c{constructor(e){var t,i,r,a,l,h,v;super(),Qt.set(this,void 0),this.content=new d(e.contentText),this.published=new d(e.publishedTimeText),this.author_is_channel_owner=e.authorIsChannelOwner,this.current_user_reply_thumbnail=S.fromResponse(e.currentUserReplyThumbnail),this.sponsor_comment_badge=f.parseItem(e.sponsorCommentBadge,cm),this.paid_comment_chip=f.parseItem(e.paidCommentChipRenderer,dm),this.author_badge=f.parseItem(e.authorCommentBadge,um),this.author=new W(Object.assign(Object.assign({},e.authorText),{navigationEndpoint:e.authorEndpoint}),this.author_badge?[{metadataBadgeRenderer:(t=this.author_badge)===null||t===void 0?void 0:t.orig_badge}]:null,e.authorThumbnail),this.action_menu=f.parseItem(e.actionMenu,ee),this.action_buttons=f.parseItem(e.actionButtons,Kn),this.comment_id=e.commentId,this.vote_status=e.voteStatus,this.vote_count=e.voteCount?new d(e.voteCount).toString():"0",this.reply_count=e.replyCount||0,this.is_liked=!!(!((r=(i=this.action_buttons)===null||i===void 0?void 0:i.like_button)===null||r===void 0)&&r.is_toggled),this.is_disliked=!!(!((l=(a=this.action_buttons)===null||a===void 0?void 0:a.dislike_button)===null||l===void 0)&&l.is_toggled),this.is_hearted=!!(!((v=(h=this.action_buttons)===null||h===void 0?void 0:h.creator_heart)===null||v===void 0)&&v.is_hearted),this.is_pinned=!!e.pinnedCommentBadge,this.is_member=!!e.sponsorCommentBadge}like(){var e;return _m(this,void 0,void 0,function*(){if(!vn(this,Qt,"f"))throw new x("An active caller must be provide to perform this operation.");let t=(e=this.action_buttons)===null||e===void 0?void 0:e.like_button;if(!t)throw new x("Like button was not found.",{comment_id:this.comment_id});if(t.is_toggled)throw new x("This comment is already liked",{comment_id:this.comment_id});return yield t.endpoint.call(vn(this,Qt,"f"),{parse:!1})})}dislike(){var e;return _m(this,void 0,void 0,function*(){if(!vn(this,Qt,"f"))throw new x("An active caller must be provide to perform this operation.");let t=(e=this.action_buttons)===null||e===void 0?void 0:e.dislike_button;if(!t)throw new x("Dislike button was not found.",{comment_id:this.comment_id});if(t.is_toggled)throw new x("This comment is already disliked",{comment_id:this.comment_id});return yield t.endpoint.call(vn(this,Qt,"f"),{parse:!1})})}reply(e){var t,i,r;return _m(this,void 0,void 0,function*(){if(!vn(this,Qt,"f"))throw new x("An active caller must be provide to perform this operation.");if(!(!((t=this.action_buttons)===null||t===void 0)&&t.reply_button))throw new x("Cannot reply to another reply. Try mentioning the user instead.",{comment_id:this.comment_id});let a=(i=this.action_buttons)===null||i===void 0?void 0:i.reply_button;if(!(!((r=a.endpoint)===null||r===void 0)&&r.dialog))throw new x("Reply button endpoint did not have a dialog.");let h=a.endpoint.dialog.item().as(lm).reply_button;if(!h)throw new x("Reply button was not found in the dialog.",{comment_id:this.comment_id});if(!h.endpoint)throw new x("Reply button endpoint was not found.",{comment_id:this.comment_id});return yield h.endpoint.call(vn(this,Qt,"f"),{commentText:e})})}translate(e){var t,i,r,a,l,h;return _m(this,void 0,void 0,function*(){if(!vn(this,Qt,"f"))throw new x("An active caller must be provide to perform this operation.");let _={text:this.content.toString().replace(/[^\p{L}\p{N}\p{P}\p{Z}]/gu,""),target_language:e,comment_id:this.comment_id},p=Ve.encodeCommentActionParams(22,_),b=yield vn(this,Qt,"f").execute("comment/perform_comment_action",{action:p,client:"ANDROID"}),I=(i=(t=b.data.frameworkUpdates)===null||t===void 0?void 0:t.entityBatchUpdate)===null||i===void 0?void 0:i.mutations,C=(h=(l=(a=(r=I==null?void 0:I[0])===null||r===void 0?void 0:r.payload)===null||a===void 0?void 0:a.commentEntityPayload)===null||l===void 0?void 0:l.translatedContent)===null||h===void 0?void 0:h.content;return Object.assign(Object.assign({},b),{content:C})})}setActions(e){bC(this,Qt,e,"f")}};s(Ma,"Comment");Qt=new WeakMap;Ma.type="Comment";var Zo=Ma;var Aa=class extends c{constructor(e){super(),this.id=e.id,this.categories=f.parseArray(e.categories),this.category_buttons=f.parseArray(e.categoryButtons),this.search_placeholder=new d(e.searchPlaceholderText),this.search_no_results=new d(e.searchNoResultsText),this.pick_skin_tone=new d(e.pickSkinToneText),this.clear_search_label=e.clearSearchLabel,this.skin_tone_generic_label=e.skinToneGenericLabel,this.skin_tone_light_label=e.skinToneLightLabel,this.skin_tone_medium_light_label=e.skinToneMediumLightLabel,this.skin_tone_medium_label=e.skinToneMediumLabel,this.skin_tone_medium_dark_label=e.skinToneMediumDarkLabel,this.skin_tone_dark_label=e.skinToneDarkLabel}};s(Aa,"EmojiPicker");Aa.type="EmojiPicker";var vm=Aa;var Va=class extends c{constructor(e){super(),this.editable_text=new d(e.editableText),this.author_thumbnail=S.fromResponse(e.authorThumbnail),this.submit_button=f.parseItem(e.submitButton,M),this.cancel_button=f.parseItem(e.cancelButton,M),this.placeholder=new d(e.placeholderText),this.emoji_button=f.parseItem(e.emojiButton,M),this.emoji_picker=f.parseItem(e.emojiPicker,vm)}};s(Va,"CommentDialog");Va.type="CommentDialog";var ox=Va;var Ra=class extends c{constructor(e){super(),this.contents=f.parseArray(e.contents),this.view_replies=f.parseItem(e.viewReplies,M),this.hide_replies=f.parseItem(e.hideReplies,M),this.view_replies_creator_thumbnail=S.fromResponse(e.viewRepliesCreatorThumbnail),this.has_channel_owner_replied=!!e.viewRepliesCreatorThumbnail}};s(Ra,"CommentReplies");Ra.type="CommentReplies";var ym=Ra;var Fa=class extends c{constructor(e){super(),e.header&&(this.header=new d(e.headerText)),e.commentCount&&(this.comment_count=new d(e.commentCount)),(e.teaserAvatar||e.simpleboxAvatar)&&(this.teaser_avatar=S.fromResponse(e.teaserAvatar||e.simpleboxAvatar)),e.teaserContent&&(this.teaser_content=new d(e.teaserContent)),e.simpleboxPlaceholder&&(this.simplebox_placeholder=new d(e.simpleboxPlaceholder))}};s(Fa,"CommentsEntryPointHeader");Fa.type="CommentsEntryPointHeader";var bm=Fa;var Oa=class extends c{constructor(e){var t;super(),this.title=new d(e.titleText),this.count=new d(e.countText),this.comments_count=new d(e.commentsCount),this.create_renderer=f.parseItem(e.createRenderer),this.sort_menu=f.parseItem(e.sortMenu,Ui),this.custom_emojis=((t=e.customEmojis)===null||t===void 0?void 0:t.map(i=>({emoji_id:i.emojiId,shortcuts:i.shortcuts,search_terms:i.searchTerms,image:S.fromResponse(i.image),is_custom_emoji:i.isCustomEmoji})))||null}};s(Oa,"CommentsHeader");Oa.type="CommentsHeader";var er=Oa;var Ba=class extends c{constructor(e){super(),this.submit_button=f.parseItem(e.submitButton,M),this.cancel_button=f.parseItem(e.cancelButton,M),this.author_thumbnails=S.fromResponse(e.authorThumbnail),this.placeholder=new d(e.placeholderText),this.avatar_size=e.avatarSize}};s(Ba,"CommentSimplebox");Ba.type="CommentSimplebox";var wm=Ba;var La=class extends c{constructor(e){super(),this.trigger=e.trigger,e.button&&(this.button=f.parseItem(e.button)),this.endpoint=new T(e.continuationEndpoint)}};s(La,"ContinuationItem");La.type="ContinuationItem";var rt=La;var rx=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},Gi=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},Vy=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},Ji,qn,Da=class extends c{constructor(e){super(),Ji.set(this,void 0),qn.set(this,void 0),this.comment=f.parseItem(e.comment,Zo),this.comment_replies_data=f.parseItem(e.replies,ym),this.is_moderated_elq_comment=e.isModeratedElqComment,this.has_replies=!!this.comment_replies_data}getReplies(){var e,t;return rx(this,void 0,void 0,function*(){if(!Gi(this,Ji,"f"))throw new x("Actions instance not set for this thread.");if(!this.comment_replies_data)throw new x("This comment has no replies.",{comment_id:(e=this.comment)===null||e===void 0?void 0:e.comment_id});let i=(t=this.comment_replies_data.contents)===null||t===void 0?void 0:t.firstOfType(rt);if(!i)throw new x("Replies continuation not found.");let r=yield i.endpoint.call(Gi(this,Ji,"f"),{parse:!0});if(!r.on_response_received_endpoints_memo)throw new x("Unexpected response.",r);return this.replies=Le(r.on_response_received_endpoints_memo.getType(Zo).map(a=>(a.setActions(Gi(this,Ji,"f")),a))),Vy(this,qn,r==null?void 0:r.on_response_received_endpoints_memo.getType(rt).first(),"f"),this})}getContinuation(){var e,t;return rx(this,void 0,void 0,function*(){if(!this.replies)throw new x("Cannot retrieve continuation because this thread's replies have not been loaded.");if(!Gi(this,qn,"f"))throw new x("Continuation not found.");if(!Gi(this,Ji,"f"))throw new x("Actions instance not set for this thread.");let i=(e=Gi(this,qn,"f").button)===null||e===void 0?void 0:e.as(M);if(!i)throw new x('"Load more" button not found.');let r=yield i.endpoint.call(Gi(this,Ji,"f"),{parse:!0});if(!r.on_response_received_endpoints_memo)throw new x("Unexpected response.",r);return this.replies=Le(r.on_response_received_endpoints_memo.getType(Zo).map(a=>(a.setActions(Gi(this,Ji,"f")),a))),Vy(this,qn,(t=r.on_response_received_endpoints_memo.getType(rt))===null||t===void 0?void 0:t[0],"f"),this})}get has_continuation(){if(!this.replies)throw new x("Cannot determine if there is a continuation because this thread's replies have not been loaded.");return!!Gi(this,qn,"f")}setActions(e){Vy(this,Ji,e,"f")}};s(Da,"CommentThread");Ji=new WeakMap,qn=new WeakMap;Da.type="CommentThread";var gm=Da;var ja=class extends c{constructor(e){super(),this.title=new d(e.title),this.channel_id=e.channelId,this.thumbnail=S.fromResponse(e.thumbnail),this.display_name=new d(e.displayName),this.video_count=new d(e.videoCountText),this.subscriber_count=new d(e.subscriberCountText),this.endpoint=new T(e.navigationEndpoint),this.tv_banner=S.fromResponse(e.tvBanner),this.menu=f.parseItem(e.menu,ee)}};s(ja,"CompactChannel");ja.type="CompactChannel";var sx=ja;var Ya=class extends c{constructor(e){super(),this.title=new d(e.title).toString(),this.endpoint=new T(e.navigationEndpoint),this.style=e.style}};s(Ya,"CompactLink");Ya.type="CompactLink";var tr=Ya;var Ua=class extends c{constructor(e){var t;super(),this.id=e.playlistId,this.title=new d(e.title),this.author=!((t=e.shortBylineText)===null||t===void 0)&&t.simpleText?new d(e.shortBylineText):new W(e.longBylineText,e.ownerBadges,null),this.thumbnails=S.fromResponse(e.thumbnail||{thumbnails:e.thumbnails.map(i=>i.thumbnails).flat(1)}),this.video_count=new d(e.thumbnailText),this.video_count_short=new d(e.videoCountShortText),this.first_videos=f.parseArray(e.videos),this.share_url=e.shareUrl||null,this.menu=f.parseItem(e.menu),this.badges=f.parseArray(e.ownerBadges),this.endpoint=new T(e.navigationEndpoint),this.thumbnail_overlays=f.parseArray(e.thumbnailOverlays),e.viewPlaylistText&&(this.view_playlist=new d(e.viewPlaylistText))}};s(Ua,"Playlist");Ua.type="Playlist";var _i=Ua;var Wa=class extends _i{constructor(e){super(e)}};s(Wa,"CompactMix");Wa.type="CompactMix";var ax=Wa;var Ga=class extends _i{constructor(e){super(e)}};s(Ga,"CompactPlaylist");Ga.type="CompactPlaylist";var ux=Ga;var Ja=class extends c{constructor(e){super(),this.title=new d(e.title),this.description=new d(e.description),this.video_count=new d(e.videoCountText),this.endpoint=new T(e.navigationEndpoint),this.thumbnail=S.fromResponse(e.thumbnail)}};s(Ja,"CompactStation");Ja.type="CompactStation";var lx=Ja;var Ha=class extends c{constructor(e){super(),e!=null&&e.icon&&(this.icon_type=e.icon.iconType),e!=null&&e.style&&(this.style=e.style),e!=null&&e.label&&(this.label=e.label),((e==null?void 0:e.tooltip)||(e==null?void 0:e.iconTooltip))&&(this.tooltip=e.tooltip||e.iconTooltip)}};s(Ha,"MetadataBadge");Ha.type="MetadataBadge";var gt=Ha;var za=class extends c{constructor(e){super(),this.id=e.videoId,this.thumbnails=S.fromResponse(e.thumbnail)||null,this.rich_thumbnail=e.richThumbnail&&f.parse(e.richThumbnail),this.title=new d(e.title),this.author=new W(e.longBylineText,e.ownerBadges,e.channelThumbnail),this.view_count=new d(e.viewCountText),this.short_view_count=new d(e.shortViewCountText),this.published=new d(e.publishedTimeText),this.badges=f.parseArray(e.badges,gt),this.duration={text:new d(e.lengthText).toString(),seconds:dt(new d(e.lengthText).toString())},this.thumbnail_overlays=f.parseArray(e.thumbnailOverlays),this.endpoint=new T(e.navigationEndpoint),this.menu=f.parseItem(e.menu,ee)}get best_thumbnail(){return this.thumbnails[0]}get is_fundraiser(){return this.badges.some(e=>e.label==="Fundraiser")}get is_live(){return this.badges.some(e=>{if(e.style==="BADGE_STYLE_TYPE_LIVE_NOW"||e.label==="LIVE")return!0})}get is_new(){return this.badges.some(e=>e.label==="New")}get is_premiere(){return this.badges.some(e=>e.style==="PREMIERE")}};s(za,"CompactVideo");za.type="CompactVideo";var xm=za;var Ka=class extends c{constructor(e){super(),this.title=new d(e.title),this.confirm_button=f.parseItem(e.confirmButton,M),this.cancel_button=f.parseItem(e.cancelButton,M),this.dialog_messages=e.dialogMessages.map(t=>new d(t))}};s(Ka,"ConfirmDialog");Ka.type="ConfirmDialog";var cx=Ka;var qa=class extends c{constructor(e){super(),this.availability_message=f.parseItem(e.availabilityMessage,pt)}};s(qa,"ConversationBar");qa.type="ConversationBar";var dx=qa;var $a=class extends c{constructor(e){super(),this.copy_button=f.parseItem(e.copyButton,M),this.short_url=e.shortUrl,this.style=e.style}};s($a,"CopyLink");$a.type="CopyLink";var Tm=$a;var Xa=class extends c{constructor(e){super(),this.time_range_start_millis=e.timeRangeStartMillis,this.marker_duration_millis=e.markerDurationMillis,this.heat_marker_intensity_score_normalized=e.heatMarkerIntensityScoreNormalized}};s(Xa,"HeatMarker");Xa.type="HeatMarker";var Im=Xa;var Qa=class extends c{constructor(e){super(),this.max_height_dp=e.maxHeightDp,this.min_height_dp=e.minHeightDp,this.show_hide_animation_duration_millis=e.showHideAnimationDurationMillis,this.heat_markers=f.parseArray(e.heatMarkers,Im),this.heat_markers_decorations=f.parseArray(e.heatMarkersDecorations)}};s(Qa,"Heatmap");Qa.type="Heatmap";var Sm=Qa;var Za=class extends c{constructor(e){super(),this.marker_key=e.key,this.value={},e.value.heatmap&&(this.value.heatmap=f.parseItem(e.value.heatmap,Sm)),e.value.chapters&&(this.value.chapters=f.parseArray(e.value.chapters,sm))}};s(Za,"Marker");Za.type="Marker";var eu=class extends c{constructor(e){var t;super(),this.markers_map=Le(((t=e.markersMap)===null||t===void 0?void 0:t.map(i=>new Za(i)))||[])}};s(eu,"MultiMarkersPlayerBar");eu.type="MultiMarkersPlayerBar";var Cm=eu;var tu=class extends c{constructor(e){super(),this.player_bar=f.parseItem(e.playerBar,Cm),this.player_bar_action_button=f.parseItem(e.playerBarActionButton,M)}};s(tu,"DecoratedPlayerBar");tu.type="DecoratedPlayerBar";var Em=tu;var iu=class extends c{constructor(e){super(),this.title=new d(e.title),this.description=new d(e.description),this.endpoint=new T(e.navigationEndpoint),this.large_form_factor_background_thumbnail=f.parseItem(e.largeFormFactorBackgroundThumbnail),this.small_form_factor_background_thumbnail=f.parseItem(e.smallFormFactorBackgroundThumbnail),this.scrim_color_values=e.scrimColorValues,this.min_panel_display_duration_ms=e.minPanelDisplayDurationMs,this.min_video_play_duration_ms=e.minVideoPlayDurationMs,this.scrim_duration=e.scrimDuration,this.metadata_order=e.metadataOrder,this.panel_layout=e.panelLayout}};s(iu,"DefaultPromoPanel");iu.type="DefaultPromoPanel";var px=iu;var nu=class extends c{constructor(e){super(),this.text=new d(e.didYouMean).toString(),this.corrected_query=new d(e.correctedQuery),this.endpoint=new T(e.navigationEndpoint||e.correctedQueryEndpoint)}};s(nu,"DidYouMean");nu.type="DidYouMean";var km=nu;var ou=class extends c{constructor(e){super(),this.style=e.style,this.size=e.size,this.endpoint=new T(e.command),this.target_id=e.targetId}};s(ou,"DownloadButton");ou.type="DownloadButton";var fx=ou;var $n=class{constructor(e){var t,i;this.text=((i=(t=e.type.textType)===null||t===void 0?void 0:t.text)===null||i===void 0?void 0:i.content)||null,this.properties=e.properties,e.childElements&&(this.child_elements=e.childElements.map(r=>new $n(r)))}};s($n,"ChildElement");$n.type="ChildElement";var Pm=$n;var Xn=class extends c{constructor(e){var t,i,r;if(super(),Reflect.has(e,"elementRenderer"))return f.parseItem(e,Xn);let a=e.newElement.type.componentType;this.model=f.parseItem(a==null?void 0:a.model),!((t=e.newElement)===null||t===void 0)&&t.childElements&&(this.child_elements=((r=(i=e.newElement)===null||i===void 0?void 0:i.childElements)===null||r===void 0?void 0:r.map(l=>new Pm(l)))||null)}};s(Xn,"Element");Xn.type="Element";var ir=Xn;var ru=class extends c{constructor(e){super(),this.title=new d(e.title),this.first_option=f.parseItem(e.firstOption),this.menu=f.parseItem(e.menu)}};s(ru,"EmergencyOnebox");ru.type="EmergencyOnebox";var hx=ru;var su=class extends c{constructor(e){super(),this.category_id=e.categoryId,this.title=new d(e.title),this.emoji_ids=e.emojiIds,this.image_loading_lazy=!!e.imageLoadingLazy,this.category_type=e.categoryType}};s(su,"EmojiPickerCategory");su.type="EmojiPickerCategory";var mx=su;var au=class extends c{constructor(e){var t;super(),this.category_id=e.categoryId,this.icon_type=(t=e.icon)===null||t===void 0?void 0:t.iconType,this.tooltip=e.tooltip}};s(au,"EmojiPickerCategoryButton");au.type="EmojiPickerCategoryButton";var _x=au;var uu=class extends c{constructor(e){super(),this.category_id=e.categoryId,this.title=new d(e.title),this.upsell=new d(e.upsell),this.emoji_tooltip=e.emojiTooltip,this.endpoint=new T(e.command),this.emoji_ids=e.emojiIds}};s(uu,"EmojiPickerUpsellCategory");uu.type="EmojiPickerUpsellCategory";var vx=uu;var lu=class extends c{constructor(e){super(),this.style=`${e.style}`,this.title=new d(e.title),this.endpoint=new T(e.endpoint),e.image&&(this.image=S.fromResponse(e.image)),e.icon&&(this.icon=S.fromResponse(e.icon)),e.metadata&&(this.metadata=new d(e.metadata)),e.callToAction&&(this.call_to_action=new d(e.callToAction)),e.hovercardButton&&(this.hovercard_button=f.parseItem(e.hovercardButton)),e.isSubscribe&&(this.is_subscribe=!!e.isSubscribe),e.playlistLength&&(this.playlist_length=new d(e.playlistLength)),this.thumbnail_overlays=e.thumbnailOverlays?f.parseArray(e.thumbnailOverlays):void 0,this.left=parseFloat(e.left),this.width=parseFloat(e.width),this.top=parseFloat(e.top),this.aspect_ratio=parseFloat(e.aspectRatio),this.start_ms=parseFloat(e.startMs),this.end_ms=parseFloat(e.endMs),this.id=e.id}};s(lu,"EndscreenElement");lu.type="EndscreenElement";var yx=lu;var cu=class extends c{constructor(e){super(),this.id=e.playlistId,this.title=new d(e.title),this.author=new d(e.longBylineText),this.endpoint=new T(e.navigationEndpoint),this.thumbnails=S.fromResponse(e.thumbnail),this.video_count=new d(e.videoCountText)}};s(cu,"EndScreenPlaylist");cu.type="EndScreenPlaylist";var Nm=cu;var du=class extends c{constructor(e){super(),this.id=e.videoId,this.title=new d(e.title),this.thumbnails=S.fromResponse(e.thumbnail),this.thumbnail_overlays=f.parseArray(e.thumbnailOverlays),this.author=new W(e.shortBylineText,e.ownerBadges),this.endpoint=new T(e.navigationEndpoint),this.short_view_count=new d(e.shortViewCountText),this.badges=f.parse(e.badges),this.duration={text:new d(e.lengthText).toString(),seconds:e.lengthInSeconds}}};s(du,"EndScreenVideo");du.type="EndScreenVideo";var Mm=du;var pu=class extends c{constructor(e){super(),this.thumbnails=S.fromResponse(e.thumbnail),this.endpoint=new T(e.searchEndpoint),this.query=new d(e.query).toString()}};s(pu,"SearchRefinementCard");pu.type="SearchRefinementCard";var Qn=pu;var fu=class extends c{constructor(e){super(),this.title=new d(e.title),this.time_description=new d(e.timeDescription),this.thumbnail=S.fromResponse(e.thumbnail),this.on_tap_endpoint=new T(e.onTap),this.layout=e.layout,this.is_highlighted=e.isHighlighted}};s(fu,"MacroMarkersListItem");fu.type="MacroMarkersListItem";var Am=fu;var hu=class extends c{constructor(e){super(),this.game=f.parseItem(e.game)}};s(hu,"GameCard");hu.type="GameCard";var Vm=hu;var mu=class extends c{constructor(e){super(),this.text=new d(e.text).toString(),this.style=e.style}};s(mu,"ThumbnailOverlayTimeStatus");mu.type="ThumbnailOverlayTimeStatus";var Zn=mu;var _u=class extends c{constructor(e){var t,i,r,a;super();let l=((t=e.thumbnailOverlays.find(v=>v.thumbnailOverlayTimeStatusRenderer))===null||t===void 0?void 0:t.thumbnailOverlayTimeStatusRenderer.text)||"N/A";this.id=e.videoId,this.title=new d(e.title),this.description_snippet=e.descriptionSnippet?new d(e.descriptionSnippet):null,this.snippets=((i=e.detailedMetadataSnippets)===null||i===void 0?void 0:i.map(v=>({text:new d(v.snippetText),hover_text:new d(v.snippetHoverText)})))||[],this.expandable_metadata=f.parseItem(e.expandableMetadata,Rm),this.thumbnails=S.fromResponse(e.thumbnail),this.thumbnail_overlays=f.parseArray(e.thumbnailOverlays),this.rich_thumbnail=e.richThumbnail?f.parseItem(e.richThumbnail):null,this.author=new W(e.ownerText,e.ownerBadges,(a=(r=e.channelThumbnailSupportedRenderers)===null||r===void 0?void 0:r.channelThumbnailWithLinkRenderer)===null||a===void 0?void 0:a.thumbnail),this.badges=f.parseArray(e.badges,gt),this.endpoint=new T(e.navigationEndpoint),this.published=new d(e.publishedTimeText),this.view_count=new d(e.viewCountText),this.short_view_count=new d(e.shortViewCountText);let h=e.upcomingEventData&&Number(`${e.upcomingEventData.startTime}000`);h&&(this.upcoming=new Date(h)),this.duration={text:e.lengthText?new d(e.lengthText).toString():new d(l).toString(),seconds:dt(e.lengthText?new d(e.lengthText).toString():new d(l).toString())},this.show_action_menu=e.showActionMenu,this.is_watched=e.isWatched||!1,this.menu=f.parseItem(e.menu,ee),this.search_video_result_entity_key=e.searchVideoResultEntityKey}get description(){var e;return this.snippets.length>0?this.snippets.map(t=>t.text.toString()).join(""):((e=this.description_snippet)===null||e===void 0?void 0:e.toString())||""}get is_live(){var e;return this.badges.some(t=>{if(t.style==="BADGE_STYLE_TYPE_LIVE_NOW"||t.label==="LIVE")return!0})||((e=this.thumbnail_overlays.firstOfType(Zn))===null||e===void 0?void 0:e.style)==="LIVE"}get is_upcoming(){return this.upcoming&&this.upcoming>new Date}get is_premiere(){return this.badges.some(e=>e.label==="PREMIERE")}get is_4k(){return this.badges.some(e=>e.label==="4K")}get has_captions(){return this.badges.some(e=>e.label==="CC")}get best_thumbnail(){return this.thumbnails[0]}};s(_u,"Video");_u.type="Video";var nr=_u;var vu=class extends nr{constructor(e){super(e)}};s(vu,"VideoCard");vu.type="VideoCard";var Fm=vu;var yu=class extends c{constructor(e){super(),this.cards=f.parseArray(e.cards,[Qn,Am,Vm,Fm]),this.header=f.parseItem(e.header),this.previous_button=f.parseItem(e.previousButton,M),this.next_button=f.parseItem(e.nextButton,M)}};s(yu,"HorizontalCardList");yu.type="HorizontalCardList";var or=yu;var bu=class extends c{constructor(e){super(),this.header={collapsed_title:new d(e.header.collapsedTitle),collapsed_thumbnail:S.fromResponse(e.header.collapsedThumbnail),collapsed_label:new d(e.header.collapsedLabel),expanded_title:new d(e.header.expandedTitle)},this.expanded_content=f.parseItem(e.expandedContent,or),this.expand_button=f.parseItem(e.expandButton,M),this.collapse_button=f.parseItem(e.collapseButton,M)}};s(bu,"ExpandableMetadata");bu.type="ExpandableMetadata";var Rm=bu;var wu=class extends c{constructor(e){super(),this.title=e.title,this.endpoint=new T(e.endpoint),this.selected=e.selected,this.content=e.content?f.parseItem(e.content):null}};s(wu,"ExpandableTab");wu.type="ExpandableTab";var rr=wu;var gu=class extends c{constructor(e){super(),this.items=f.parseArray(e.items)}get contents(){return this.items}};s(gu,"ExpandedShelfContents");gu.type="ExpandedShelfContents";var bx=gu;var xu=class extends c{constructor(e){super(),this.contents=f.parseArray(e.contents,je)}};s(xu,"FeedFilterChipBar");xu.type="FeedFilterChipBar";var Hi=xu;var Tu=class extends c{constructor(e){super(),this.title=new d(e.title)}};s(Tu,"FeedTabbedHeader");Tu.type="FeedTabbedHeader";var Om=Tu;var Iu=class extends c{constructor(e){super(),this.title=new d(e.title),this.box_art=S.fromResponse(e.boxArt),this.box_art_overlay_text=new d(e.boxArtOverlayText),this.endpoint=new T(e.endpoint),this.is_official_box_art=e.isOfficialBoxArt}};s(Iu,"GameDetails");Iu.type="GameDetails";var wx=Iu;var Su=class extends c{constructor(e){var t,i,r;super(),this.items=f.parseArray(e.items),e.header&&(this.header=f.parseItem(e.header)),e.isCollapsible&&(this.is_collapsible=e.isCollapsible),e.visibleRowCount&&(this.visible_row_count=e.visibleRowCount),e.targetId&&(this.target_id=e.targetId),this.continuation=((r=(i=(t=e.continuations)===null||t===void 0?void 0:t[0])===null||i===void 0?void 0:i.nextContinuationData)===null||r===void 0?void 0:r.continuation)||null}get contents(){return this.items}};s(Su,"Grid");Su.type="Grid";var eo=Su;var Cu=class extends c{constructor(e){super(),this.id=e.channelId,this.author=new W(Object.assign(Object.assign({},e.title),{navigationEndpoint:e.navigationEndpoint}),e.ownerBadges,e.thumbnail),this.subscribers=new d(e.subscriberCountText),this.video_count=new d(e.videoCountText),this.endpoint=new T(e.navigationEndpoint),this.subscribe_button=f.parseItem(e.subscribeButton)}};s(Cu,"GridChannel");Cu.type="GridChannel";var Bm=Cu;var Eu=class extends c{constructor(e){super(),this.title=new d(e.title)}};s(Eu,"GridHeader");Eu.type="GridHeader";var gx=Eu;var ku=class extends c{constructor(e){var t,i;super(),this.id=e.playlistId,this.title=new d(e.title),this.author=!((t=e.shortBylineText)===null||t===void 0)&&t.simpleText?new d(e.shortBylineText):!((i=e.longBylineText)===null||i===void 0)&&i.simpleText?new d(e.longBylineText):null,this.thumbnails=S.fromResponse(e.thumbnail),this.video_count=new d(e.videoCountText),this.video_count_short=new d(e.videoCountShortText),this.endpoint=new T(e.navigationEndpoint),this.secondary_endpoint=new T(e.secondaryNavigationEndpoint),this.thumbnail_overlays=f.parseArray(e.thumbnailOverlays)}};s(ku,"GridMix");ku.type="GridMix";var xx=ku;var Pu=class extends c{constructor(e){var t;super();let i=(t=e.thumbnailOverlays.find(r=>r.hasOwnProperty("thumbnailOverlayTimeStatusRenderer")))===null||t===void 0?void 0:t.thumbnailOverlayTimeStatusRenderer;this.id=e.videoId,this.title=new d(e.title),this.thumbnails=S.fromResponse(e.thumbnail),this.duration=e.lengthText?new d(e.lengthText):i!=null&&i.text?new d(i.text):null,this.endpoint=new T(e.navigationEndpoint),this.badges=f.parseArray(e.badges,gt),this.metadata=new d(e.metadata),this.thumbnail_overlays=f.parseArray(e.thumbnailOverlays)}};s(Pu,"GridMovie");Pu.type="GridMovie";var Tx=Pu;var Nu=class extends c{constructor(e){var t;super(),this.id=e.playlistId,this.title=new d(e.title),e.shortBylineText&&(this.author=new W(e.shortBylineText,e.ownerBadges)),this.badges=f.parseArray(e.ownerBadges),this.endpoint=new T(e.navigationEndpoint),this.view_playlist=new d(e.viewPlaylistText),this.thumbnails=S.fromResponse(e.thumbnail),this.thumbnail_renderer=f.parseItem(e.thumbnailRenderer),this.sidebar_thumbnails=[].concat(...((t=e.sidebarThumbnails)===null||t===void 0?void 0:t.map(i=>S.fromResponse(i)))||[])||null,this.video_count=new d(e.thumbnailText),this.video_count_short=new d(e.videoCountShortText)}};s(Nu,"GridPlaylist");Nu.type="GridPlaylist";var Lm=Nu;var zi=class extends c{constructor(e){super(),this.thumbnail=S.fromResponse(e.thumbnail)}};s(zi,"ShowCustomThumbnail");zi.type="ShowCustomThumbnail";var Mu=class extends c{constructor(e){super(),Reflect.has(e,"text")&&(this.text=new d(e.text)),Reflect.has(e,"icon")&&Reflect.has(e.icon,"iconType")&&(this.icon_type=e.icon.iconType)}};s(Mu,"ThumbnailOverlayBottomPanel");Mu.type="ThumbnailOverlayBottomPanel";var Dm=Mu;var to=class extends c{constructor(e){super(),this.title=new d(e.title),this.thumbnail_renderer=j.parseItem(e.thumbnailRenderer,zi),this.endpoint=new T(e.navigationEndpoint),this.long_byline_text=new d(e.longBylineText),this.thumbnail_overlays=j.parseArray(e.thumbnailOverlays,Dm),this.author=new W(e.shortBylineText,void 0)}};s(to,"GridShow");to.type="GridShow";var Au=class extends c{constructor(e){var t;super();let i=(t=e.thumbnailOverlays.find(r=>r.hasOwnProperty("thumbnailOverlayTimeStatusRenderer")))===null||t===void 0?void 0:t.thumbnailOverlayTimeStatusRenderer;this.id=e.videoId,this.title=new d(e.title),this.thumbnails=S.fromResponse(e.thumbnail),this.thumbnail_overlays=f.parseArray(e.thumbnailOverlays),this.rich_thumbnail=e.richThumbnail&&f.parseItem(e.richThumbnail),this.published=new d(e.publishedTimeText),this.duration=e.lengthText?new d(e.lengthText):i!=null&&i.text?new d(i.text):null,this.author=e.shortBylineText&&new W(e.shortBylineText,e.ownerBadges),this.views=new d(e.viewCountText),this.short_view_count=new d(e.shortViewCountText),this.endpoint=new T(e.navigationEndpoint),this.menu=f.parseItem(e.menu,ee)}};s(Au,"GridVideo");Au.type="GridVideo";var jm=Au;var Vu=class extends c{constructor(e){super(),this.expander_item={title:new d(e.expanderItem.guideEntryRenderer.formattedTitle).toString(),icon_type:e.expanderItem.guideEntryRenderer.icon.iconType},this.collapser_item={title:new d(e.collapserItem.guideEntryRenderer.formattedTitle).toString(),icon_type:e.collapserItem.guideEntryRenderer.icon.iconType},this.expandable_items=j.parseArray(e.expandableItems)}};s(Vu,"GuideCollapsibleEntry");Vu.type="GuideCollapsibleEntry";var Ix=Vu;var Ru=class extends c{constructor(e){super(),this.header_entry=j.parseItem(e.headerEntry),this.expander_icon=e.expanderIcon.iconType,this.collapser_icon=e.collapserIcon.iconType,this.section_items=j.parseArray(e.sectionItems)}};s(Ru,"GuideCollapsibleSectionEntry");Ru.type="GuideCollapsibleSectionEntry";var Sx=Ru;var Fu=class extends c{constructor(e){var t;super(),this.title=new d(e.formattedTitle),this.endpoint=new T(e.navigationEndpoint||e.serviceEndpoint),!((t=e.icon)===null||t===void 0)&&t.iconType&&(this.icon_type=e.icon.iconType),e.thumbnail&&(this.thumbnails=S.fromResponse(e.thumbnail)),e.badges&&(this.badges=e.badges),this.is_primary=!!e.isPrimary}};s(Fu,"GuideEntry");Fu.type="GuideEntry";var Ym=Fu;var Ou=class extends Ym{constructor(e){super(e.entryRenderer.guideEntryRenderer),this.always_show=!!e.alwaysShow}};s(Ou,"GuideDownloadsEntry");Ou.type="GuideDownloadsEntry";var Cx=Ou;var Bu=class extends c{constructor(e){super(),e.formattedTitle&&(this.title=new d(e.formattedTitle)),this.items=j.parseArray(e.items)}};s(Bu,"GuideSection");Bu.type="GuideSection";var sr=Bu;var Lu=class extends sr{};s(Lu,"GuideSubscriptionsSection");Lu.type="GuideSubscriptionsSection";var Um=Lu;var Du=class extends c{constructor(e){super(),this.hashtag=new d(e.hashtag),this.hashtag_info=new d(e.hashtagInfoText)}};s(Du,"HashtagHeader");Du.type="HashtagHeader";var Wm=Du;var ju=class extends c{constructor(e){super(),this.thumbnails=S.fromResponse(e.thumbnail),this.on_tap_endpoint=new T(e.onTap)}};s(ju,"HeroPlaylistThumbnail");ju.type="HeroPlaylistThumbnail";var Ex=ju;var Yu=class{constructor(e){e.thumbnail&&(this.thumbnail={image:e.thumbnail.image.sources,endpoint:new T(e.thumbnail.onTap),on_long_press_endpoint:new T(e.thumbnail.onLongPress),content_mode:e.thumbnail.contentMode,crop_options:e.thumbnail.cropOptions}),this.background_image={image:e.backgroundImage.image.sources,gradient_image:e.backgroundImage.gradientImage.sources},this.strapline=e.strapline,this.title=e.title,this.description=e.description,this.cta={icon_name:e.cta.iconName,title:e.cta.title,endpoint:new T(e.cta.onTap),accessibility_text:e.cta.accessibilityText,state:e.cta.state},this.text_on_tap_endpoint=new T(e.textOnTap)}};s(Yu,"Panel");Yu.type="Panel";var Uu=class extends c{constructor(e){super(),this.panels=e.highlightsCarousel.panels.map(t=>new Yu(t))}};s(Uu,"HighlightsCarousel");Uu.type="HighlightsCarousel";var Wu=Uu;var Gu=class extends c{constructor(e){super(),this.suggestion=new d(e.suggestion),this.endpoint=new T(e.navigationEndpoint),this.icon_type=e.icon.iconType,e.serviceEndpoint&&(this.service_endpoint=new T(e.serviceEndpoint))}};s(Gu,"SearchSuggestion");Gu.type="SearchSuggestion";var Gm=Gu;var Ju=class extends Gm{constructor(e){super(e)}};s(Ju,"HistorySuggestion");Ju.type="HistorySuggestion";var kx=Ju;var Hu=class extends c{constructor(e){super(),this.visible_item_count=e.visibleItemCount,this.items=f.parseArray(e.items)}get contents(){return this.items}};s(Hu,"HorizontalList");Hu.type="HorizontalList";var Px=Hu;var zu=class extends c{constructor(e){super(),this.items=f.parseArray(e.items),this.previous_button=f.parseItem(e.previousButton,M),this.next_button=f.parseItem(e.nextButton,M)}get contents(){return this.items}};s(zu,"HorizontalMovieList");zu.type="HorizontalMovieList";var Nx=zu;var Ku=class extends c{constructor(e){var t;super(),this.icon_type=(t=e.icon)===null||t===void 0?void 0:t.iconType,e.tooltip&&(this.tooltip=new d(e.tooltip).toString()),this.endpoint=new T(e.navigationEndpoint)}};s(Ku,"IconLink");Ku.type="IconLink";var Jm=Ku;var Ki=class extends c{constructor(e){var t;super(),this.title=new d(e.title),this.source=new d(e.source),this.paragraphs=e.paragraphs.map(i=>new d(i)),this.thumbnail=S.fromResponse(e.thumbnail),this.source_endpoint=new T(e.sourceEndpoint),this.truncate_paragraphs=!!e.truncateParagraphs,this.background=e.background,!((t=e.inlineLinkIcon)===null||t===void 0)&&t.iconType&&(this.inline_link_icon_type=e.inlineLinkIcon.iconType)}};s(Ki,"InfoPanelContent");Ki.type="InfoPanelContent";var io=class extends c{constructor(e){var t;super(),this.title=new d(e.title),this.menu=f.parseItem(e.menu,ee),this.content=f.parseItem(e.content,Ki),this.background=e.background,!((t=e.icon)===null||t===void 0)&&t.iconType&&(this.icon_type=e.icon.iconType)}};s(io,"InfoPanelContainer");io.type="InfoPanelContainer";var qu=class extends c{constructor(e){super(),this.header_type=e.type,this.title=new d(e.title),this.description=new d(e.description),this.metadata=new d(e.metadata),this.badges=f.parseArray(e.badges,gt),this.box_art=S.fromResponse(e.boxArt),this.banner=S.fromResponse(e.banner),this.buttons=f.parseArray(e.buttons,[ft,M]),this.auto_generated=new d(e.autoGenerated)}};s(qu,"InteractiveTabbedHeader");qu.type="InteractiveTabbedHeader";var Hm=qu;var $u=class extends c{constructor(e){super(),this.title=new d(e.title)}};s($u,"ItemSectionHeader");$u.type="ItemSectionHeader";var zm=$u;var Xu=class extends c{constructor(e){super(),this.title=new d(e.title),this.selected=e.selected||!1,this.endpoint=new T(e.endpoint)}};s(Xu,"ItemSectionTab");Xu.type="Tab";var Km=Xu;var Qu=class extends c{constructor(e){super(),this.title=new d(e.title),this.tabs=f.parseArray(e.tabs,Km),e.endItems&&(this.end_items=f.parseArray(e.endItems))}};s(Qu,"ItemSectionTabbedHeader");Qu.type="ItemSectionTabbedHeader";var qm=Qu;var Zu=class extends c{constructor(e){var t,i,r;super(),this.header=f.parseItem(e.header,[er,zm,qm]),this.contents=f.parse(e.contents,!0),(e.targetId||e.sectionIdentifier)&&(this.target_id=(e==null?void 0:e.target_id)||(e==null?void 0:e.sectionIdentifier)),e.continuations&&(this.continuation=(r=(i=(t=e.continuations)===null||t===void 0?void 0:t.at(0))===null||i===void 0?void 0:i.nextContinuationData)===null||r===void 0?void 0:r.continuation)}};s(Zu,"ItemSection");Zu.type="ItemSection";var Re=Zu;var el=class extends c{constructor(e){var t;super(),this.target={video_id:e.target.videoId},this.like_status=e.likeStatus,this.likes_allowed=e.likesAllowed,e.serviceEndpoints&&(this.endpoints=(t=e.serviceEndpoints)===null||t===void 0?void 0:t.map(i=>new T(i)))}};s(el,"LikeButton");el.type="LikeButton";var Mx=el;var tl=class extends c{constructor(e){var t,i;super(),this.header=f.parseItem(e.header),this.initial_display_state=e.initialDisplayState,this.continuation=(i=(t=e.continuations[0])===null||t===void 0?void 0:t.reloadContinuationData)===null||i===void 0?void 0:i.continuation,this.client_messages={reconnect_message:new d(e.clientMessages.reconnectMessage),unable_to_reconnect_message:new d(e.clientMessages.unableToReconnectMessage),fatal_error:new d(e.clientMessages.fatalError),reconnected_message:new d(e.clientMessages.reconnectedMessage),generic_error:new d(e.clientMessages.genericError)},this.is_replay=e.isReplay||!1}};s(tl,"LiveChat");tl.type="LiveChat";var $m=tl;var il=class extends c{constructor(e){var t;super(),this.text=new d(e.text).toString(),this.icon_type=(t=e.icon)===null||t===void 0?void 0:t.iconType,this.context_menu_button=f.parseItem(e.contextMenuButton,M)}};s(il,"LiveChatBannerHeader");il.type="LiveChatBannerHeader";var Xm=il;var nl=class extends c{constructor(e){super(),this.header=f.parseItem(e.header,Xm),this.contents=f.parseItem(e.contents),this.action_id=e.actionId,this.viewer_is_creator=e.viewerIsCreator,this.target_id=e.targetId,this.is_stackable=e.isStackable,this.background_type=e.backgroundType}};s(nl,"LiveChatBanner");nl.type="LiveChatBanner";var Qm=nl;var ol=class extends c{constructor(e){super(),this.banner=f.parseItem(e.bannerRenderer,Qm)}};s(ol,"AddBannerToLiveChatCommand");ol.type="AddBannerToLiveChatCommand";var Ax=ol;var rl=class extends c{constructor(e){super(),this.item=f.parseItem(e.item),this.client_id=e.clientId||null}};s(rl,"AddChatItemAction");rl.type="AddChatItemAction";var Zm=rl;var sl=class extends c{constructor(e){super(),this.item=f.parseItem(e.item),this.duration_sec=e.durationSec}};s(sl,"AddLiveChatTickerItemAction");sl.type="AddLiveChatTickerItemAction";var Vx=sl;var al=class extends c{constructor(e){super(),this.client_assigned_id=e.clientAssignedId}};s(al,"DimChatItemAction");al.type="DimChatItemAction";var Rx=al;var ul=class extends c{constructor(e){super(),this.menu_endpoint=new T(e.contextMenuEndpoint),this.moderation_buttons=f.parseArray(e.moderationButtons,[M]),this.auto_moderated_item=f.parseItem(e.autoModeratedItem),this.header_text=new d(e.headerText),this.timestamp=Math.floor(parseInt(e.timestampUsec)/1e3),this.id=e.id}};s(ul,"LiveChatAutoModMessage");ul.type="LiveChatAutoModMessage";var Fx=ul;var ll=class extends c{constructor(e){super(),this.poll_question=new d(e.pollQuestion),this.author_photo=S.fromResponse(e.authorPhoto),this.choices=e.pollChoices.map(t=>({option_id:t.pollOptionId,text:new d(t.text).toString()})),this.collapsed_state_entity_key=e.collapsedStateEntityKey,this.live_chat_poll_state_entity_key=e.liveChatPollStateEntityKey,this.context_menu_button=f.parseItem(e.contextMenuButton)}};s(ll,"LiveChatBannerPoll");ll.type="LiveChatBannerPoll";var Ox=ll;var cl=class extends c{constructor(e){super(),this.id=e.id,this.timestamp=Math.floor(parseInt(e.timestampUsec)/1e3),this.header_subtext=new d(e.headerSubtext),this.author=new W(e.authorName,e.authorBadges,e.authorPhoto,e.authorExternalChannelId),this.menu_endpoint=new T(e.contextMenuEndpoint)}};s(cl,"LiveChatMembershipItem");cl.type="LiveChatMembershipItem";var Bx=cl;var dl=class extends c{constructor(e){super(),this.message=new d(e.message),this.author=new W(e.authorName,e.authorBadges,e.authorPhoto,e.authorExternalChannelId),this.header_background_color=e.headerBackgroundColor,this.header_text_color=e.headerTextColor,this.body_background_color=e.bodyBackgroundColor,this.body_text_color=e.bodyTextColor,this.purchase_amount=new d(e.purchaseAmountText).toString(),this.menu_endpoint=new T(e.contextMenuEndpoint),this.timestamp=Math.floor(parseInt(e.timestampUsec)/1e3),this.timestamp_text=new d(e.timestampText).toString(),this.id=e.id}};s(dl,"LiveChatPaidMessage");dl.type="LiveChatPaidMessage";var Lx=dl;var pl=class extends c{constructor(e){super(),this.id=e.id,this.author=new W(e.authorName,e.authorBadges,e.authorPhoto,e.authorExternalChannelId),this.money_chip_background_color=e.moneyChipBackgroundColor,this.money_chip_text_color=e.moneyChipTextColor,this.background_color=e.backgroundColor,this.author_name_text_color=e.authorNameTextColor,this.sticker=S.fromResponse(e.sticker),this.purchase_amount=new d(e.purchaseAmountText).toString(),this.menu_endpoint=new T(e.contextMenuEndpoint),this.context_menu=this.menu_endpoint,this.timestamp=Math.floor(parseInt(e.timestampUsec)/1e3)}};s(pl,"LiveChatPaidSticker");pl.type="LiveChatPaidSticker";var Dx=pl;var fl=class extends c{constructor(e){super(),this.id=e.id,this.timestamp=Math.floor(parseInt(e.timestampUsec)/1e3)}};s(fl,"LiveChatPlaceholderItem");fl.type="LiveChatPlaceholderItem";var jx=fl;var hl=class extends c{constructor(e){super(),this.title=e.title,this.accessibility_title=e.accessibilityTitle,this.thumbnail=S.fromResponse(e.thumbnail),this.price=e.price,this.vendor_name=e.vendorName,this.from_vendor_text=e.fromVendorText,this.information_button=f.parseItem(e.informationButton),this.endpoint=new T(e.onClickCommand),this.creator_message=e.creatorMessage,this.creator_name=e.creatorName,this.author_photo=S.fromResponse(e.authorPhoto),this.information_dialog=f.parseItem(e.informationDialog),this.is_verified=e.isVerified,this.creator_custom_message=new d(e.creatorCustomMessage)}};s(hl,"LiveChatProductItem");hl.type="LiveChatProductItem";var Yx=hl;var e_=class extends c{constructor(e){var t;super(),this.message=new d(e.message),this.icon_type=(t=e==null?void 0:e.icon)===null||t===void 0?void 0:t.iconType}};s(e_,"LiveChatRestrictedParticipation");var Ux=e_;var no=class extends c{constructor(e){super(),this.message=new d(e.message),this.inline_action_buttons=f.parseArray(e.inlineActionButtons,[M]),this.timestamp=Math.floor(parseInt(e.timestampUsec)/1e3),this.id=e.id}};s(no,"LiveChatMessageBase");no.type="LiveChatMessageBase";var ml=class extends no{constructor(e){super(e),this.author=new W(e.authorName,e.authorBadges,e.authorPhoto,e.authorExternalChannelId),this.menu_endpoint=new T(e.contextMenuEndpoint)}};s(ml,"LiveChatTextMessage");ml.type="LiveChatTextMessage";var Wx=ml;var _l=class extends c{constructor(e){var t,i;super(),this.author=new W(e.authorName,e.authorBadges,e.authorPhoto,e.authorExternalChannelId),this.amount=new d(e.amount),this.duration_sec=e.durationSec,this.full_duration_sec=e.fullDurationSec,this.show_item=f.parseItem((i=(t=e.showItemEndpoint)===null||t===void 0?void 0:t.showLiveChatItemEndpoint)===null||i===void 0?void 0:i.renderer),this.show_item_endpoint=new T(e.showItemEndpoint),this.id=e.id}};s(_l,"LiveChatTickerPaidMessageItem");_l.type="LiveChatTickerPaidMessageItem";var t_=_l;var vl=class extends t_{};s(vl,"LiveChatTickerPaidStickerItem");vl.type="LiveChatTickerPaidStickerItem";var Gx=vl;var yl=class extends c{constructor(e){super(),this.id=e.id,this.detail=new d(e.detailText),this.author=new W(e.authorName,e.authorBadges,e.sponsorPhoto,e.authorExternalChannelId),this.duration_sec=e.durationSec}};s(yl,"LiveChatTickerSponsorItem");yl.type="LiveChatTickerSponsorItem";var Jx=yl;var bl=class extends no{constructor(e){super(e),this.icon_type=e.icon.iconType,this.action_button=f.parseItem(e.actionButton)}};s(bl,"LiveChatViewerEngagementMessage");bl.type="LiveChatViewerEngagementMessage";var Hx=bl;var wl=class extends c{constructor(e){super(),this.poll_question=new d(e.pollQuestion),this.thumbnails=S.fromResponse(e.thumbnail),this.metadata=new d(e.metadataText),this.live_chat_poll_type=e.liveChatPollType,this.context_menu_button=f.parseItem(e.contextMenuButton)}};s(wl,"PollHeader");wl.type="PollHeader";var zx=wl;var gl=class extends c{constructor(e){super(),this.id=e.id,this.contents=f.parse(e.contents),this.target_id=e.targetId}};s(gl,"LiveChatActionPanel");gl.type="LiveChatActionPanel";var i_=gl;var xl=class extends c{constructor(e){super(),this.deleted_state_message=new d(e.deletedStateMessage),this.target_item_id=e.targetItemId}};s(xl,"MarkChatItemAsDeletedAction");xl.type="MarkChatItemAsDeletedAction";var Kx=xl;var Tl=class extends c{constructor(e){super(),this.deleted_state_message=new d(e.deletedStateMessage),this.channel_id=e.externalChannelId}};s(Tl,"MarkChatItemsByAuthorAsDeletedAction");Tl.type="MarkChatItemsByAuthorAsDeletedAction";var qx=Tl;var Il=class extends c{constructor(e){super(),this.target_action_id=e.targetActionId}};s(Il,"RemoveBannerForLiveChatCommand");Il.type="RemoveBannerForLiveChatCommand";var $x=Il;var Sl=class extends c{constructor(e){super(),this.target_item_id=e.targetItemId}};s(Sl,"RemoveChatItemAction");Sl.type="RemoveChatItemAction";var Xx=Sl;var Cl=class extends c{constructor(e){super(),this.external_channel_id=e.externalChannelId}};s(Cl,"RemoveChatItemByAuthorAction");Cl.type="RemoveChatItemByAuthorAction";var Qx=Cl;var El=class extends c{constructor(e){super(),this.target_item_id=e.targetItemId,this.replacement_item=f.parseItem(e.replacementItem)}};s(El,"ReplaceChatItemAction");El.type="ReplaceChatItemAction";var Zx=El;var kl=class extends c{constructor(e){var t;super(),this.actions=f.parseArray((t=e.actions)===null||t===void 0?void 0:t.map(i=>(delete i.clickTrackingParams,i))),this.video_offset_time_msec=e.videoOffsetTimeMsec}};s(kl,"ReplayChatItemAction");kl.type="ReplayChatItemAction";var eT=kl;var Pl=class extends c{constructor(e){super(),this.panel_to_show=f.parseItem(e.panelToShow,i_)}};s(Pl,"ShowLiveChatActionPanelAction");Pl.type="ShowLiveChatActionPanelAction";var tT=Pl;var Nl=class extends c{constructor(e){super(),this.dialog=f.parseItem(e.dialog)}};s(Nl,"ShowLiveChatDialogAction");Nl.type="ShowLiveChatDialogAction";var iT=Nl;var Ml=class extends c{constructor(e){super(),this.tooltip=f.parseItem(e.tooltip)}};s(Ml,"ShowLiveChatTooltipCommand");Ml.type="ShowLiveChatTooltipCommand";var nT=Ml;var Al=class extends c{constructor(e){super(),this.date_text=new d(e.dateText).toString()}};s(Al,"UpdateDateTextAction");Al.type="UpdateDateTextAction";var n_=Al;var Vl=class extends c{constructor(e){super(),this.description=new d(e.description)}};s(Vl,"UpdateDescriptionAction");Vl.type="UpdateDescriptionAction";var o_=Vl;var Rl=class extends c{constructor(e){super(),this.poll_to_update=f.parseItem(e.pollToUpdate)}};s(Rl,"UpdateLiveChatPollAction");Rl.type="UpdateLiveChatPollAction";var oT=Rl;var Fl=class extends c{constructor(e){super(),this.title=new d(e.title)}};s(Fl,"UpdateTitleAction");Fl.type="UpdateTitleAction";var r_=Fl;var Ol=class extends c{constructor(e){super(),this.default_text=new d(e.defaultText).toString(),this.toggled_text=new d(e.toggledText).toString(),this.button_id=e.buttonId}};s(Ol,"UpdateToggleButtonTextAction");Ol.type="UpdateToggleButtonTextAction";var s_=Ol;var Bl=class extends c{constructor(e){super();let t=e.viewCount.videoViewCountRenderer;this.view_count=new d(t.viewCount),this.extra_short_view_count=new d(t.extraShortViewCount),this.is_live=t.isLive}};s(Bl,"UpdateViewershipAction");Bl.type="UpdateViewershipAction";var a_=Bl;var Ll=class extends gt{constructor(e){super(e),this.custom_thumbnail=e.customThumbnail?S.fromResponse(e.customThumbnail):null}};s(Ll,"LiveChatAuthorBadge");Ll.type="LiveChatAuthorBadge";var rT=Ll;var Dl=class extends c{constructor(e){super(),this.confirm_button=f.parseItem(e.confirmButton,M),this.dialog_messages=e.dialogMessages.map(t=>new d(t))}};s(Dl,"LiveChatDialog");Dl.type="LiveChatDialog";var sT=Dl;var jl=class extends c{constructor(e){super(),this.author_name=new d(e.authorName),this.author_photo=S.fromResponse(e.authorPhoto),this.send_button=f.parseItem(e.sendButton,M),this.target_id=e.targetId}};s(jl,"LiveChatMessageInput");jl.type="LiveChatMessageInput";var aT=jl;var Yl=class extends M{constructor(e){super(e)}};s(Yl,"MenuNavigationItem");Yl.type="MenuNavigationItem";var uT=Yl;var Ul=class extends M{constructor(e){super(e)}};s(Ul,"MenuServiceItem");Ul.type="MenuServiceItem";var ar=Ul;var Wl=class extends c{constructor(e){super(),this.has_separator=e.hasSeparator,this.endpoint=new T(e.navigationEndpoint||e.serviceEndpoint)}};s(Wl,"MenuServiceItemDownload");Wl.type="MenuServiceItemDownload";var lT=Wl;var Gl=class extends c{constructor(e){super(),this.header=f.parse(e.header),this.sections=f.parse(e.sections),this.style=e.style}};s(Gl,"MultiPageMenu");Gl.type="MultiPageMenu";var cT=Gl;var Jl=class extends c{constructor(e){super(),this.items=f.parse(e.items)}get contents(){return this.items}};s(Jl,"MultiPageMenuNotificationSection");Jl.type="MultiPageMenuNotificationSection";var dT=Jl;var Hl=class extends c{constructor(e){super()}};s(Hl,"MusicMenuItemDivider");Hl.type="MusicMenuItemDivider";var u_=Hl;var zl=class extends c{constructor(e){var t;super(),this.title=new d((t=e.title.musicMenuTitleRenderer)===null||t===void 0?void 0:t.primaryText).toString(),this.options=f.parseArray(e.options,[Bt,u_])}};s(zl,"MusicMultiSelectMenu");zl.type="MusicMultiSelectMenu";var l_=zl;var Kl=class extends c{constructor(e){super(),this.title=new d(e.title),this.buttons=f.parse(e.buttons)}};s(Kl,"SimpleMenuHeader");Kl.type="SimpleMenuHeader";var c_=Kl;var ql=class extends c{constructor(e){super(),this.title=e.title,this.description=e.description,this.thumbnails=S.fromResponse(e.thumbnail),this.price=e.price,this.vendor_name=e.vendorName,this.button_text=e.buttonText,this.button_accessibility_text=e.buttonAccessibilityText,this.from_vendor_text=e.fromVendorText,this.additional_fees_text=e.additionalFeesText,this.region_format=e.regionFormat,this.endpoint=new T(e.buttonCommand)}};s(ql,"MerchandiseItem");ql.type="MerchandiseItem";var pT=ql;var $l=class extends c{constructor(e){super(),this.title=e.title,this.menu=f.parseItem(e.actionButton),this.items=f.parseArray(e.items)}get contents(){return this.items}};s($l,"MerchandiseShelf");$l.type="MerchandiseShelf";var d_=$l;var Xl=class extends c{constructor(e){super(),this.title=new d(e.title),this.contents=e.contents.map(t=>new d(t))}};s(Xl,"MetadataRow");Xl.type="MetadataRow";var fT=Xl;var Ql=class extends c{constructor(e){super(),this.rows=f.parseArray(e.rows),this.collapsed_item_count=e.collapsedItemCount}};s(Ql,"MetadataRowContainer");Ql.type="MetadataRowContainer";var p_=Ql;var Zl=class extends c{constructor(e){super(),this.content=new d(e.content),this.has_divider_line=e.hasDividerLine}};s(Zl,"MetadataRowHeader");Zl.type="MetadataRowHeader";var hT=Zl;var ec=class extends c{constructor(e){super(),this.section_list=f.parseItem(e)}};s(ec,"MetadataScreen");ec.type="MetadataScreen";var mT=ec;var tc=class extends c{constructor(e){super(),this.url_canonical=e.urlCanonical,this.title=e.title,this.description=e.description,this.thumbnail=e.thumbnail?S.fromResponse(e.thumbnail):null,this.site_name=e.siteName,this.app_name=e.appName,this.android_package=e.androidPackage,this.ios_app_store_id=e.iosAppStoreId,this.ios_app_arguments=e.iosAppArguments,this.og_type=e.ogType,this.url_applinks_web=e.urlApplinksWeb,this.url_applinks_ios=e.urlApplinksIos,this.url_applinks_android=e.urlApplinksAndroid,this.url_twitter_ios=e.urlTwitterIos,this.url_twitter_android=e.urlTwitterAndroid,this.twitter_card_type=e.twitterCardType,this.twitter_site_handle=e.twitterSiteHandle,this.schema_dot_org_type=e.schemaDotOrgType,this.noindex=e.noindex,this.is_unlisted=e.unlisted,this.is_family_safe=e.familySafe,this.tags=e.tags,this.available_countries=e.availableCountries}};s(tc,"MicroformatData");tc.type="MicroformatData";var vi=tc;var ic=class extends _i{constructor(e){super(e)}};s(ic,"Mix");ic.type="Mix";var _T=ic;var nc=class extends c{constructor(e){var t,i,r;super();let a=((t=e.thumbnailOverlays.find(l=>l.thumbnailOverlayTimeStatusRenderer))===null||t===void 0?void 0:t.thumbnailOverlayTimeStatusRenderer.text)||"N/A";this.id=e.videoId,this.title=new d(e.title),this.description_snippet=e.descriptionSnippet?new d(e.descriptionSnippet):null,this.top_metadata_items=new d(e.topMetadataItems),this.thumbnails=S.fromResponse(e.thumbnail),this.thumbnail_overlays=f.parseArray(e.thumbnailOverlays),this.author=new W(e.longBylineText,e.ownerBadges,(r=(i=e.channelThumbnailSupportedRenderers)===null||i===void 0?void 0:i.channelThumbnailWithLinkRenderer)===null||r===void 0?void 0:r.thumbnail),this.duration={text:e.lengthText?new d(e.lengthText).toString():new d(a).toString(),seconds:dt(e.lengthText?new d(e.lengthText).toString():new d(a).toString())},this.endpoint=new T(e.navigationEndpoint),this.badges=f.parse(e.badges),this.use_vertical_poster=e.useVerticalPoster,this.show_action_menu=e.showActionMenu,this.menu=f.parseItem(e.menu)}};s(nc,"Movie");nc.type="Movie";var vT=nc;var oc=class extends c{constructor(e){var t;return super(),(t=e.movingThumbnailDetails)===null||t===void 0?void 0:t.thumbnails.map(i=>new S(i)).sort((i,r)=>r.width-i.width)}};s(oc,"MovingThumbnail");oc.type="MovingThumbnail";var yT=oc;var qi=class extends c{constructor(e){super(),this.title=new d(e.title)}};s(qi,"MusicCardShelfHeaderBasic");qi.type="MusicCardShelfHeaderBasic";var rc=class extends c{constructor(e){super(),this.icon_type=e.icon.iconType,this.label=e.accessibilityData.accessibilityData.label}};s(rc,"MusicInlineBadge");rc.type="MusicInlineBadge";var f_=rc;var sc=class extends c{constructor(e){var t;super(),this.endpoint=new T(e.playNavigationEndpoint),this.play_icon_type=e.playIcon.iconType,this.pause_icon_type=e.pauseIcon.iconType,e.accessibilityPlayData&&(this.play_label=e.accessibilityPlayData.accessibilityData.label),e.accessibilityPlayData&&(this.pause_label=(t=e.accessibilityPauseData)===null||t===void 0?void 0:t.accessibilityData.label),this.icon_color=e.iconColor}};s(sc,"MusicPlayButton");sc.type="MusicPlayButton";var h_=sc;var ac=class extends c{constructor(e){super(),this.content=f.parseItem(e.content,h_),this.content_position=e.contentPosition,this.display_style=e.displayStyle}};s(ac,"MusicItemThumbnailOverlay");ac.type="MusicItemThumbnailOverlay";var yn=ac;var uc=class extends c{constructor(e){super(),this.contents=S.fromResponse(e.thumbnail)}};s(uc,"MusicThumbnail");uc.type="MusicThumbnail";var bn=uc;var $i=class extends c{constructor(e){super(),this.thumbnail=f.parseItem(e.thumbnail,bn),this.title=new d(e.title),this.subtitle=new d(e.subtitle),this.buttons=f.parseArray(e.buttons,M),this.menu=f.parseItem(e.menu,ee),this.on_tap=new T(e.onTap),this.header=f.parseItem(e.header,qi),Reflect.has(e,"endIcon")&&Reflect.has(e.endIcon,"iconType")&&(this.end_icon_type=e.endIcon.iconType),this.subtitle_badges=f.parseArray(e.subtitleBadges,f_),this.thumbnail_overlay=f.parseItem(e.thumbnailOverlay,yn),Reflect.has(e,"contents")&&(this.contents=f.parseArray(e.contents))}};s($i,"MusicCardShelf");$i.type="MusicCardShelf";var lc=class extends c{constructor(e){var t,i,r,a,l,h,v,_,p,b,I,C,k,F,V,D,Y,B,w,ye,Ke,Ie;switch(super(),this.title=new d(e.title),this.endpoint=new T(e.navigationEndpoint),this.id=((i=(t=this.endpoint)===null||t===void 0?void 0:t.payload)===null||i===void 0?void 0:i.browseId)||((a=(r=this.endpoint)===null||r===void 0?void 0:r.payload)===null||a===void 0?void 0:a.videoId),this.subtitle=new d(e.subtitle),this.badges=f.parse(e.subtitleBadges),(_=(v=(h=(l=this.endpoint)===null||l===void 0?void 0:l.payload)===null||h===void 0?void 0:h.browseEndpointContextSupportedConfigs)===null||v===void 0?void 0:v.browseEndpointContextMusicConfig)===null||_===void 0?void 0:_.pageType){case"MUSIC_PAGE_TYPE_ARTIST":this.item_type="artist";break;case"MUSIC_PAGE_TYPE_PLAYLIST":this.item_type="playlist";break;case"MUSIC_PAGE_TYPE_ALBUM":this.item_type="album";break;default:((b=(p=this.endpoint)===null||p===void 0?void 0:p.metadata)===null||b===void 0?void 0:b.api_url)==="/next"?this.item_type="endpoint":!((I=this.subtitle.runs)===null||I===void 0)&&I[0]?this.subtitle.runs[0].text!=="Song"?this.item_type="video":this.item_type="song":this.endpoint?this.item_type="endpoint":this.item_type="unknown";break}if(this.item_type=="artist")this.subscribers=((k=(C=this.subtitle.runs)===null||C===void 0?void 0:C.find(ne=>/^(\d*\.)?\d+[M|K]? subscribers?$/i.test(ne.text)))===null||k===void 0?void 0:k.text)||"";else if(this.item_type=="playlist"){let ne=(F=this.subtitle.runs)===null||F===void 0?void 0:F.find(J=>J.text.match(/\d+ songs|song/));this.item_count=ne?ne.text:null}else if(this.item_type=="album"){let ne=(V=this.subtitle.runs)===null||V===void 0?void 0:V.filter(J=>{var ae,ue;return(ue=(ae=J.endpoint)===null||ae===void 0?void 0:ae.payload)===null||ue===void 0?void 0:ue.browseId.startsWith("UC")});ne&&(this.artists=ne.map(J=>{var ae,ue;return{name:J.text,channel_id:(ue=(ae=J.endpoint)===null||ae===void 0?void 0:ae.payload)===null||ue===void 0?void 0:ue.browseId,endpoint:J.endpoint}})),this.year=(D=this.subtitle.runs)===null||D===void 0?void 0:D.slice(-1)[0].text,isNaN(Number(this.year))&&delete this.year}else if(this.item_type=="video"){this.views=((B=(Y=this===null||this===void 0?void 0:this.subtitle.runs)===null||Y===void 0?void 0:Y.find(J=>J==null?void 0:J.text.match(/(.*?) views/)))===null||B===void 0?void 0:B.text)||"N/A";let ne=(w=this.subtitle.runs)===null||w===void 0?void 0:w.find(J=>{var ae,ue,at;return(at=(ue=(ae=J.endpoint)===null||ae===void 0?void 0:ae.payload)===null||ue===void 0?void 0:ue.browseId)===null||at===void 0?void 0:at.startsWith("UC")});ne&&(this.author={name:ne==null?void 0:ne.text,channel_id:(Ke=(ye=ne==null?void 0:ne.endpoint)===null||ye===void 0?void 0:ye.payload)===null||Ke===void 0?void 0:Ke.browseId,endpoint:ne==null?void 0:ne.endpoint})}else if(this.item_type=="song"){let ne=(Ie=this.subtitle.runs)===null||Ie===void 0?void 0:Ie.filter(J=>{var ae,ue;return(ue=(ae=J.endpoint)===null||ae===void 0?void 0:ae.payload)===null||ue===void 0?void 0:ue.browseId.startsWith("UC")});ne&&(this.artists=ne.map(J=>{var ae,ue;return{name:J==null?void 0:J.text,channel_id:(ue=(ae=J==null?void 0:J.endpoint)===null||ae===void 0?void 0:ae.payload)===null||ue===void 0?void 0:ue.browseId,endpoint:J==null?void 0:J.endpoint}}))}this.thumbnail=S.fromResponse(e.thumbnailRenderer.musicThumbnailRenderer.thumbnail),this.thumbnail_overlay=f.parseItem(e.thumbnailOverlay,yn),this.menu=f.parseItem(e.menu,ee)}};s(lc,"MusicTwoRowItem");lc.type="MusicTwoRowItem";var ur=lc;var cc=class extends c{constructor(e){super(),this.title=new d(e.text),this.display_priority=e.displayPriority}};s(cc,"MusicResponsiveListItemFlexColumn");cc.type="musicResponsiveListItemFlexColumnRenderer";var m_=cc;var dc=class extends c{constructor(e){super(),this.title=new d(e.text),this.display_priority=e.displayPriority}};s(dc,"MusicResponsiveListItemFixedColumn");dc.type="musicResponsiveListItemFlexColumnRenderer";var __=dc;var Ry=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},de=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},yi,Ce,pc,fc,gT,xT,bT,wT,TT,IT,ST,CT,hc=class extends c{constructor(e){var t,i,r,a,l,h,v;switch(super(),yi.add(this),Ce.set(this,void 0),pc.set(this,void 0),fc.set(this,void 0),Ry(this,Ce,f.parseArray(e.flexColumns,m_),"f"),Ry(this,pc,f.parseArray(e.fixedColumns,__),"f"),Ry(this,fc,{video_id:((t=e==null?void 0:e.playlistItemData)===null||t===void 0?void 0:t.videoId)||null,playlist_set_video_id:((i=e==null?void 0:e.playlistItemData)===null||i===void 0?void 0:i.playlistSetVideoId)||null},"f"),this.endpoint=e.navigationEndpoint?new T(e.navigationEndpoint):null,(h=(l=(a=(r=this.endpoint)===null||r===void 0?void 0:r.payload)===null||a===void 0?void 0:a.browseEndpointContextSupportedConfigs)===null||l===void 0?void 0:l.browseEndpointContextMusicConfig)===null||h===void 0?void 0:h.pageType){case"MUSIC_PAGE_TYPE_ALBUM":this.item_type="album",de(this,yi,"m",ST).call(this);break;case"MUSIC_PAGE_TYPE_PLAYLIST":this.item_type="playlist",de(this,yi,"m",CT).call(this);break;case"MUSIC_PAGE_TYPE_ARTIST":case"MUSIC_PAGE_TYPE_USER_CHANNEL":this.item_type="artist",de(this,yi,"m",TT).call(this);break;case"MUSIC_PAGE_TYPE_LIBRARY_ARTIST":this.item_type="library_artist",de(this,yi,"m",IT).call(this);break;default:de(this,Ce,"f")[1]?de(this,yi,"m",xT).call(this):de(this,yi,"m",gT).call(this);break}e.index&&(this.index=new d(e.index)),this.thumbnails=e.thumbnail?S.fromResponse((v=e.thumbnail.musicThumbnailRenderer)===null||v===void 0?void 0:v.thumbnail):[],this.badges=f.parseArray(e.badges),this.menu=f.parseItem(e.menu,ee),this.overlay=f.parseItem(e.overlay,yn)}};s(hc,"MusicResponsiveListItem");Ce=new WeakMap,pc=new WeakMap,fc=new WeakMap,yi=new WeakSet,gT=s(function(){this.title=de(this,Ce,"f")[0].key("title").instanceof(d).toString(),this.endpoint?this.item_type="endpoint":this.item_type="unknown"},"_MusicResponsiveListItem_parseOther"),xT=s(function(){var e;((e=de(this,Ce,"f")[1].key("title").instanceof(d).runs)===null||e===void 0?void 0:e.some(i=>i.text.match(/(.*?) views/)))?(this.item_type="video",de(this,yi,"m",wT).call(this)):(this.item_type="song",de(this,yi,"m",bT).call(this))},"_MusicResponsiveListItem_parseVideoOrSong"),bT=s(function(){var e,t,i,r,a,l,h,v,_,p,b,I,C;this.id=de(this,fc,"f").video_id||((t=(e=this.endpoint)===null||e===void 0?void 0:e.payload)===null||t===void 0?void 0:t.videoId),this.title=de(this,Ce,"f")[0].key("title").instanceof(d).toString();let k=((r=(i=de(this,Ce,"f")[1].key("title").instanceof(d).runs)===null||i===void 0?void 0:i.find(D=>/^\d+$/.test(D.text.replace(/:/g,""))))===null||r===void 0?void 0:r.text)||((h=(l=(a=de(this,pc,"f"))===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.key("title").instanceof(d))===null||h===void 0?void 0:h.toString());k&&(this.duration={text:k,seconds:dt(k)});let F=((v=de(this,Ce,"f")[1].key("title").instanceof(d).runs)===null||v===void 0?void 0:v.find(D=>{var Y,B;return(B=(Y=Reflect.get(D,"endpoint"))===null||Y===void 0?void 0:Y.payload)===null||B===void 0?void 0:B.browseId.startsWith("MPR")}))||((p=(_=de(this,Ce,"f")[2])===null||_===void 0?void 0:_.key("title").instanceof(d).runs)===null||p===void 0?void 0:p.find(D=>{var Y,B;return(B=(Y=Reflect.get(D,"endpoint"))===null||Y===void 0?void 0:Y.payload)===null||B===void 0?void 0:B.browseId.startsWith("MPR")}));F&&(this.album={id:(I=(b=F.endpoint)===null||b===void 0?void 0:b.payload)===null||I===void 0?void 0:I.browseId,name:F.text,endpoint:F.endpoint});let V=(C=de(this,Ce,"f")[1].key("title").instanceof(d).runs)===null||C===void 0?void 0:C.filter(D=>{var Y,B;return(B=(Y=Reflect.get(D,"endpoint"))===null||Y===void 0?void 0:Y.payload)===null||B===void 0?void 0:B.browseId.startsWith("UC")});V&&(this.artists=V.map(D=>{var Y,B;return{name:D.text,channel_id:(B=(Y=D.endpoint)===null||Y===void 0?void 0:Y.payload)===null||B===void 0?void 0:B.browseId,endpoint:D.endpoint}}))},"_MusicResponsiveListItem_parseSong"),wT=s(function(){var e,t,i,r,a,l,h,v;this.id=de(this,fc,"f").video_id,this.title=de(this,Ce,"f")[0].key("title").instanceof(d).toString(),this.views=(t=(e=de(this,Ce,"f")[1].key("title").instanceof(d).runs)===null||e===void 0?void 0:e.find(b=>b.text.match(/(.*?) views/)))===null||t===void 0?void 0:t.text;let _=(i=de(this,Ce,"f")[1].key("title").instanceof(d).runs)===null||i===void 0?void 0:i.filter(b=>{var I,C;return(C=(I=Reflect.get(b,"endpoint"))===null||I===void 0?void 0:I.payload)===null||C===void 0?void 0:C.browseId.startsWith("UC")});_&&(this.authors=_.map(b=>{var I,C;return{name:b.text,channel_id:(C=(I=b.endpoint)===null||I===void 0?void 0:I.payload)===null||C===void 0?void 0:C.browseId,endpoint:b.endpoint}}));let p=((a=(r=de(this,Ce,"f")[1].key("title").instanceof(d).runs)===null||r===void 0?void 0:r.find(b=>/^\d+$/.test(b.text.replace(/:/g,""))))===null||a===void 0?void 0:a.text)||((v=(h=(l=de(this,pc,"f")[0])===null||l===void 0?void 0:l.key("title").instanceof(d).runs)===null||h===void 0?void 0:h.find(b=>/^\d+$/.test(b.text.replace(/:/g,""))))===null||v===void 0?void 0:v.text);p&&(this.duration={text:p,seconds:dt(p)})},"_MusicResponsiveListItem_parseVideo"),TT=s(function(){var e,t,i,r;this.id=(t=(e=this.endpoint)===null||e===void 0?void 0:e.payload)===null||t===void 0?void 0:t.browseId,this.name=de(this,Ce,"f")[0].key("title").instanceof(d).toString(),this.subtitle=de(this,Ce,"f")[1].key("title").instanceof(d),this.subscribers=((r=(i=this.subtitle.runs)===null||i===void 0?void 0:i.find(a=>/^(\d*\.)?\d+[M|K]? subscribers?$/i.test(a.text)))===null||r===void 0?void 0:r.text)||""},"_MusicResponsiveListItem_parseArtist"),IT=s(function(){var e,t,i;this.name=de(this,Ce,"f")[0].key("title").instanceof(d).toString(),this.subtitle=de(this,Ce,"f")[1].key("title").instanceof(d),this.song_count=((i=(t=(e=this.subtitle)===null||e===void 0?void 0:e.runs)===null||t===void 0?void 0:t.find(r=>/^\d+(,\d+)? songs?$/i.test(r.text)))===null||i===void 0?void 0:i.text)||""},"_MusicResponsiveListItem_parseLibraryArtist"),ST=s(function(){var e,t,i,r,a,l,h;this.id=(t=(e=this.endpoint)===null||e===void 0?void 0:e.payload)===null||t===void 0?void 0:t.browseId,this.title=de(this,Ce,"f")[0].key("title").instanceof(d).toString();let v=(i=de(this,Ce,"f")[1].key("title").instanceof(d).runs)===null||i===void 0?void 0:i.find(_=>{var p,b;return(b=(p=Reflect.get(_,"endpoint"))===null||p===void 0?void 0:p.payload)===null||b===void 0?void 0:b.browseId.startsWith("UC")});v&&(this.author={name:v.text,channel_id:(a=(r=v.endpoint)===null||r===void 0?void 0:r.payload)===null||a===void 0?void 0:a.browseId,endpoint:v.endpoint}),this.year=(h=(l=de(this,Ce,"f")[1].key("title").instanceof(d).runs)===null||l===void 0?void 0:l.find(_=>/^[12][0-9]{3}$/.test(_.text)))===null||h===void 0?void 0:h.text},"_MusicResponsiveListItem_parseAlbum"),CT=s(function(){var e,t,i,r,a,l;this.id=(t=(e=this.endpoint)===null||e===void 0?void 0:e.payload)===null||t===void 0?void 0:t.browseId,this.title=de(this,Ce,"f")[0].key("title").instanceof(d).toString();let h=(i=de(this,Ce,"f")[1].key("title").instanceof(d).runs)===null||i===void 0?void 0:i.find(_=>_.text.match(/\d+ (song|songs)/));this.item_count=h?h.text:void 0;let v=(r=de(this,Ce,"f")[1].key("title").instanceof(d).runs)===null||r===void 0?void 0:r.find(_=>{var p,b;return(b=(p=Reflect.get(_,"endpoint"))===null||p===void 0?void 0:p.payload)===null||b===void 0?void 0:b.browseId.startsWith("UC")});v&&(this.author={name:v.text,channel_id:(l=(a=v.endpoint)===null||a===void 0?void 0:a.payload)===null||l===void 0?void 0:l.browseId,endpoint:v.endpoint})},"_MusicResponsiveListItem_parsePlaylist");hc.type="MusicResponsiveListItem";var wn=hc;var mc=class extends c{constructor(e){super(),e.strapline&&(this.strapline=new d(e.strapline)),this.title=new d(e.title),e.thumbnail&&(this.thumbnail=f.parseItem(e.thumbnail,bn)),e.moreContentButton&&(this.more_content=f.parseItem(e.moreContentButton,M)),e.endIcons&&(this.end_icons=f.parseArray(e.endIcons,Jm))}};s(mc,"MusicCarouselShelfBasicHeader");mc.type="MusicCarouselShelfBasicHeader";var v_=mc;var _c=class extends c{constructor(e){super(),this.button_text=new d(e.buttonText).toString(),this.endpoint=new T(e.clickCommand)}};s(_c,"MusicNavigationButton");_c.type="MusicNavigationButton";var lr=_c;var vc=class extends c{constructor(e){super(),this.header=f.parseItem(e.header,v_),this.contents=f.parseArray(e.contents,[ur,wn,lr]),this.num_items_per_column=Reflect.has(e,"numItemsPerColumn")?parseInt(e.numItemsPerColumn):null}};s(vc,"MusicCarouselShelf");vc.type="MusicCarouselShelf";var Ge=vc;var yc=class extends c{constructor(e){super(),this.description=new d(e.description),this.max_collapsed_lines&&(this.max_collapsed_lines=e.maxCollapsedLines),this.max_expanded_lines&&(this.max_expanded_lines=e.maxExpandedLines),this.footer=new d(e.footer)}};s(yc,"MusicDescriptionShelf");yc.type="MusicDescriptionShelf";var oo=yc;var bc=class extends c{constructor(e){var t,i,r,a,l,h,v,_,p;super(),this.title=new d(e.title),this.description=new d(e.description),this.subtitle=new d(e.subtitle),this.second_subtitle=new d(e.secondSubtitle),this.year=((i=(t=this.subtitle.runs)===null||t===void 0?void 0:t.find(I=>/^[12][0-9]{3}$/.test(I.text)))===null||i===void 0?void 0:i.text)||"",this.song_count=((a=(r=this.second_subtitle.runs)===null||r===void 0?void 0:r[0])===null||a===void 0?void 0:a.text)||"",this.total_duration=((h=(l=this.second_subtitle.runs)===null||l===void 0?void 0:l[2])===null||h===void 0?void 0:h.text)||"",this.thumbnails=S.fromResponse(e.thumbnail.croppedSquareThumbnailRenderer.thumbnail),this.badges=f.parse(e.subtitleBadges);let b=(v=this.subtitle.runs)===null||v===void 0?void 0:v.find(I=>{var C,k;return(k=(C=I==null?void 0:I.endpoint)===null||C===void 0?void 0:C.payload)===null||k===void 0?void 0:k.browseId.startsWith("UC")});b&&(this.author={name:b.text,channel_id:(p=(_=b.endpoint)===null||_===void 0?void 0:_.payload)===null||p===void 0?void 0:p.browseId,endpoint:b.endpoint}),this.menu=f.parseItem(e.menu)}};s(bc,"MusicDetailHeader");bc.type="MusicDetailHeader";var ro=bc;var wc=class extends c{constructor(e){super(),this.playlist_id=e.playlistId,this.supported_download_states=e.supportedDownloadStates}};s(wc,"MusicDownloadStateBadge");wc.type="MusicDownloadStateBadge";var ET=wc;var gc=class extends c{constructor(e){super(),this.header=f.parseItem(e.header)}};s(gc,"MusicEditablePlaylistDetailHeader");gc.type="MusicEditablePlaylistDetailHeader";var y_=gc;var xc=class extends c{constructor(e){super(),this.element=Reflect.has(e,"elementRenderer")?f.parseItem(e,ir):null}};s(xc,"MusicElementHeader");xc.type="MusicElementHeader";var Tc=xc;var Ic=class extends c{constructor(e){super(),e.header&&(this.header=f.parseItem(e.header)),e.title&&(this.title=new d(e.title))}};s(Ic,"MusicHeader");Ic.type="MusicHeader";var gn=Ic;var Sc=class extends c{constructor(e){super(),this.title=new d(e.title),this.description=new d(e.description),this.thumbnail=f.parseItem(e.thumbnail,bn)}};s(Sc,"MusicImmersiveHeader");Sc.type="MusicImmersiveHeader";var b_=Sc;var Cc=class{constructor(e){this.icon_name=e.iconName,this.endpoint=new T(e.onTap),this.a11y_text=e.a11yText,this.style=e.style}};s(Cc,"ActionButton");Cc.type="ActionButton";var Ec=class{constructor(e){this.image=e.image.image.sources,this.content_mode=e.image.contentMode,this.crop_options=e.image.cropOptions,this.image_aspect_ratio=e.imageAspectRatio,this.caption=e.caption,this.action_buttons=e.actionButtons.map(t=>new Cc(t))}};s(Ec,"Panel");Ec.type="Panel";var kc=class extends c{constructor(e){super(),this.header=e.shelf.header,this.panels=e.shelf.panels.map(t=>new Ec(t))}};s(kc,"MusicLargeCardItemCarousel");kc.type="MusicLargeCardItemCarousel";var kT=kc;var Pc=class extends c{constructor(e){var t,i,r;super(),this.playlist_id=e.playlistId,this.contents=f.parseArray(e.contents,wn),this.collapsed_item_count=e.collapsedItemCount,this.continuation=((r=(i=(t=e.continuations)===null||t===void 0?void 0:t[0])===null||i===void 0?void 0:i.nextContinuationData)===null||r===void 0?void 0:r.continuation)||null}};s(Pc,"MusicPlaylistShelf");Pc.type="MusicPlaylistShelf";var so=Pc;var Nc=class extends c{constructor(e){var t,i,r,a,l;super(),this.title=new d(e.title),this.thumbnail=S.fromResponse(e.thumbnail),this.endpoint=new T(e.navigationEndpoint),this.selected=e.selected,this.video_id=e.videoId,this.duration={text:new d(e.lengthText).toString(),seconds:dt(new d(e.lengthText).toString())};let h=(t=new d(e.longBylineText).runs)===null||t===void 0?void 0:t.find(_=>{var p,b,I;return(I=(b=(p=_.endpoint)===null||p===void 0?void 0:p.payload)===null||b===void 0?void 0:b.browseId)===null||I===void 0?void 0:I.startsWith("MPR")}),v=(i=new d(e.longBylineText).runs)===null||i===void 0?void 0:i.filter(_=>{var p,b,I;return(I=(b=(p=_.endpoint)===null||p===void 0?void 0:p.payload)===null||b===void 0?void 0:b.browseId)===null||I===void 0?void 0:I.startsWith("UC")});this.author=new d(e.shortBylineText).toString(),h&&(this.album={id:(a=(r=h.endpoint)===null||r===void 0?void 0:r.payload)===null||a===void 0?void 0:a.browseId,name:h.text,year:(l=new d(e.longBylineText).runs)===null||l===void 0?void 0:l.slice(-1)[0].text,endpoint:h.endpoint}),v&&(this.artists=v.map(_=>{var p,b;return{name:_.text,channel_id:(b=(p=_.endpoint)===null||p===void 0?void 0:p.payload)===null||b===void 0?void 0:b.browseId,endpoint:_.endpoint}})),this.badges=f.parseArray(e.badges),this.menu=f.parseItem(e.menu),this.set_video_id=e.playlistSetVideoId}};s(Nc,"PlaylistPanelVideo");Nc.type="PlaylistPanelVideo";var Xi=Nc;var Mc=class extends c{constructor(e){var t;super(),this.primary=f.parseItem(e.primaryRenderer,Xi),this.counterpart=((t=e.counterpart)===null||t===void 0?void 0:t.map(i=>f.parseItem(i.counterpartRenderer,Xi)))||[]}};s(Mc,"PlaylistPanelVideoWrapper");Mc.type="PlaylistPanelVideoWrapper";var w_=Mc;var Ac=class extends c{constructor(e){var t,i,r,a,l,h;super(),this.title=e.title,this.title_text=new d(e.titleText),this.contents=f.parseArray(e.contents,[w_,Xi,mn]),this.playlist_id=e.playlistId,this.is_infinite=e.isInfinite,this.continuation=((r=(i=(t=e.continuations)===null||t===void 0?void 0:t[0])===null||i===void 0?void 0:i.nextRadioContinuationData)===null||r===void 0?void 0:r.continuation)||((h=(l=(a=e.continuations)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.nextContinuationData)===null||h===void 0?void 0:h.continuation),this.is_editable=e.isEditable,this.preview_description=e.previewDescription,this.num_items_to_show=e.numItemsToShow}};s(Ac,"PlaylistPanel");Ac.type="PlaylistPanel";var bi=Ac;var Vc=class extends c{constructor(e){super(),this.content=f.parseItem(e.content,bi)}};s(Vc,"MusicQueue");Vc.type="MusicQueue";var cr=Vc;var Rc=class extends c{constructor(e){var t,i,r,a;super(),this.title=new d(e.title),this.contents=f.parseArray(e.contents,wn),e.bottomEndpoint&&(this.endpoint=new T(e.bottomEndpoint)),e.continuations&&(this.continuation=((i=(t=e.continuations)===null||t===void 0?void 0:t[0].nextContinuationData)===null||i===void 0?void 0:i.continuation)||((a=(r=e.continuations)===null||r===void 0?void 0:r[0].reloadContinuationData)===null||a===void 0?void 0:a.continuation)),e.bottomText&&(this.bottom_text=new d(e.bottomText)),e.bottomButton&&(this.bottom_button=f.parseItem(e.bottomButton,M)),e.subheaders&&(this.subheaders=f.parseArray(e.subheaders))}};s(Rc,"MusicShelf");Rc.type="MusicShelf";var Fe=Rc;var Fc=class extends c{constructor(e){super(),e.startItems&&(this.start_items=f.parseArray(e.startItems)),e.endItems&&(this.end_items=f.parseArray(e.endItems))}};s(Fc,"MusicSideAlignedItem");Fc.type="MusicSideAlignedItem";var g_=Fc;var Oc=class extends c{constructor(e){var t;super(),this.title=new d(e.title).toString(),this.icon_type=((t=e.icon)===null||t===void 0?void 0:t.icon_type)||null,this.menu=f.parseItem(e.menu,l_)}};s(Oc,"MusicSortFilterButton");Oc.type="MusicSortFilterButton";var Bc=Oc;var Lc=class extends c{constructor(e){var t,i;super(),this.title=new d(e.title),this.thumbnails=e.thumbnail?S.fromResponse((t=e.thumbnail.musicThumbnailRenderer)===null||t===void 0?void 0:t.thumbnail):[],this.menu=f.parseItem(e.menu,ee),this.foreground_thumbnails=e.foregroundThumbnail?S.fromResponse((i=e.foregroundThumbnail.musicThumbnailRenderer)===null||i===void 0?void 0:i.thumbnail):[]}};s(Lc,"MusicVisualHeader");Lc.type="MusicVisualHeader";var x_=Lc;var Dc=class extends c{constructor(e){super(),this.thumbnails=S.fromResponse(e.thumbnail),this.video_thumbnails=S.fromResponse(e.videoThumbnail),this.short_message=new d(e.shortMessage),this.sent_time=new d(e.sentTimeText),this.notification_id=e.notificationId,this.endpoint=new T(e.navigationEndpoint),this.record_click_endpoint=new T(e.recordClickEndpoint),this.menu=f.parseItem(e.contextualMenu),this.read=e.read}};s(Dc,"Notification");Dc.type="Notification";var T_=Dc;var jc=class extends c{constructor(e){super(),this.header_text=new d(e.headerText).toString(),this.body_text=new d(e.bodyText).toString(),this.page_title=new d(e.pageTitle).toString(),this.header_icon_type=e.headerIcon.iconType}};s(jc,"PageIntroduction");jc.type="PageIntroduction";var I_=jc;var Yc=class extends c{constructor(e){var t;super(),this.subreason=new d(e.subreason),this.reason=new d(e.reason),this.proceed_button=f.parseItem(e.proceedButton,M),this.thumbnails=S.fromResponse(e.thumbnail),this.icon_type=((t=e.icon)===null||t===void 0?void 0:t.iconType)||null}};s(Yc,"PlayerErrorMessage");Yc.type="PlayerErrorMessage";var PT=Yc;var Uc=class extends c{constructor(e){super(),this.title=e.itemTitle,this.thumbnail=e.itemThumbnail,this.offer_description=e.offerDescription,this.offer_id=e.offerId}};s(Uc,"PlayerLegacyDesktopYpcOffer");Uc.type="PlayerLegacyDesktopYpcOffer";var NT=Uc;var Wc=class extends c{constructor(e){super(),this.video_message=e.fullVideoMessage,this.player_response=e.unserializedPlayerResponse}};s(Wc,"YpcTrailer");Wc.type="YpcTrailer";var S_=Wc;var Gc=class extends c{constructor(e){super(),this.video_id=e.trailerVideoId,this.title=e.itemTitle,this.thumbnail=e.itemThumbnail,this.offer_headline=e.offerHeadline,this.offer_description=e.offerDescription,this.offer_id=e.offerId,this.offer_button_text=e.offerButtonText,this.video_message=e.fullVideoMessage,this.trailer=j.parseItem(e.ypcTrailer,S_)}};s(Gc,"PlayerLegacyDesktopYpcTrailer");Gc.type="PlayerLegacyDesktopYpcTrailer";var Jc=Gc;var Hc=class extends c{constructor(e){var t;super(),this.title=new d(e.title),this.description=new d(e.description),this.thumbnails=S.fromResponse(e.thumbnail),e.embed?this.embed={iframe_url:e.embed.iframeUrl,flash_url:e.embed.flashUrl,flash_secure_url:e.embed.flashSecureUrl,width:e.embed.width,height:e.embed.height}:this.embed=null,this.length_seconds=parseInt(e.lengthSeconds),this.channel={id:e.externalChannelId,name:e.ownerChannelName,url:e.ownerProfileUrl},this.is_family_safe=!!e.isFamilySafe,this.is_unlisted=!!e.isUnlisted,this.has_ypc_metadata=!!e.hasYpcMetadata,this.view_count=parseInt(e.viewCount),this.category=e.category,this.publish_date=e.publishDate,this.upload_date=e.uploadDate,this.available_countries=e.availableCountries,this.start_timestamp=!((t=e.liveBroadcastDetails)===null||t===void 0)&&t.startTimestamp?new Date(e.liveBroadcastDetails.startTimestamp):null}};s(Hc,"PlayerMicroformat");Hc.type="PlayerMicroformat";var wi=Hc;var zc=class extends c{constructor(e){super(),this.title=new d(e.title),this.video_id=e.videoId,this.video_title=new d(e.videoTitle),this.short_view_count=new d(e.shortViewCountText),this.prefer_immediate_redirect=e.preferImmediateRedirect,this.count_down_secs_for_fullscreen=e.countDownSecsForFullscreen,this.published=new d(e.publishedTimeText),this.background=S.fromResponse(e.background),this.thumbnail_overlays=f.parseArray(e.thumbnailOverlays),this.author=new W(e.byline),this.cancel_button=f.parseItem(e.cancelButton,M),this.next_button=f.parseItem(e.nextButton,M),this.close_button=f.parseItem(e.closeButton,M)}};s(zc,"PlayerOverlayAutoplay");zc.type="PlayerOverlayAutoplay";var C_=zc;var Kc=class extends c{constructor(e){super(),this.results=f.parseArray(e.results,[Mm,Nm]),this.title=new d(e.title).toString()}};s(Kc,"WatchNextEndScreen");Kc.type="WatchNextEndScreen";var E_=Kc;var qc=class extends c{constructor(e){super(),this.end_screen=f.parseItem(e.endScreen,E_),this.autoplay=f.parseItem(e.autoplay,C_),this.share_button=f.parseItem(e.shareButton,M),this.add_to_menu=f.parseItem(e.addToMenu,ee),this.fullscreen_engagement=f.parseItem(e.fullscreenEngagement),this.actions=f.parseArray(e.actions),this.browser_media_session=f.parseItem(e.browserMediaSession),this.decorated_player_bar=f.parseItem(e.decoratedPlayerBarRenderer,Em)}};s(qc,"PlayerOverlay");qc.type="PlayerOverlay";var xn=qc;var $c=class extends c{constructor(e){super(),this.thumbnail=S.fromResponse(e.thumbnail)}};s($c,"PlaylistCustomThumbnail");$c.type="PlaylistCustomThumbnail";var k_=$c;var Xc=class extends c{constructor(e){super(),this.id=e.playlistId,this.title=new d(e.title),this.stats=e.stats.map(t=>new d(t)),this.brief_stats=e.briefStats.map(t=>new d(t)),this.author=new W(Object.assign(Object.assign({},e.ownerText),{navigationEndpoint:e.ownerEndpoint}),e.ownerBadges,null),this.description=new d(e.descriptionText),this.num_videos=new d(e.numVideosText),this.view_count=new d(e.viewCountText),this.can_share=e.shareData.canShare,this.can_delete=e.editableDetails.canDelete,this.is_editable=e.isEditable,this.privacy=e.privacy,this.save_button=f.parseItem(e.saveButton),this.shuffle_play_button=f.parseItem(e.shufflePlayButton),this.menu=f.parseItem(e.moreActionsMenu),this.banner=f.parseItem(e.playlistHeaderBanner)}};s(Xc,"PlaylistHeader");Xc.type="PlaylistHeader";var P_=Xc;var Qc=class extends c{constructor(e){super(),this.title=new d(e.playlistTitle),this.thumbnails=S.fromResponse(e.thumbnail),this.video_count=new d(e.playlistVideoCount),this.channel_name=new d(e.channelName),this.endpoint=new T(e.action)}};s(Qc,"PlaylistInfoCardContent");Qc.type="PlaylistInfoCardContent";var MT=Qc;var Zc=class extends c{constructor(e){super(),this.title=e.title,this.description=e.description||null}};s(Zc,"PlaylistMetadata");Zc.type="PlaylistMetadata";var N_=Zc;var ed=class extends c{constructor(e){super(),this.items=f.parseArray(e.items)}get contents(){return this.items}};s(ed,"PlaylistSidebar");ed.type="PlaylistSidebar";var AT=ed;var td=class extends c{constructor(e){super(),this.stats=e.stats.map(t=>new d(t)),this.thumbnail_renderer=f.parseItem(e.thumbnailRenderer),this.title=new d(e.title),this.menu=f.parseItem(e.menu),this.endpoint=new T(e.navigationEndpoint),this.description=new d(e.description)}};s(td,"PlaylistSidebarPrimaryInfo");td.type="PlaylistSidebarPrimaryInfo";var M_=td;var id=class extends c{constructor(e){super(),this.owner=f.parseItem(e.videoOwner),this.button=f.parseItem(e.button)}};s(id,"PlaylistSidebarSecondaryInfo");id.type="PlaylistSidebarSecondaryInfo";var A_=id;var nd=class extends c{constructor(e){super(),this.id=e.videoId,this.index=new d(e.index),this.title=new d(e.title),this.author=new W(e.shortBylineText),this.thumbnails=S.fromResponse(e.thumbnail),this.thumbnail_overlays=f.parseArray(e.thumbnailOverlays),this.set_video_id=e==null?void 0:e.setVideoId,this.endpoint=new T(e.navigationEndpoint),this.is_playable=e.isPlayable,this.menu=f.parseItem(e.menu,ee);let t=e.upcomingEventData&&Number(`${e.upcomingEventData.startTime}000`);t&&(this.upcoming=new Date(t)),this.duration={text:new d(e.lengthText).toString(),seconds:parseInt(e.lengthSeconds)}}get is_live(){var e;return((e=this.thumbnail_overlays.firstOfType(Zn))===null||e===void 0?void 0:e.style)==="LIVE"}get is_upcoming(){var e;return((e=this.thumbnail_overlays.firstOfType(Zn))===null||e===void 0?void 0:e.style)==="UPCOMING"}};s(nd,"PlaylistVideo");nd.type="PlaylistVideo";var V_=nd;var od=class extends c{constructor(e){super(),this.id=e.playlistId,this.is_editable=e.isEditable,this.can_reorder=e.canReorder,this.videos=f.parse(e.contents)}};s(od,"PlaylistVideoList");od.type="PlaylistVideoList";var VT=od;var rd=class extends c{constructor(e){super(),this.thumbnail=S.fromResponse(e.thumbnail)}};s(rd,"PlaylistVideoThumbnail");rd.type="PlaylistVideoThumbnail";var R_=rd;var sd=class extends c{constructor(e){super(),this.choices=e.choices.map(t=>({text:new d(t.text),select_endpoint:t.selectServiceEndpoint?new T(t.selectServiceEndpoint):null,deselect_endpoint:t.deselectServiceEndpoint?new T(t.deselectServiceEndpoint):null,vote_ratio_if_selected:(t==null?void 0:t.voteRatioIfSelected)||null,vote_percentage_if_selected:new d(t.votePercentageIfSelected),vote_ratio_if_not_selected:(t==null?void 0:t.voteRatioIfSelected)||null,vote_percentage_if_not_selected:new d(t.votePercentageIfSelected),image:t.image?S.fromResponse(t.image):null})),e.type&&(this.poll_type=e.type),e.totalVotes&&(this.total_votes=new d(e.totalVotes)),e.liveChatPollId&&(this.live_chat_poll_id=e.liveChatPollId)}};s(sd,"Poll");sd.type="Poll";var RT=sd;var ad=class extends _n{constructor(e){super(e)}};s(ad,"Post");ad.type="Post";var F_=ad;var ud=class extends c{constructor(e){super(),this.images=f.parseArray(e.images,qh)}};s(ud,"PostMultiImage");ud.type="PostMultiImage";var FT=ud;var ld=class extends c{constructor(e){super(),this.items=f.parseArray(e.items)}get contents(){return this.items}};s(ld,"ProfileColumn");ld.type="ProfileColumn";var OT=ld;var cd=class extends c{constructor(e){super(),this.items=f.parseArray(e.items)}get contents(){return this.items}};s(cd,"ProfileColumnStats");cd.type="ProfileColumnStats";var O_=cd;var dd=class extends c{constructor(e){super(),this.label=new d(e.label),this.value=new d(e.value)}};s(dd,"ProfileColumnStatsEntry");dd.type="ProfileColumnStatsEntry";var BT=dd;var pd=class extends c{constructor(e){super(),this.title=new d(e.title),this.thumbnails=S.fromResponse(e.thumbnail)}};s(pd,"ProfileColumnUserInfo");pd.type="ProfileColumnUserInfo";var B_=pd;var fd=class extends c{constructor(e){super(),this.title=new d(e.title),this.subtitle=new d(e.subtitle),this.avatars=e.avatars.map(t=>new S(t)),this.button=f.parseItem(e.button,M),this.surface=e.surface}};s(fd,"RecognitionShelf");fd.type="RecognitionShelf";var LT=fd;var hd=class extends c{constructor(e){super(),this.id=e.videoId,this.title=new d(e.headline),this.thumbnails=S.fromResponse(e.thumbnail),this.views=new d(e.viewCountText),this.endpoint=new T(e.navigationEndpoint)}};s(hd,"ReelItem");hd.type="ReelItem";var L_=hd;var md=class extends c{constructor(e){super(),this.title=new d(e.title),this.items=f.parseArray(e.items),this.endpoint=e.endpoint?new T(e.endpoint):null}get contents(){return this.items}};s(md,"ReelShelf");md.type="ReelShelf";var D_=md;var _d=class extends c{constructor(e){super(),this.content=f.parse(e.content)}};s(_d,"RelatedChipCloud");_d.type="RelatedChipCloud";var j_=_d;var vd=class extends c{constructor(e){super(),this.header=f.parseItem(e.header),this.contents=f.parseArray(e.contents)}};s(vd,"RichGrid");vd.type="RichGrid";var Tn=vd;var yd=class extends c{constructor(e){super(),this.content=f.parseItem(e.content)}};s(yd,"RichItem");yd.type="RichItem";var DT=yd;var bd=class extends c{constructor(e){var t,i;super(),this.title=new d(e.title),this.subtitle=new d(e.subtitle),this.title_style=(t=e==null?void 0:e.titleStyle)===null||t===void 0?void 0:t.style,this.icon_type=(i=e==null?void 0:e.icon)===null||i===void 0?void 0:i.iconType}};s(bd,"RichListHeader");bd.type="RichListHeader";var jT=bd;var wd=class extends c{constructor(e){var t,i;super(),this.thumbnail=S.fromResponse(e.thumbnail),this.title=new d(e.title),this.subtitle=new d(e.subtitle),this.call_to_action=new d(e.callToAction),!((t=e.callToActionIcon)===null||t===void 0)&&t.iconType&&(this.icon_type=(i=e.callToActionIcon)===null||i===void 0?void 0:i.iconType),this.endpoint=new T(e.endpoint)}};s(wd,"RichMetadata");wd.type="RichMetadata";var gd=wd;var xd=class extends c{constructor(e){super(),this.contents=f.parseArray(e.contents)}};s(xd,"RichMetadataRow");xd.type="RichMetadataRow";var Td=xd;var Id=class extends c{constructor(e){super(),this.content=f.parseItem(e.content)}};s(Id,"RichSection");Id.type="RichSection";var YT=Id;var Sd=class extends c{constructor(e){super(),this.title=new d(e.title),this.contents=f.parseArray(e.contents),this.endpoint=e.endpoint?new T(e.endpoint):null}};s(Sd,"RichShelf");Sd.type="RichShelf";var Y_=Sd;var Cd=class extends c{constructor(e){super(),this.endpoint=new T(e.endpoint),this.search_button=f.parseItem(e.searchButton),this.clear_button=f.parseItem(e.clearButton),this.placeholder_text=new d(e.placeholderText)}};s(Cd,"SearchBox");Cd.type="SearchBox";var UT=Cd;var Ed=class extends c{constructor(e){super(),this.label=new d(e.label),this.endpoint=new T(e.endpoint||e.navigationEndpoint),this.tooltip=e.tooltip,e.status&&(this.status=e.status)}get disabled(){return this.status==="FILTER_STATUS_DISABLED"}get selected(){return this.status==="FILTER_STATUS_SELECTED"}};s(Ed,"SearchFilter");Ed.type="SearchFilter";var U_=Ed;var kd=class extends c{constructor(e){super(),this.title=new d(e.title),this.filters=j.parseArray(e.filters,U_)}};s(kd,"SearchFilterGroup");kd.type="SearchFilterGroup";var W_=kd;var Pd=class extends c{constructor(e){super(),this.title=new d(e.title),this.groups=f.parseArray(e.groups,W_),this.button=f.parseItem(e.button,ot)}};s(Pd,"SearchSubMenu");Pd.type="SearchSubMenu";var G_=Pd;var Nd=class extends c{constructor(e){super(),this.contents=f.parse(e.contents)}};s(Nd,"SearchSuggestionsSection");Nd.type="SearchSuggestionsSection";var J_=Nd;var Md=class extends c{constructor(e){super(),this.contents=f.parse(e.contents)}};s(Md,"SecondarySearchContainer");Md.type="SecondarySearchContainer";var WT=Md;var Ad=class extends c{constructor(e){super(),e.targetId&&(this.target_id=e.targetId),this.contents=f.parseArray(e.contents),e.continuations&&(e.continuations[0].nextContinuationData?this.continuation=e.continuations[0].nextContinuationData.continuation:e.continuations[0].reloadContinuationData&&(this.continuation=e.continuations[0].reloadContinuationData.continuation)),e.header&&(this.header=f.parseItem(e.header)),e.subMenu&&(this.sub_menu=f.parseItem(e.subMenu))}};s(Ad,"SectionList");Ad.type="SectionList";var pe=Ad;var Vd=class extends c{constructor(e){super(),this.like_button=f.parseItem(e.likeButton,[ot,M]),this.dislike_button=f.parseItem(e.dislikeButton,[ot,M])}};s(Vd,"SegmentedLikeDislikeButton");Vd.type="SegmentedLikeDislikeButton";var ao=Vd;var Rd=class extends c{constructor(e){super(),e.title&&(this.title=new d(e.title)),e.summary&&(this.summary=new d(e.summary)),e.enableServiceEndpoint&&(this.enable_endpoint=new T(e.enableServiceEndpoint)),e.disableServiceEndpoint&&(this.disable_endpoint=new T(e.disableServiceEndpoint)),this.item_id=e.itemId}};s(Rd,"SettingBoolean");Rd.type="SettingBoolean";var GT=Rd;var Fd=class extends c{constructor(e){super(),this.title=new d(e.title),this.help_text=new d(e.helpText),this.enabled=e.enabled,this.disabled=e.disabled,this.id=e.id}};s(Fd,"SettingsCheckbox");Fd.type="SettingsCheckbox";var H_=Fd;var Od=class extends c{constructor(e){super(),this.title=new d(e.title),this.subtitle=new d(e.subtitle),this.enabled=e.enabled,this.enable_endpoint=new T(e.enableServiceEndpoint),this.disable_endpoint=new T(e.disableServiceEndpoint)}};s(Od,"SettingsSwitch");Od.type="SettingsSwitch";var dr=Od;var Bd=class extends c{constructor(e){super(),this.title=new d(e.title),Reflect.has(e,"text")&&(this.text=new d(e.text).toString()),Reflect.has(e,"options")&&(this.options=f.parseArray(e.options,[dr,zo,Tm,H_,rm]))}};s(Bd,"SettingsOptions");Bd.type="SettingsOptions";var pr=Bd;var Ld=class extends c{constructor(e){super(),this.title=new d(e.title),this.items=f.parseArray(e.items,tr)}get contents(){return this.items}};s(Ld,"SettingsSidebar");Ld.type="SettingsSidebar";var z_=Ld;var Dd=class extends c{constructor(e){super(),this.thumbnail=S.fromResponse(e.thumbnail),this.content=new d(e.content),this.published=new d(e.publishedTimeText),this.menu=j.parseItem(e.actionMenu,ee),this.original_post=j.parseItem(e.originalPost,_n),this.id=e.postId,this.endpoint=new T(e.navigationEndpoint),this.expand_button=j.parseItem(e.expandButton,M),this.author=new W(e.displayName,void 0)}};s(Dd,"SharedPost");Dd.type="SharedPost";var K_=Dd;var jd=class extends c{constructor(e){var t,i;super(),this.title=new d(e.title),e.endpoint&&(this.endpoint=new T(e.endpoint)),this.content=f.parseItem(e.content)||null,!((t=e.icon)===null||t===void 0)&&t.iconType&&(this.icon_type=(i=e.icon)===null||i===void 0?void 0:i.iconType),e.menu&&(this.menu=f.parseItem(e.menu)),e.playAllButton&&(this.play_all_button=f.parseItem(e.playAllButton,M))}};s(jd,"Shelf");jd.type="Shelf";var fr=jd;var Qi=class extends c{constructor(e){super(),this.corrected_query=new d(e.correctedQuery),this.original_query=new d(e.originalQuery),this.corrected_query_endpoint=new T(e.correctedQueryEndpoint),this.original_query_endpoint=new T(e.originalQueryEndpoint),this.search_instead_for=new d(e.searchInsteadFor),this.showing_results_for=new d(e.showingResultsFor)}};s(Qi,"ShowingResultsFor");Qi.type="ShowingResultsFor";var Yd=class extends c{constructor(e){super(),this.image=S.fromResponse(e.image),this.title=new d(e.title),this.display_domain=new d(e.displayDomain),this.show_link_icon=e.showLinkIcon,this.call_to_action=e.callToAction,this.endpoint=new T(e.command)}};s(Yd,"SimpleCardContent");Yd.type="SimpleCardContent";var JT=Yd;var Ud=class extends c{constructor(e){super(),this.message=new d(e.message),this.prominent=e.prominent}};s(Ud,"SimpleCardTeaser");Ud.type="SimpleCardTeaser";var HT=Ud;var Wd=class extends c{constructor(e){super(),this.lines=e.lines.map(t=>new d(t)),this.style=e.layoutStyle}};s(Wd,"SimpleTextSection");Wd.type="SimpleTextSection";var zT=Wd;var Gd=class extends c{constructor(e){super(),this.action_text=new d(e.actionText),this.nav_text=new d(e.navigationText),this.details=new d(e.detailsText),this.icon_type=e.icon.iconType,this.endpoint=new T(e.navigationEndpoint)}};s(Gd,"SingleActionEmergencySupport");Gd.type="SingleActionEmergencySupport";var KT=Gd;var Jd=class extends c{constructor(e){super(),this.title=e.title||"N/A",this.selected=e.selected||!1,this.endpoint=new T(e.endpoint),this.content=f.parseItem(e.content,[pe,cr,Tn])}};s(Jd,"Tab");Jd.type="Tab";var Ee=Jd;var Hd=class extends c{constructor(e){super(),this.tabs=f.parseArray(e.tabs,Ee)}};s(Hd,"SingleColumnBrowseResults");Hd.type="SingleColumnBrowseResults";var gi=Hd;var zd=class extends c{constructor(e){super(),this.contents=f.parse(e)}};s(zd,"SingleColumnMusicWatchNextResults");zd.type="SingleColumnMusicWatchNextResults";var qT=zd;var Kd=class extends c{constructor(e){super(),this.thumbnails=S.fromResponse(e.thumbnail),this.style=e.style}};s(Kd,"SingleHeroImage");Kd.type="SingleHeroImage";var $T=Kd;var qd=class extends c{constructor(e){super(),this.thumbnail=S.fromResponse(e.thumbnail),this.title=new d(e.title),this.endpoint=new T(e.navigationEndpoint),this.subscribe_button=f.parseItem(e.subscribeButton,ft)}};s(qd,"SlimOwner");qd.type="SlimOwner";var XT=qd;var $d=class extends c{constructor(e){super(),this.title=new d(e.title),this.collapsed_subtitle=new d(e.collapsedSubtitle),this.expanded_subtitle=new d(e.expandedSubtitle),this.owner=f.parseItem(e.owner),this.description=new d(e.description),this.video_id=e.videoId,this.date=new d(e.dateText)}};s($d,"SlimVideoMetadata");$d.type="SlimVideoMetadata";var q_=$d;var Xd=class extends c{constructor(e){super(),this.name=new d(e.name),this.is_selected=e.isSelected,this.endpoint=new T(e.navigationEndpoint)}};s(Xd,"SubFeedOption");Xd.type="SubFeedOption";var QT=Xd;var Qd=class extends c{constructor(e){super(),this.title=new d(e.title),this.options=f.parse(e.options)}};s(Qd,"SubFeedSelector");Qd.type="SubFeedSelector";var ZT=Qd;var Zd=class extends c{constructor(e){super(),this.contents=f.parse(e)}};s(Zd,"Tabbed");Zd.type="Tabbed";var e1=Zd;var ep=class extends c{constructor(e){super(),this.tabs=f.parseArray(e.tabs,Ee)}};s(ep,"TabbedSearchResults");ep.type="TabbedSearchResults";var $_=ep;var tp=class extends c{constructor(e){super(),this.title=new d(e.title),this.style=e.style}};s(tp,"TextHeader");tp.type="TextHeader";var t1=tp;var ip=class extends c{constructor(e){super(),this.landscape=S.fromResponse(e.landscape),this.portrait=S.fromResponse(e.portrait)}};s(ip,"ThumbnailLandscapePortrait");ip.type="ThumbnailLandscapePortrait";var i1=ip;var np=class extends c{constructor(e){super(),this.text=new d(e.text).toString()}};s(np,"ThumbnailOverlayEndorsement");np.type="ThumbnailOverlayEndorsement";var n1=np;var op=class extends c{constructor(e){super(),this.text=new d(e.text),this.icon_type=e.icon.iconType}};s(op,"ThumbnailOverlayHoverText");op.type="ThumbnailOverlayHoverText";var o1=op;var rp=class extends c{constructor(e){super(),this.text=new d(e.text).toString(),this.icon_type=e.icon.iconType}};s(rp,"ThumbnailOverlayInlineUnplayable");rp.type="ThumbnailOverlayInlineUnplayable";var r1=rp;var sp=class extends c{constructor(e){super(),this.text=new d(e.text)}};s(sp,"ThumbnailOverlayLoadingPreview");sp.type="ThumbnailOverlayLoadingPreview";var s1=sp;var ap=class extends c{constructor(e){super(),this.text=new d(e.text).toString()}};s(ap,"ThumbnailOverlayNowPlaying");ap.type="ThumbnailOverlayNowPlaying";var a1=ap;var up=class extends c{constructor(e){super(),this.hack=e.hack}};s(up,"ThumbnailOverlayPinking");up.type="ThumbnailOverlayPinking";var u1=up;var lp=class extends c{constructor(e){super(),this.text=e.texts.map(t=>new d(t))[0].toString()}};s(lp,"ThumbnailOverlayPlaybackStatus");lp.type="ThumbnailOverlayPlaybackStatus";var l1=lp;var cp=class extends c{constructor(e){super(),this.percent_duration_watched=e.percentDurationWatched}};s(cp,"ThumbnailOverlayResumePlayback");cp.type="ThumbnailOverlayResumePlayback";var c1=cp;var dp=class extends c{constructor(e){super(),this.text=new d(e.text),this.icon_type=e.icon.iconType}};s(dp,"ThumbnailOverlaySidePanel");dp.type="ThumbnailOverlaySidePanel";var d1=dp;var pp=class extends c{constructor(e){super(),this.is_toggled=e.isToggled||null,this.icon_type={toggled:e.toggledIcon.iconType,untoggled:e.untoggledIcon.iconType},this.tooltip={toggled:e.toggledTooltip,untoggled:e.untoggledTooltip},this.toggled_endpoint=new T(e.toggledServiceEndpoint),this.untoggled_endpoint=new T(e.untoggledServiceEndpoint)}};s(pp,"ThumbnailOverlayToggleButton");pp.type="ThumbnailOverlayToggleButton";var p1=pp;var fp=class extends c{constructor(e){super(),this.visible_time_range_start_millis=e.visibleTimeRangeStartMillis,this.visible_time_range_end_millis=e.visibleTimeRangeEndMillis,this.decoration_time_millis=e.decorationTimeMillis,this.label=new d(e.label),this.icon=e.icon}};s(fp,"TimedMarkerDecoration");fp.type="TimedMarkerDecoration";var f1=fp;var hp=class extends c{constructor(e){super(),this.title=new d(e.title)}};s(hp,"TitleAndButtonListHeader");hp.type="TitleAndButtonListHeader";var h1=hp;var mp=class extends c{constructor(e){super(),this.text=new d(e.defaultText),this.toggled_text=new d(e.toggledText),this.icon_type=e.defaultIcon.iconType,this.toggled_icon_type=e.toggledIcon.iconType,this.endpoint=new T(e.toggledServiceEndpoint)}};s(mp,"ToggleMenuServiceItem");mp.type="ToggleMenuServiceItem";var m1=mp;var _p=class extends c{constructor(e){super(),this.promo_config={promo_id:e.promoConfig.promoId,impression_endpoints:e.promoConfig.impressionEndpoints.map(t=>new T(t)),accept:new T(e.promoConfig.acceptCommand),dismiss:new T(e.promoConfig.dismissCommand)},this.target_id=e.targetId,this.details=new d(e.detailsText),this.suggested_position=e.suggestedPosition.type,this.dismiss_stratedy=e.dismissStrategy.type,this.dwell_time_ms=parseInt(e.dwellTimeMs)}};s(_p,"Tooltip");_p.type="Tooltip";var _1=_p;var vp=class extends c{constructor(e){var t;super(),this.title=new d(e.title),this.avatar=S.fromResponse((t=e.thumbnail)!==null&&t!==void 0?t:e.avatar),this.subtitle=new d(e.subtitle),this.subscribe_button=f.parseItem(e.subscribeButton,ft),this.endpoint=new T(e.navigationEndpoint)}};s(vp,"TopicChannelDetails");vp.type="TopicChannelDetails";var v1=vp;var yp=class extends c{constructor(e){super(),this.tabs=f.parse(e.tabs),this.secondary_contents=f.parse(e.secondaryContents)}};s(yp,"TwoColumnBrowseResults");yp.type="TwoColumnBrowseResults";var In=yp;var bp=class extends c{constructor(e){super(),this.primary_contents=f.parse(e.primaryContents),this.secondary_contents=f.parse(e.secondaryContents)}};s(bp,"TwoColumnSearchResults");bp.type="TwoColumnSearchResults";var X_=bp;var y1=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},Q_,Fy,wp=class extends c{constructor(e){var t,i,r,a,l;super(),Q_.add(this),this.results=f.parseArray((t=e.results)===null||t===void 0?void 0:t.results.contents),this.secondary_results=f.parseArray((i=e.secondaryResults)===null||i===void 0?void 0:i.secondaryResults.results),this.conversation_bar=f.parseItem(e==null?void 0:e.conversationBar);let h=(r=e.playlist)===null||r===void 0?void 0:r.playlist;h&&(this.playlist={id:h.playlistId,title:h.title,author:!((a=h.shortBylineText)===null||a===void 0)&&a.simpleText?new d(h.shortBylineText):new W(h.longBylineText),contents:f.parseArray(h.contents),current_index:h.currentIndex,is_infinite:!!h.isInfinite,menu:f.parseItem(h.menu,ee)});let v=(l=e.autoplay)===null||l===void 0?void 0:l.autoplay;v&&(this.autoplay={sets:v.sets.map(_=>y1(this,Q_,"m",Fy).call(this,_))},v.modifiedSets&&(this.autoplay.modified_sets=v.modifiedSets.map(_=>y1(this,Q_,"m",Fy).call(this,_))),v.countDownSecs&&(this.autoplay.count_down_secs=v.countDownSecs))}};s(wp,"TwoColumnWatchNextResults");Q_=new WeakSet,Fy=s(function(e){let t={autoplay_video:new T(e.autoplayVideo)};return e.nextButtonVideo&&(t.next_button_video=new T(e.nextButtonVideo)),t},"_TwoColumnWatchNextResults_parseAutoplaySet");wp.type="TwoColumnWatchNextResults";var hr=wp;var gp=class extends c{constructor(e){super(),this.header=f.parseItem(e.header),this.call_to_action=f.parseItem(e.callToAction),this.sections=f.parseArray(e.sections),e.collapsedLabel&&(this.collapsed_label=new d(e.collapsedLabel))}};s(gp,"UniversalWatchCard");gp.type="UniversalWatchCard";var Z_=gp;var xp=class extends c{constructor(e){super(),this.message_title=new d(e.dialogMessageTitle),this.message_text=new d(e.dialogMessageText),this.action_button=f.parseItem(e.actionButton,M),this.dismiss_button=f.parseItem(e.dismissButton,M),this.is_visible=e.isVisible}};s(xp,"UpsellDialog");xp.type="UpsellDialog";var b1=xp;var Tp=class extends c{constructor(e){super(),this.items=f.parseArray(e.items),this.collapsed_item_count=e.collapsedItemCount,this.collapsed_state_button_text=new d(e.collapsedStateButtonText)}get contents(){return this.items}};s(Tp,"VerticalList");Tp.type="VerticalList";var w1=Tp;var Ip=class extends c{constructor(e){super(),this.items=f.parseArray(e.items),this.contents=this.items,this.view_all_text=new d(e.viewAllText),this.view_all_endpoint=new T(e.viewAllEndpoint)}};s(Ip,"VerticalWatchCardList");Ip.type="VerticalWatchCardList";var g1=Ip;var Sp=class extends c{constructor(e){super(),this.title=new d(e.videoTitle),this.channel_name=new d(e.channelName),this.view_count=new d(e.viewCountText),this.video_thumbnails=S.fromResponse(e.videoThumbnail),this.duration=new d(e.lengthString),this.endpoint=new T(e.action)}};s(Sp,"VideoInfoCardContent");Sp.type="VideoInfoCardContent";var x1=Sp;var Cp=class extends c{constructor(e){super(),this.subscription_button=e.subscriptionButton||null,this.subscriber_count=new d(e.subscriberCountText),this.author=new W(Object.assign(Object.assign({},e.title),{navigationEndpoint:e.navigationEndpoint}),e.badges,e.thumbnail)}};s(Cp,"VideoOwner");Cp.type="VideoOwner";var mr=Cp;var Ep=class extends c{constructor(e){var t,i,r,a;super(),this.title=new d(e.title),this.super_title_link=new d(e.superTitleLink),this.view_count=new d((i=(t=e.viewCount)===null||t===void 0?void 0:t.videoViewCountRenderer)===null||i===void 0?void 0:i.viewCount),this.short_view_count=new d((a=(r=e.viewCount)===null||r===void 0?void 0:r.videoViewCountRenderer)===null||a===void 0?void 0:a.shortViewCount),this.badges=f.parseArray(e.badges,gt),this.published=new d(e.dateText),this.relative_date=new d(e.relativeDateText),this.menu=f.parseItem(e.videoActions,ee)}};s(Ep,"VideoPrimaryInfo");Ep.type="VideoPrimaryInfo";var ev=Ep;var wC=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},Oy,T1,kp=class extends c{constructor(e){super(),Oy.add(this),this.owner=f.parseItem(e.owner,mr),this.description=new d(e.description),Reflect.has(e,"attributedDescription")&&(this.description=new d(wC(this,Oy,"m",T1).call(this,e.attributedDescription))),this.subscribe_button=f.parseItem(e.subscribeButton,[ft,M]),this.metadata=f.parseItem(e.metadataRowContainer,p_),this.show_more_text=e.showMoreText,this.show_less_text=e.showLessText,this.default_expanded=e.defaultExpanded,this.description_collapsed_lines=e.descriptionCollapsedLines}};s(kp,"VideoSecondaryInfo");Oy=new WeakSet,T1=s(function(e){let t=[],i=e.content,r=e.commandRuns,a=0;if(r){for(let l of r){let h=l.length,v=l.startIndex;if(v>a&&t.push({text:i.slice(a,v)}),Reflect.has(l,"onTap")){let _=null;if(Reflect.has(e,"attachmentRuns")){let p=e.attachmentRuns;for(let b of p)if(b.startIndex-2==v){_=b;break}}_?t.push({text:i.slice(v,v+h),navigationEndpoint:l.onTap,attachment:_}):t.push({text:i.slice(v,v+h),navigationEndpoint:l.onTap})}a=v+h}a<i.length&&t.push({text:i.slice(a)})}else t.push({text:i});return{runs:t}},"_VideoSecondaryInfo_convertAttributedDescriptionToRuns");kp.type="VideoSecondaryInfo";var Pp=kp;var Np=class extends c{constructor(e){super(),this.title=new d(e.title),this.subtitle=new d(e.subtitle),this.duration={text:new d(e.lengthText).toString(),seconds:dt(e.lengthText.simpleText)},this.style=e.style}};s(Np,"WatchCardCompactVideo");Np.type="WatchCardCompactVideo";var tv=Np;var Mp=class extends c{constructor(e){var t;super(),this.endpoint=new T(e.navigationEndpoint),this.call_to_action_button=f.parseItem(e.callToActionButton),this.hero_image=f.parseItem(e.heroImage),this.label=((t=e.lengthText)===null||t===void 0?void 0:t.accessibility.accessibilityData.label)||""}};s(Mp,"WatchCardHeroVideo");Mp.type="WatchCardHeroVideo";var I1=Mp;var Ap=class extends c{constructor(e){super(),this.title=new d(e.title),this.title_endpoint=new T(e.titleNavigationEndpoint),this.subtitle=new d(e.subtitle),this.author=new W(e,e.titleBadge?[e.titleBadge]:null,e.avatar),this.author.name=this.title.toString(),this.style=e.style}};s(Ap,"WatchCardRichHeader");Ap.type="WatchCardRichHeader";var S1=Ap;var Vp=class extends c{constructor(e){super(),this.lists=f.parseArray(e.lists)}};s(Vp,"WatchCardSectionSequence");Vp.type="WatchCardSectionSequence";var C1=Vp;var Rp=class extends In{constructor(e){super(e)}};s(Rp,"WatchNextTabbedResults");Rp.type="WatchNextTabbedResults";var iv=Rp;var Fp=class extends c{constructor(e){var t,i;super(),this.title=e.title,this.content=f.parseItem(e.content,pe),this.endpoint=new T(e.navigationEndpoint),this.category_assets={asset_key:(t=e.categoryAssets)===null||t===void 0?void 0:t.assetKey,background_color:(i=e.categoryAssets)===null||i===void 0?void 0:i.backgroundColor},this.category_type=e.categoryType}};s(Fp,"AnchoredSection");Fp.type="AnchoredSection";var nv=Fp;var Op=class extends c{constructor(e){var t,i;super(),this.title=new d(e.title),this.category_assets={asset_key:(t=e.categoryAssets)===null||t===void 0?void 0:t.assetKey,background_color:(i=e.categoryAssets)===null||i===void 0?void 0:i.backgroundColor},this.category_type=e.categoryType,this.endpoint=new T(e.endpoint)}};s(Op,"KidsCategoryTab");Op.type="KidsCategoryTab";var _r=Op;var Bp=class extends c{constructor(e){super(),this.category_tabs=f.parseArray(e.categoryTabs,_r),this.privacy_button=f.parseItem(e.privacyButtonRenderer,M)}};s(Bp,"KidsCategoriesHeader");Bp.type="kidsCategoriesHeader";var ov=Bp;var Lp=class extends c{constructor(e){super(),this.anchors=f.parseArray(e.anchors,nv)}};s(Lp,"KidsHomeScreen");Lp.type="kidsHomeScreen";var rv=Lp;var Ly={};Oi(Ly,{YTNodeGenerator:()=>ht});var ke=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},gC=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},Pe,P1,sv,vr,N1,M1,Zi,By,E1,k1,A1,ht=class{static isIgnoredKey(e){return typeof e=="string"&&ke(this,Pe,"f",P1).has(e)}static mergeKeyInfo(e,t){let i=new Map,r=new Set(e.map(([C])=>C)),a=new Set(t.map(([C])=>C)),l=t.filter(([C])=>!r.has(C)),h=e.filter(([C])=>!a.has(C)),v=e.filter(([C])=>a.has(C)),_=new Map(t);for(let[C,k]of v){let F=_.get(C);if(!!F){if(k.type!==F.type){i.set(C,{type:"unknown",optional:!0});continue}switch(k.type){case"object":{if(F.type!=="object")continue;let{resolved_key_info:V}=this.mergeKeyInfo(k.keys,F.keys),D={type:"object",keys:V,optional:k.optional||F.optional};JSON.stringify(D)!==JSON.stringify(k)&&i.set(C,D)}break;case"renderer":{if(F.type!=="renderer")continue;let V=Object.assign(Object.assign({},k.renderers),F.renderers),D=k.optional||F.optional,Y={type:"renderer",renderers:V,optional:D};JSON.stringify(Object.assign(Object.assign({},Y),{renderers:Object.keys(Y.renderers)}))!==JSON.stringify(Object.assign(Object.assign({},k),{renderers:Object.keys(k.renderers)}))&&i.set(C,Y)}break;case"renderer_list":{if(F.type!=="renderer_list")continue;let V=Object.assign(Object.assign({},k.renderers),F.renderers),D=k.optional||F.optional,Y={type:"renderer_list",renderers:V,optional:D};JSON.stringify(Object.assign(Object.assign({},Y),{renderers:Object.keys(Y.renderers)}))!==JSON.stringify(Object.assign(Object.assign({},k),{renderers:Object.keys(k.renderers)}))&&i.set(C,Y)}break;case"misc":{if(F.type!=="misc")continue;switch(k.misc_type!==F.misc_type&&i.set(C,{type:"unknown",optional:!0}),k.misc_type){case"Author":{if(F.misc_type!=="Author")break;let V=k.params[1]||F.params[1],D=k.optional||F.optional,Y={type:"misc",misc_type:"Author",optional:D,params:[F.params[0],V]};JSON.stringify(Y)!==JSON.stringify(k)&&i.set(C,Y)}break}}break;case"primative":{if(F.type!=="primative")continue;let V={type:"primative",typeof:Array.from(new Set([...F.typeof,...k.typeof])),optional:k.optional||F.optional};JSON.stringify(V)!==JSON.stringify(k)&&i.set(C,V)}break}}}for(let[C,k]of l)i.set(C,Object.assign(Object.assign({},k),{optional:!0}));for(let[C,k]of h)i.set(C,Object.assign(Object.assign({},k),{optional:!0}));let p=e.filter(([C])=>!i.has(C));return{resolved_key_info:[...new Map([...p,...i]).entries()],changed_keys:[...i.entries()]}}static createRuntimeClass(e,t){var i,r;ke(this,Pe,"m",N1).call(this,e,t);let a=(i=s(class extends c{static set key_info(l){gC(this,i,new Map(l),"f",r)}static get key_info(){return[...ke(this,i,"f",r).entries()]}constructor(l){super();let{key_info:h,unimplemented_dependencies:v}=ht.introspect(l),{resolved_key_info:_,changed_keys:p}=ht.mergeKeyInfo(a.key_info,h);p.length>0&&(a.key_info=_,ke(ht,Pe,"m",M1).call(ht,e,a.key_info,p));for(let[I,C]of v)ht.generateRuntimeClass(I,C);for(let[I,C]of h){let k=ke(ht,Pe,"m",vr).call(ht,I);C.type==="misc"&&C.misc_type==="NavigationEndpoint"&&(k="endpoint"),Reflect.set(this,k,ht.parse(I,C,l))}}},"_b"),i.type=e,r={value:new Map},i);return a.key_info=t,Object.defineProperty(a,"name",{value:e,writable:!1}),a}static introspect(e){let t=ke(this,Pe,"m",A1).call(this,e),i=new Map;for(let[,a]of t)if(a.type==="renderer"||a.type==="renderer_list")for(let l of a.renderers){let h=ke(this,Pe,"f",sv)[l];h&&i.set(l,h)}let r=Array.from(i).filter(([a])=>!j.hasParser(a));return{key_info:t,unimplemented_dependencies:r}}static generateRuntimeClass(e,t){let{key_info:i,unimplemented_dependencies:r}=this.introspect(t),a=this.createRuntimeClass(e,i);j.addRuntimeParser(e,a);for(let[l,h]of r)this.generateRuntimeClass(l,h);return a}static generateTypescriptClass(e,t){let i=[],r=["super();"];for(let[a,l]of t){let h=ke(this,Pe,"m",vr).call(this,a);l.type==="misc"&&l.misc_type==="NavigationEndpoint"&&(h="endpoint"),i.push(`${h}${l.optional?"?":""}: ${this.toTypeDeclaration(l)};`),r.push(`this.${h} = ${this.toParser(a,l)};`)}return`class ${e} extends YTNode {
  static type = '${e}';

  ${i.join(`
  `)}

  constructor(data: RawNode) {
    ${r.join(`
    `)}
  }
}
`}static toTypeDeclaration(e,t=0){switch(e.type){case"renderer":return`${e.renderers.map(i=>`YTNodes.${i}`).join(" | ")} | null`;case"renderer_list":return`ObservedArray<${e.renderers.map(i=>`YTNodes.${i}`).join(" | ")}> | null`;case"object":return`{
${e.keys.map(([i,r])=>`${" ".repeat((t+2)*2)}${ke(this,Pe,"m",vr).call(this,i)}${r.optional?"?":""}: ${this.toTypeDeclaration(r,t+1)}`).join(`,
`)}
${" ".repeat((t+1)*2)}}`;case"misc":switch(e.misc_type){case"Thumbnail":return"Thumbnail[]";default:return e.misc_type}case"primative":return e.typeof.join(" | ");case"unknown":return"/* TODO: determine correct type */ unknown"}}static toParser(e,t,i=["data"],r=1){let a="undefined";switch(t.type){case"renderer":a=`Parser.parseItem(${i.join(".")}.${e}, [ ${t.renderers.map(l=>`YTNodes.${l}`).join(", ")} ])`;break;case"renderer_list":a=`Parser.parse(${i.join(".")}.${e}, true, [ ${t.renderers.map(l=>`YTNodes.${l}`).join(", ")} ])`;break;case"object":{let l=[...i,e];a=`{
${t.keys.map(([h,v])=>`${" ".repeat((r+2)*2)}${ke(this,Pe,"m",vr).call(this,h)}: ${this.toParser(h,v,l,r+1)}`).join(`,
`)}
${" ".repeat((r+1)*2)}}`}break;case"misc":switch(t.misc_type){case"Thumbnail":a=`Thumbnail.fromResponse(${i.join(".")}.${e})`;break;case"Author":{let l=`new Author(${i.join(".")}.${t.params[0]}, ${t.params[1]?`${i.join(".")}.${t.params[1]}`:"undefined"})`;return t.optional?`Reflect.has(${i.join(".")}, '${t.params[0]}') ? ${l} : undefined`:l}default:a=`new ${t.misc_type}(${i.join(".")}.${e})`;break}if(a==="undefined")throw new Error("Unreachable code reached! Switch missing case!");break;case"primative":case"unknown":a=`${i.join(".")}.${e}`;break}return t.optional?`Reflect.has(${i.join(".")}, '${e}') ? ${a} : undefined`:a}static parse(e,t,i,r=["data"]){let a=!t.optional||ke(this,Pe,"m",By).call(this,{data:i},[...r,e]);switch(t.type){case"renderer":return a?j.parseItem(ke(this,Pe,"m",Zi).call(this,{data:i},[...r,e]),t.renderers.map(l=>j.getParserByName(l))):void 0;case"renderer_list":return a?j.parse(ke(this,Pe,"m",Zi).call(this,{data:i},[...r,e]),!0,t.renderers.map(l=>j.getParserByName(l))):void 0;case"object":{let l={},h=[...r,e];for(let[v,_]of t.keys)l[v]=a?this.parse(v,_,i,h):void 0;return l}case"misc":switch(t.misc_type){case"NavigationEndpoint":return a?new T(ke(this,Pe,"m",Zi).call(this,{data:i},[...r,e])):void 0;case"Text":return a?new d(ke(this,Pe,"m",Zi).call(this,{data:i},[...r,e])):void 0;case"Thumbnail":return a?S.fromResponse(ke(this,Pe,"m",Zi).call(this,{data:i},[...r,e])):void 0;case"Author":return!t.optional||ke(this,Pe,"m",By).call(this,{data:i},[...r,t.params[0]])?new W(ke(this,Pe,"m",Zi).call(this,{data:i},[...r,t.params[0]]),t.params[1]?ke(this,Pe,"m",Zi).call(this,{data:i},[...r,t.params[1]]):void 0):void 0}throw new Error("Unreachable code reached! Switch missing case!");case"primative":case"unknown":return ke(this,Pe,"m",Zi).call(this,{data:i},[...r,e])}}static inferType(e,t){let i=!1;if(i=this.isRenderer(t))return ke(this,Pe,"f",sv)[i]=t[Reflect.ownKeys(t)[0]],{type:"renderer",renderers:[i],optional:!1};if(i=this.isRendererList(t)){for(let[a,l]of Object.entries(i))ke(this,Pe,"f",sv)[a]=l;return{type:"renderer_list",renderers:Object.keys(i),optional:!1}}if(i=this.isMiscType(e,t))return i;let r=typeof t;return r==="object"?{type:"object",keys:Object.entries(t).map(([a,l])=>[a,this.inferType(a,l)]),optional:!1}:{type:"primative",typeof:[r],optional:!1}}static isRendererList(e){return Array.isArray(e)&&e.every(r=>this.isRenderer(r))?Object.fromEntries(e.map(r=>{let a=Reflect.ownKeys(r)[0].toString();return[j.sanitizeClassName(a),r[a]]})):!1}static isMiscType(e,t){if((e.endsWith("Endpoint")||e.endsWith("Command")||e==="endpoint")&&typeof t=="object")return{type:"misc",endpoint:new T(t),optional:!1,misc_type:"NavigationEndpoint"};if(typeof t=="object"&&(Reflect.has(t,"simpleText")||Reflect.has(t,"runs"))){let i=new d(t);return{type:"misc",misc_type:"Text",optional:!1,endpoint:i.endpoint,text:i.toString()}}return typeof t=="object"&&Reflect.has(t,"thumbnails")&&Array.isArray(t.thumbnails)?{type:"misc",misc_type:"Thumbnail",optional:!1}:!1}static isRenderer(e){if(!(typeof e=="object"))return!1;let i=Reflect.ownKeys(e);return i.length===1&&i[0].toString().includes("Renderer")?j.sanitizeClassName(i[0].toString()):!1}};s(ht,"YTNodeGenerator");Pe=ht,vr=s(function(e){return e.replace(/[A-Z]/g,t=>`_${t.toLowerCase()}`)},"_YTNodeGenerator_camelToSnake"),N1=s(function(e,t){console.warn(`${e} not found!
This is a bug, want to help us fix it? Follow the instructions at ${U.shim.info.repo_url}/blob/main/docs/updating-the-parser.md or report it at ${U.shim.info.bugs_url}!
Introspected and JIT generated this class in the meantime:
${this.generateTypescriptClass(e,t)}`)},"_YTNodeGenerator_logNewClass"),M1=s(function(e,t,i){console.warn(`${e} changed!
The following keys where altered: ${i.map(([r])=>ke(this,Pe,"m",vr).call(this,r)).join(", ")}
The class has changed to:
${this.generateTypescriptClass(e,t)}`)},"_YTNodeGenerator_logChangedKeys"),Zi=s(function(e,t){let i=e;for(let r of t)i=i[r];return i},"_YTNodeGenerator_accessDataFromKeyPath"),By=s(function(e,t){let i=e;for(let r of t)if(Reflect.has(i,r))i=i[r];else return!1;return!0},"_YTNodeGenerator_hasDataFromKeyPath"),E1=s(function(e){return Reflect.ownKeys(e).filter(r=>!this.isIgnoredKey(r)).filter(r=>typeof r=="string").map(r=>{let a=e[r],l=this.inferType(r,a);return[r,l]})},"_YTNodeGenerator_passOne"),k1=s(function(e){var t;let r=e.filter(([,v])=>{var _;return v.type!=="misc"||!(v.misc_type==="NavigationEndpoint"||v.misc_type==="Text")?!1:((_=v.endpoint)===null||_===void 0?void 0:_.metadata.page_type)==="WEB_PAGE_TYPE_CHANNEL"}).sort(([,v],[,_])=>v.type!=="misc"||_.type!=="misc"||v.misc_type!=="Text"||_.misc_type!=="Text"?0:_.text.length-v.text.length),a=new Set,l=r[0],h;if(l){a.add(l[0]);let _=e.map(([k])=>k).filter(k=>k.endsWith("Badges")||k==="badges"),b=(t=_.filter(k=>k.startsWith("owner")||k.startsWith("author"))[0])!==null&&t!==void 0?t:_[0],I=e.find(([k])=>k===b),C=I?I[1].type==="renderer_list"&&Reflect.has(I[1].renderers,"MetadataBadge"):!1;C&&b&&a.add(b),h={type:"misc",misc_type:"Author",optional:!1,params:[l[0],C?b:void 0]}}return h&&e.push(["author",h]),e.filter(([v])=>!a.has(v))},"_YTNodeGenerator_passTwo"),A1=s(function(e){let t=ke(this,Pe,"m",E1).call(this,e);return ke(this,Pe,"m",k1).call(this,t)},"_YTNodeGenerator_introspect");P1={value:new Set(["trackingParams","accessibility","accessibilityData"])};sv={value:{}};var Dy=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},Q=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},$,jy,Sn,Zt,ei,V1,ti,R1,av,Yy,j=class{static setParserErrorHandler(e){Dy(this,$,e,"f",jy)}static parseResponse(e){var t,i;let r={};Q(this,$,"m",ei).call(this);let a=this.parse(e.contents),l=Q(this,$,"m",ti).call(this);a&&(r.contents=a,r.contents_memo=l),Q(this,$,"m",Zt).call(this),Q(this,$,"m",ei).call(this);let h=e.onResponseReceivedActions?this.parseRR(e.onResponseReceivedActions):null,v=Q(this,$,"m",ti).call(this);h&&(r.on_response_received_actions=h,r.on_response_received_actions_memo=v),Q(this,$,"m",Zt).call(this),Q(this,$,"m",ei).call(this);let _=e.onResponseReceivedEndpoints?this.parseRR(e.onResponseReceivedEndpoints):null,p=Q(this,$,"m",ti).call(this);_&&(r.on_response_received_endpoints=_,r.on_response_received_endpoints_memo=p),Q(this,$,"m",Zt).call(this),Q(this,$,"m",ei).call(this);let b=e.onResponseReceivedCommands?this.parseRR(e.onResponseReceivedCommands):null,I=Q(this,$,"m",ti).call(this);b&&(r.on_response_received_commands=b,r.on_response_received_commands_memo=I),Q(this,$,"m",Zt).call(this),Q(this,$,"m",ei).call(this);let C=e.continuationContents?this.parseLC(e.continuationContents):null,k=Q(this,$,"m",ti).call(this);C&&(r.continuation_contents=C,r.continuation_contents_memo=k),Q(this,$,"m",Zt).call(this),Q(this,$,"m",ei).call(this);let F=e.actions?this.parseActions(e.actions):null,V=Q(this,$,"m",ti).call(this);F&&(r.actions=F,r.actions_memo=V),Q(this,$,"m",Zt).call(this),Q(this,$,"m",ei).call(this);let D=e.liveChatItemContextMenuSupportedRenderers?this.parseItem(e.liveChatItemContextMenuSupportedRenderers):null,Y=Q(this,$,"m",ti).call(this);D&&(r.live_chat_item_context_menu_supported_renderers=D,r.live_chat_item_context_menu_supported_renderers_memo=Y),Q(this,$,"m",Zt).call(this),Q(this,$,"m",ei).call(this);let B=e.header?this.parse(e.header):null,w=Q(this,$,"m",ti).call(this);B&&(r.header=B,r.header_memo=w),Q(this,$,"m",Zt).call(this),Q(this,$,"m",ei).call(this);let ye=e.sidebar?this.parseItem(e.sidebar):null,Ke=Q(this,$,"m",ti).call(this);ye&&(r.sidebar=ye,r.sidebar_memo=Ke),Q(this,$,"m",Zt).call(this),this.applyMutations(l,(i=(t=e.frameworkUpdates)===null||t===void 0?void 0:t.entityBatchUpdate)===null||i===void 0?void 0:i.mutations);let Ie=e.continuation?this.parseC(e.continuation):null;Ie&&(r.continuation=Ie);let Qe=this.parse(e.metadata);Qe&&(r.metadata=Qe);let ne=this.parseItem(e.microformat);ne&&(r.microformat=ne);let J=this.parseItem(e.overlay);J&&(r.overlay=J);let ae=this.parseArray(e.alerts,Bh);ae.length&&(r.alerts=ae);let ue=e.refinements;ue&&(r.refinements=ue);let at=e.estimatedResults?parseInt(e.estimatedResults):null;at&&(r.estimated_results=at);let ut=this.parse(e.playerOverlays);ut&&(r.player_overlays=ut);let At=e.playbackTracking?{videostats_watchtime_url:e.playbackTracking.videostatsWatchtimeUrl.baseUrl,videostats_playback_url:e.playbackTracking.videostatsPlaybackUrl.baseUrl}:null;At&&(r.playback_tracking=At);let Ze=e.playabilityStatus?{status:e.playabilityStatus.status,reason:e.playabilityStatus.reason||"",embeddable:!!e.playabilityStatus.playableInEmbed||!1,audio_only_playablility:this.parseItem(e.playabilityStatus.audioOnlyPlayability,bh),error_screen:this.parseItem(e.playabilityStatus.errorScreen)}:null;Ze&&(r.playability_status=Ze);let qe=e.streamingData?{expires:new Date(Date.now()+parseInt(e.streamingData.expiresInSeconds)*1e3),formats:j.parseFormats(e.streamingData.formats),adaptive_formats:j.parseFormats(e.streamingData.adaptiveFormats),dash_manifest_url:e.streamingData.dashManifestUrl||null,hls_manifest_url:e.streamingData.hlsManifestUrl||null}:void 0;qe&&(r.streaming_data=qe);let Gt=e.currentVideoEndpoint?new T(e.currentVideoEndpoint):null;Gt&&(r.current_video_endpoint=Gt);let nt=e.endpoint?new T(e.endpoint):null;nt&&(r.endpoint=nt);let lt=this.parseItem(e.captions,Nh);lt&&(r.captions=lt);let bt=e.videoDetails?new Yh(e.videoDetails):null;bt&&(r.video_details=bt);let _t=this.parseArray(e.annotations,Ph);_t.length&&(r.annotations=_t);let Vt=this.parseItem(e.storyboards,[Ah,Mh]);Vt&&(r.storyboards=Vt);let Jt=this.parseItem(e.endscreen,kh);Jt&&(r.endscreen=Jt);let he=this.parseItem(e.cards,Eh);he&&(r.cards=he),Q(this,$,"m",ei).call(this);let Ae=this.parse(e.items);return Ae&&(r.items=Ae,r.items_memo=Q(this,$,"m",ti).call(this)),Q(this,$,"m",Zt).call(this),r}static parseItem(e,t){if(!e)return null;let i=Object.keys(e);if(!i.length)return null;let r=this.sanitizeClassName(i[0]);if(!this.shouldIgnore(r))try{let l=this.hasParser(r)?this.getParserByName(r):ht.generateRuntimeClass(r,e[i[0]]);if(t){if(Array.isArray(t)){if(!t.some(v=>v.type===l.type))throw new Ft(`Type mismatch, got ${r} but expected one of ${t.map(v=>v.type).join(", ")}`)}else if(l.type!==t.type)throw new Ft(`Type mismatch, got ${r} but expected ${t.type}`)}let h=new l(e[i[0]]);return Q(this,$,"m",V1).call(this,r,h),h}catch(a){return Q(this,$,"f",jy).call(this,{classname:r,classdata:e[i[0]],err:a}),null}return null}extra(){j.parseItem({},[Bt,Bt])}static parseArray(e,t){if(Array.isArray(e)){let i=[];for(let r of e){let a=this.parseItem(r,t);a&&i.push(a)}return Le(i)}else if(!e)return Le([]);throw new Ft("Expected array but got a single item")}static parse(e,t,i){if(!e)return null;if(Array.isArray(e)){let r=[];for(let l of e){let h=this.parseItem(l,i);h&&r.push(h)}let a=Le(r);return t?a:new fi(Le(r))}else if(t)throw new Ft("Expected array but got a single item");return new fi(this.parseItem(e,i))}static parseC(e){return e.timedContinuationData?new yr({continuation:e.timedContinuationData,type:"timed"}):null}static parseLC(e){return e.itemSectionContinuation?new uo(e.itemSectionContinuation):e.sectionListContinuation?new Dt(e.sectionListContinuation):e.liveChatContinuation?new ho(e.liveChatContinuation):e.musicPlaylistShelfContinuation?new po(e.musicPlaylistShelfContinuation):e.musicShelfContinuation?new en(e.musicShelfContinuation):e.gridContinuation?new fo(e.gridContinuation):e.playlistPanelContinuation?new Yp(e.playlistPanelContinuation):null}static parseRR(e){return Le(e.map(t=>{if(t.navigateAction)return new lo(t.navigateAction);if(t.reloadContinuationItemsCommand)return new co(t.reloadContinuationItemsCommand);if(t.appendContinuationItemsAction)return new jp(t.appendContinuationItemsAction)}).filter(t=>t))}static parseActions(e){return Array.isArray(e)?j.parse(e.map(t=>(delete t.clickTrackingParams,t))):new fi(this.parseItem(e))}static parseFormats(e){return(e==null?void 0:e.map(t=>new Dh(t)))||[]}static applyMutations(e,t){let i=e.getType(Bt);if(i.length>0&&!t)console.warn(new x(`Mutation data required for processing MusicMultiSelectMenuItems, but none found.
This is a bug, please report it at ${U.shim.info.bugs_url}`));else{let r=[];for(let a of i){let l=t.find(v=>{var _,p;return((p=(_=v.payload)===null||_===void 0?void 0:_.musicFormBooleanChoice)===null||p===void 0?void 0:p.id)===a.form_item_entity_key}),h=l==null?void 0:l.payload.musicFormBooleanChoice;(h==null?void 0:h.selected)!==void 0&&(h==null?void 0:h.opaqueToken)?a.selected=h.selected:r.push(`'${a.title}'`)}r.length>0&&console.warn(new x(`Mutation data missing or invalid for ${r.length} out of ${i.length} MusicMultiSelectMenuItems. The titles of the failed items are: ${r.join(", ")}.
This is a bug, please report it at ${U.shim.info.bugs_url}`))}}static sanitizeClassName(e){return(e.charAt(0).toUpperCase()+e.slice(1)).replace(/Renderer|Model/g,"").replace(/Radio/g,"Mix").trim()}static shouldIgnore(e){return this.ignore_list.has(e)}static getParserByName(e){let t=Q(this,$,"f",av).get(e);if(!t){let i=new Error(`Module not found: ${e}`);throw i.code="MODULE_NOT_FOUND",i}return t}static hasParser(e){return Q(this,$,"f",av).has(e)}static addRuntimeParser(e,t){Q(this,$,"f",av).set(e,t),Q(this,$,"f",Yy).set(e,t)}static getDynamicParsers(){return Object.fromEntries(Q(this,$,"f",Yy))}};s(j,"Parser");$=j,Zt=s(function(){Dy(j,$,null,"f",Sn)},"_Parser_clearMemo"),ei=s(function(){Dy(j,$,new fn,"f",Sn)},"_Parser_createMemo"),V1=s(function(e,t){if(!Q(j,$,"f",Sn))return;let i=Q(j,$,"f",Sn).get(e);if(!i)return Q(j,$,"f",Sn).set(e,[t]);i.push(t)},"_Parser_addToMemo"),ti=s(function(){if(!Q(j,$,"f",Sn))throw new Error("Parser#getMemo() called before Parser#createMemo()");return Q(j,$,"f",Sn)},"_Parser_getMemo"),R1=s(function({classname:e,classdata:t,err:i}){if(i.code=="MODULE_NOT_FOUND")return console.warn(new x(`${e} not found!
This is a bug, want to help us fix it? Follow the instructions at ${U.shim.info.repo_url.split("#")[0]}/blob/main/docs/updating-the-parser.md or report it at ${U.shim.info.bugs_url}!`,t));console.warn(new x(`Something went wrong at ${e}!
This is a bug, please report it at ${U.shim.info.bugs_url}`,{stack:i.stack}))},"_Parser_printError");jy={value:Q(j,$,"m",R1)};Sn={value:null};j.ignore_list=new Set(["AdSlot","DisplayAd","SearchPyv","MealbarPromo","BackgroundPromo","PromotedSparklesWeb","RunAttestationCommand","CompactPromotedVideo","StatementBanner","GuideSigninPromo"]);av={value:new Map(Array.from(Object.entries(Dp)))};Yy={value:new Map};var uo=class extends c{constructor(e){var t,i,r;super(),this.contents=j.parseArray(e.contents),Array.isArray(e.continuations)&&(this.continuation=(r=(i=(t=e.continuations)===null||t===void 0?void 0:t.at(0))===null||i===void 0?void 0:i.nextContinuationData)===null||r===void 0?void 0:r.continuation)}};s(uo,"ItemSectionContinuation");uo.type="itemSectionContinuation";var lo=class extends c{constructor(e){super(),this.endpoint=new T(e.endpoint)}};s(lo,"NavigateAction");lo.type="navigateAction";var jp=class extends c{constructor(e){super(),this.contents=j.parse(e.continuationItems,!0)}};s(jp,"AppendContinuationItemsAction");jp.type="appendContinuationItemsAction";var co=class extends c{constructor(e){super(),this.target_id=e.targetId,this.contents=j.parse(e.continuationItems,!0),this.slot=e==null?void 0:e.slot}};s(co,"ReloadContinuationItemsCommand");co.type="reloadContinuationItemsCommand";var Dt=class extends c{constructor(e){var t,i,r,a,l,h;super(),this.contents=j.parse(e.contents,!0),this.continuation=((r=(i=(t=e.continuations)===null||t===void 0?void 0:t[0])===null||i===void 0?void 0:i.nextContinuationData)===null||r===void 0?void 0:r.continuation)||((h=(l=(a=e.continuations)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.reloadContinuationData)===null||h===void 0?void 0:h.continuation)||null}};s(Dt,"SectionListContinuation");Dt.type="sectionListContinuation";var po=class extends c{constructor(e){var t;super(),this.contents=j.parse(e.contents,!0),this.continuation=((t=e.continuations)===null||t===void 0?void 0:t[0].nextContinuationData.continuation)||null}};s(po,"MusicPlaylistShelfContinuation");po.type="musicPlaylistShelfContinuation";var en=class extends c{constructor(e){var t,i,r,a;super(),this.contents=j.parseArray(e.contents),this.continuation=((i=(t=e.continuations)===null||t===void 0?void 0:t[0].nextContinuationData)===null||i===void 0?void 0:i.continuation)||((a=(r=e.continuations)===null||r===void 0?void 0:r[0].reloadContinuationData)===null||a===void 0?void 0:a.continuation)||null}};s(en,"MusicShelfContinuation");en.type="musicShelfContinuation";var fo=class extends c{constructor(e){var t;super(),this.items=j.parse(e.items,!0),this.continuation=((t=e.continuations)===null||t===void 0?void 0:t[0].nextContinuationData.continuation)||null}get contents(){return this.items}};s(fo,"GridContinuation");fo.type="gridContinuation";var Yp=class extends c{constructor(e){var t,i,r,a,l,h;super(),this.contents=j.parseArray(e.contents),this.continuation=((r=(i=(t=e.continuations)===null||t===void 0?void 0:t[0])===null||i===void 0?void 0:i.nextContinuationData)===null||r===void 0?void 0:r.continuation)||((h=(l=(a=e.continuations)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.nextRadioContinuationData)===null||h===void 0?void 0:h.continuation)||null}};s(Yp,"PlaylistPanelContinuation");Yp.type="playlistPanelContinuation";var yr=class extends c{constructor(e){var t,i,r;super(),this.continuation_type=e.type,this.timeout_ms=(t=e.continuation)===null||t===void 0?void 0:t.timeoutMs,this.time_until_last_message_ms=(i=e.continuation)===null||i===void 0?void 0:i.timeUntilLastMessageMsec,this.token=(r=e.continuation)===null||r===void 0?void 0:r.continuation}};s(yr,"Continuation");yr.type="continuation";var ho=class extends c{constructor(e){var t,i,r,a,l,h,v,_;super(),this.actions=j.parse((t=e.actions)===null||t===void 0?void 0:t.map(I=>(delete I.clickTrackingParams,I)),!0)||Le([]),this.action_panel=j.parseItem(e.actionPanel),this.item_list=j.parseItem(e.itemList,Oh),this.header=j.parseItem(e.header,Fh),this.participants_list=j.parseItem(e.participantsList,Rh),this.popout_message=j.parseItem(e.popoutMessage,pt),this.emojis=((i=e.emojis)===null||i===void 0?void 0:i.map(I=>({emoji_id:I.emojiId,shortcuts:I.shortcuts,search_terms:I.searchTerms,image:S.fromResponse(I.image),is_custom_emoji:I.isCustomEmoji})))||[];let p,b;!((r=e.continuations)===null||r===void 0)&&r[0].timedContinuationData?(b="timed",p=(a=e.continuations)===null||a===void 0?void 0:a[0].timedContinuationData):!((l=e.continuations)===null||l===void 0)&&l[0].invalidationContinuationData?(b="invalidation",p=(h=e.continuations)===null||h===void 0?void 0:h[0].invalidationContinuationData):!((v=e.continuations)===null||v===void 0)&&v[0].liveChatReplayContinuationData&&(b="replay",p=(_=e.continuations)===null||_===void 0?void 0:_[0].liveChatReplayContinuationData),this.continuation=new yr({continuation:p,type:b}),this.viewer_name=e.viewerName}};s(ho,"LiveChatContinuation");ho.type="liveChatContinuation";var Uy={};Oi(Uy,{Author:()=>W,ChildElement:()=>Pm,EmojiRun:()=>Ch,Format:()=>Dh,Text:()=>d,TextRun:()=>Th,Thumbnail:()=>S,VideoDetails:()=>Yh});var sb={};Oi(sb,{AccountInfo:()=>lv,Analytics:()=>dv,Channel:()=>Xe,ChannelListContinuation:()=>bo,Comments:()=>fv,FilteredChannelList:()=>Pn,History:()=>Ir,HomeFeed:()=>ii,ItemMenu:()=>yv,Library:()=>gv,LiveChat:()=>kv,NotificationsMenu:()=>Pv,Playlist:()=>tn,Search:()=>Nv,Settings:()=>Mv,SmoothedQueue:()=>Iv,TimeWatched:()=>Vv,VideoInfo:()=>rf});var xC=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},Wy=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},br,uv=class{constructor(e){if(br.set(this,void 0),xC(this,br,f.parseResponse(e.data),"f"),!Wy(this,br,"f").contents)throw new x("Page contents not found");let t=Wy(this,br,"f").contents.array().as(Jh).first();if(!t)throw new x("Account section list not found");this.contents=t.contents,this.footers=t.footers}get page(){return Wy(this,br,"f")}};s(uv,"AccountInfo");br=new WeakMap;var lv=uv;var TC=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},F1=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},Up,cv=class{constructor(e){var t;Up.set(this,void 0),TC(this,Up,f.parseResponse(e.data),"f"),this.sections=(t=F1(this,Up,"f").contents_memo)===null||t===void 0?void 0:t.getType(ir).map(i=>i.model).flatMap(i=>i||[])}get page(){return F1(this,Up,"f")}};s(cv,"Analytics");Up=new WeakMap;var dv=cv;var O1=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},xe=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},Wp=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},Gy,xt,Cn,Gp,Tt,B1,En=class{constructor(e,t,i=!1){Gy.add(this),xt.set(this,void 0),Cn.set(this,void 0),Gp.set(this,void 0),Tt.set(this,void 0),xe(this,Gy,"m",B1).call(this,t)||i?Wp(this,xt,t,"f"):Wp(this,xt,f.parseResponse(t.data),"f");let r=j0(xe(this,xt,"f").contents_memo,xe(this,xt,"f").continuation_contents_memo,xe(this,xt,"f").on_response_received_commands_memo,xe(this,xt,"f").on_response_received_endpoints_memo,xe(this,xt,"f").on_response_received_actions_memo,xe(this,xt,"f").sidebar_memo,xe(this,xt,"f").header_memo);if(!r)throw new x("No memo found in feed");Wp(this,Tt,r,"f"),Wp(this,Gp,e,"f")}static getVideosFromMemo(e){return e.getType(nr,jm,L_,xm,V_,Xi,tv)}static getPlaylistsFromMemo(e){return e.getType(_i,Lm)}get videos(){return En.getVideosFromMemo(xe(this,Tt,"f"))}get posts(){return xe(this,Tt,"f").getType(_n,F_,K_)}get channels(){return xe(this,Tt,"f").getType(im,Bm)}get playlists(){return En.getPlaylistsFromMemo(xe(this,Tt,"f"))}get memo(){return xe(this,Tt,"f")}get page_contents(){var e;let t=(e=xe(this,Tt,"f").getType(Ee))===null||e===void 0?void 0:e.first().content,i=xe(this,Tt,"f").getType(co).first(),r=xe(this,Tt,"f").getType(Hh).first();return t||i||r}get shelves(){return xe(this,Tt,"f").getType(fr,Y_,D_)}getShelf(e){return this.shelves.get({title:e})}get secondary_contents(){var e,t;if(!(!((e=xe(this,xt,"f").contents)===null||e===void 0)&&e.is_node))return;let i=(t=xe(this,xt,"f").contents)===null||t===void 0?void 0:t.item();if(!!i.is(In,X_))return i.secondary_contents}get actions(){return xe(this,Gp,"f")}get page(){return xe(this,xt,"f")}get has_continuation(){return(xe(this,Tt,"f").get("ContinuationItem")||[]).length>0}getContinuationData(){return O1(this,void 0,void 0,function*(){if(xe(this,Cn,"f")){if(xe(this,Cn,"f").length>1)throw new x("There are too many continuations, you'll need to find the correct one yourself in this.page");if(xe(this,Cn,"f").length===0)throw new x("There are no continuations");return yield xe(this,Cn,"f")[0].endpoint.call(xe(this,Gp,"f"),{parse:!0})}if(Wp(this,Cn,xe(this,Tt,"f").getType(rt),"f"),xe(this,Cn,"f"))return this.getContinuationData()})}getContinuation(){return O1(this,void 0,void 0,function*(){let e=yield this.getContinuationData();if(!e)throw new x("Could not get continuation data");return new En(this.actions,e,!0)})}};s(En,"Feed");xt=new WeakMap,Cn=new WeakMap,Gp=new WeakMap,Tt=new WeakMap,Gy=new WeakSet,B1=s(function(e){return!("data"in e)},"_Feed_isParsed");var Ne=En;var L1=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},D1=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},kn=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},mo,_o,vo=class extends Ne{constructor(e,t,i=!1){var r;super(e,t,i),mo.set(this,void 0),_o.set(this,void 0),D1(this,_o,e,"f"),D1(this,mo,(r=this.page.contents_memo)===null||r===void 0?void 0:r.getType(Ee),"f")}get tabs(){var e,t;return(t=(e=kn(this,mo,"f"))===null||e===void 0?void 0:e.map(i=>i.title.toString()))!==null&&t!==void 0?t:[]}getTabByName(e){var t;return L1(this,void 0,void 0,function*(){let i=(t=kn(this,mo,"f"))===null||t===void 0?void 0:t.find(a=>a.title.toLowerCase()===e.toLowerCase());if(!i)throw new x(`Tab "${e}" not found`);if(i.selected)return this;let r=yield i.endpoint.call(kn(this,_o,"f"));return new vo(kn(this,_o,"f"),r,!1)})}getTabByURL(e){var t;return L1(this,void 0,void 0,function*(){let i=(t=kn(this,mo,"f"))===null||t===void 0?void 0:t.find(a=>{var l;return((l=a.endpoint.metadata.url)===null||l===void 0?void 0:l.split("/").pop())===e});if(!i)throw new x(`Tab "${e}" not found`);if(i.selected)return this;let r=yield i.endpoint.call(kn(this,_o,"f"));return new vo(kn(this,_o,"f"),r,!1)})}hasTabWithURL(e){var t,i;return(i=(t=kn(this,mo,"f"))===null||t===void 0?void 0:t.some(r=>{var a;return((a=r.endpoint.metadata.url)===null||a===void 0?void 0:a.split("/").pop())===e}))!==null&&i!==void 0?i:!1}get title(){var e,t,i;return(i=(t=(e=this.page.contents_memo)===null||e===void 0?void 0:e.getType(Ee))===null||t===void 0?void 0:t.find(r=>r.selected))===null||i===void 0?void 0:i.title.toString()}};s(vo,"TabbedFeed");mo=new WeakMap,_o=new WeakMap;var Jp=vo;var IC=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},Jy=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},SC=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},wr,pv=class extends Ne{constructor(e,t,i=!1){super(e,t,i),wr.set(this,void 0)}get filter_chips(){var e,t;if(Jy(this,wr,"f"))return Jy(this,wr,"f")||[];if(((e=this.memo.getType(Hi))===null||e===void 0?void 0:e.length)>1)throw new x("There are too many feed filter chipbars, you'll need to find the correct one yourself in this.page");if(((t=this.memo.getType(Hi))===null||t===void 0?void 0:t.length)===0)throw new x("There are no feed filter chipbars");return SC(this,wr,this.memo.getType(je),"f"),Jy(this,wr,"f")||[]}get filters(){return this.filter_chips.map(e=>e.text.toString())||[]}getFilteredFeed(e){var t;return IC(this,void 0,void 0,function*(){let i;if(typeof e=="string"){if(!this.filters.includes(e))throw new x("Filter not found",{available_filters:this.filters});i=this.filter_chips.find(a=>a.text.toString()===e)}else if(e.type==="ChipCloudChip")i=e;else throw new x("Invalid filter");if(!i)throw new x("Filter not found");if(i.is_selected)return this;let r=yield(t=i.endpoint)===null||t===void 0?void 0:t.call(this.actions,{parse:!0});if(!r)throw new x("Failed to get filtered feed");return new Ne(this.actions,r,!0)})}};s(pv,"FilterableFeed");wr=new WeakMap;var yo=pv;var mt=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},Xe=class extends Jp{constructor(e,t,i=!1){var r,a,l,h,v,_;super(e,t,i),this.header=(a=(r=this.page.header)===null||r===void 0?void 0:r.item())===null||a===void 0?void 0:a.as(qo,tm,Hm);let p=(l=this.page.metadata)===null||l===void 0?void 0:l.item().as(om),b=(h=this.page.microformat)===null||h===void 0?void 0:h.as(vi);if(this.page.alerts){let I=this.page.alerts.first();if((I==null?void 0:I.alert_type)==="ERROR")throw new Go(I.text.toString())}if(!p&&!this.page.contents)throw new x("Invalid channel",this);this.metadata=Object.assign(Object.assign({},p),b||{}),this.subscribe_button=(v=this.page.header_memo)===null||v===void 0?void 0:v.getType(ft).first(),this.current_tab=(_=this.page.contents)===null||_===void 0?void 0:_.item().key("tabs").parsed().array().filterType(Ee,rr).get({selected:!0})}applyFilter(e){var t;return mt(this,void 0,void 0,function*(){let i,r=this.memo.getType(Hi).first();if(typeof e=="string"){if(i=r==null?void 0:r.contents.get({text:e}),!i)throw new x(`Filter ${e} not found`,{available_filters:this.filters})}else e instanceof je&&(i=e);if(!i)throw new x("Invalid filter",e);let a=yield(t=i.endpoint)===null||t===void 0?void 0:t.call(this.actions,{parse:!0});if(!a)throw new x("No page returned",{filter:i});return new Pn(this.actions,a,!0)})}applySort(e){var t,i;return mt(this,void 0,void 0,function*(){let r=this.memo.getType(Ui).first();if(!r)throw new x("No sort filter sub menu found");let a=(t=r==null?void 0:r.sub_menu_items)===null||t===void 0?void 0:t.find(h=>h.title===e);if(!a)throw new x(`Sort filter ${e} not found`,{available_sort_filters:this.sort_filters});if(a.selected)return this;let l=yield(i=a.endpoint)===null||i===void 0?void 0:i.call(this.actions,{parse:!0});return new Xe(this.actions,l,!0)})}applyContentTypeFilter(e){var t,i,r,a;return mt(this,void 0,void 0,function*(){let l=(r=(i=(t=this.current_tab)===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.as(pe).sub_menu)===null||r===void 0?void 0:r.as(ya);if(!l)throw new x("Sub menu not found");let h=l.content_type_sub_menu_items.find(_=>_.title===e);if(!h)throw new x(`Sub menu item ${e} not found`,{available_filters:this.content_type_filters});if(h.selected)return this;let v=yield(a=h.endpoint)===null||a===void 0?void 0:a.call(this.actions,{parse:!0});return new Xe(this.actions,v,!0)})}get filters(){var e,t;return((t=(e=this.memo.getType(Hi))===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.contents.filterType(je).map(i=>i.text))||[]}get sort_filters(){var e;let t=this.memo.getType(Ui).first();return((e=t==null?void 0:t.sub_menu_items)===null||e===void 0?void 0:e.map(i=>i.title))||[]}get content_type_filters(){var e,t,i;let r=(i=(t=(e=this.current_tab)===null||e===void 0?void 0:e.content)===null||t===void 0?void 0:t.as(pe).sub_menu)===null||i===void 0?void 0:i.as(ya);return(r==null?void 0:r.content_type_sub_menu_items.map(a=>a.title))||[]}getHome(){return mt(this,void 0,void 0,function*(){let e=yield this.getTabByURL("featured");return new Xe(this.actions,e.page,!0)})}getVideos(){return mt(this,void 0,void 0,function*(){let e=yield this.getTabByURL("videos");return new Xe(this.actions,e.page,!0)})}getShorts(){return mt(this,void 0,void 0,function*(){let e=yield this.getTabByURL("shorts");return new Xe(this.actions,e.page,!0)})}getLiveStreams(){return mt(this,void 0,void 0,function*(){let e=yield this.getTabByURL("streams");return new Xe(this.actions,e.page,!0)})}getPlaylists(){return mt(this,void 0,void 0,function*(){let e=yield this.getTabByURL("playlists");return new Xe(this.actions,e.page,!0)})}getCommunity(){return mt(this,void 0,void 0,function*(){let e=yield this.getTabByURL("community");return new Xe(this.actions,e.page,!0)})}getChannels(){return mt(this,void 0,void 0,function*(){let e=yield this.getTabByURL("channels");return new Xe(this.actions,e.page,!0)})}getAbout(){var e;return mt(this,void 0,void 0,function*(){return(e=(yield this.getTabByURL("about")).memo.getType(nm))===null||e===void 0?void 0:e[0]})}search(e){var t,i;return mt(this,void 0,void 0,function*(){let r=(t=this.memo.getType(rr))===null||t===void 0?void 0:t[0];if(!r)throw new x("Search tab not found",this);let a=yield(i=r.endpoint)===null||i===void 0?void 0:i.call(this.actions,{query:e,parse:!0});return new Xe(this.actions,a,!0)})}get has_home(){return this.hasTabWithURL("featured")}get has_videos(){return this.hasTabWithURL("videos")}get has_shorts(){return this.hasTabWithURL("shorts")}get has_live_streams(){return this.hasTabWithURL("streams")}get has_playlists(){return this.hasTabWithURL("playlists")}get has_community(){return this.hasTabWithURL("community")}get has_channels(){return this.hasTabWithURL("channels")}get has_about(){return this.hasTabWithURL("about")}get has_search(){var e;return((e=this.memo.getType(rr))===null||e===void 0?void 0:e.length)>0}getContinuation(){let e=Object.create(null,{getContinuationData:{get:()=>super.getContinuationData}});return mt(this,void 0,void 0,function*(){let t=yield e.getContinuationData.call(this);if(!t)throw new x("Could not get continuation data");return new bo(this.actions,t,!0)})}};s(Xe,"Channel");var bo=class extends Ne{constructor(e,t,i=!1){var r,a;super(e,t,i),this.contents=((r=this.page.on_response_received_actions)===null||r===void 0?void 0:r.first())||((a=this.page.on_response_received_endpoints)===null||a===void 0?void 0:a.first())}getContinuation(){let e=Object.create(null,{getContinuationData:{get:()=>super.getContinuationData}});return mt(this,void 0,void 0,function*(){let t=yield e.getContinuationData.call(this);if(!t)throw new x("Could not get continuation data");return new bo(this.actions,t,!0)})}};s(bo,"ChannelListContinuation");var Pn=class extends yo{constructor(e,t,i=!1){super(e,t,i),this.applied_filter=this.memo.getType(je).get({is_selected:!0}),this.page.on_response_received_actions&&this.page.on_response_received_actions.length>1&&this.page.on_response_received_actions.shift(),this.contents=this.page.on_response_received_actions.first()}applyFilter(e){let t=Object.create(null,{getFilteredFeed:{get:()=>super.getFilteredFeed}});return mt(this,void 0,void 0,function*(){let i=yield t.getFilteredFeed.call(this,e);return new Pn(this.actions,i.page,!0)})}getContinuation(){let e=Object.create(null,{getContinuationData:{get:()=>super.getContinuationData}});return mt(this,void 0,void 0,function*(){let t=yield e.getContinuationData.call(this);if(!(t!=null&&t.on_response_received_actions_memo))throw new x("Unexpected continuation data",t);return t.on_response_received_actions_memo.set("FeedFilterChipBar",this.memo.getType(Hi)),t.on_response_received_actions_memo.set("ChipCloudChip",this.memo.getType(je)),new Pn(this.actions,t,!0)})}};s(Pn,"FilteredChannelList");var Hy=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},zy=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},jt=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},gr,xi,xr,wo=class{constructor(e,t,i=!1){var r,a,l;gr.set(this,void 0),xi.set(this,void 0),xr.set(this,void 0),zy(this,gr,i?t:f.parseResponse(t),"f"),zy(this,xi,e,"f");let h=jt(this,gr,"f").on_response_received_endpoints;if(!h)throw new x("Comments page did not have any content.");let v=h.at(0),_=h.at(1);this.header=(r=v==null?void 0:v.contents)===null||r===void 0?void 0:r.firstOfType(er);let p=((a=_==null?void 0:_.contents)===null||a===void 0?void 0:a.filterType(gm))||[];this.contents=Le(p.map(b=>{var I;return(I=b.comment)===null||I===void 0||I.setActions(jt(this,xi,"f")),b.setActions(jt(this,xi,"f")),b})),zy(this,xr,(l=_==null?void 0:_.contents)===null||l===void 0?void 0:l.firstOfType(rt),"f")}applySort(e){var t,i,r,a;return Hy(this,void 0,void 0,function*(){if(!this.header)throw new x("Page header is missing. Cannot apply sort option.");let l;if(e==="TOP_COMMENTS"?l=(i=(t=this.header.sort_menu)===null||t===void 0?void 0:t.sub_menu_items)===null||i===void 0?void 0:i.at(0):e==="NEWEST_FIRST"&&(l=(a=(r=this.header.sort_menu)===null||r===void 0?void 0:r.sub_menu_items)===null||a===void 0?void 0:a.at(1)),!l)throw new x("Could not find target button.");if(l.selected)return this;let h=yield l.endpoint.call(jt(this,xi,"f"),{parse:!0});return new wo(jt(this,xi,"f"),h,!0)})}createComment(e){var t;return Hy(this,void 0,void 0,function*(){if(!this.header)throw new x("Page header is missing. Cannot create comment.");let i=(t=this.header.create_renderer)===null||t===void 0?void 0:t.as(wm).submit_button;if(!i)throw new x("Could not find target button. You are probably not logged in.");if(!i.endpoint)throw new x("Button does not have an endpoint.");return yield i.endpoint.call(jt(this,xi,"f"),{commentText:e})})}getContinuation(){return Hy(this,void 0,void 0,function*(){if(!jt(this,xr,"f"))throw new x("Continuation not found");let e=yield jt(this,xr,"f").endpoint.call(jt(this,xi,"f"),{parse:!0}),t=Object.assign({},jt(this,gr,"f"));if(!t.on_response_received_endpoints||!e.on_response_received_endpoints)throw new x("Invalid reponse format, missing on_response_received_endpoints.");return t.on_response_received_endpoints.pop(),t.on_response_received_endpoints.push(e.on_response_received_endpoints[0]),new wo(jt(this,xi,"f"),t,!0)})}get has_continuation(){return!!jt(this,xr,"f")}get page(){return jt(this,gr,"f")}};s(wo,"Comments");gr=new WeakMap,xi=new WeakMap,xr=new WeakMap;var fv=wo;var CC=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},Tr=class extends Ne{constructor(e,t,i=!1){super(e,t,i),this.sections=this.memo.getType(Re),this.feed_actions=this.memo.getType(Qh).first()}getContinuation(){return CC(this,void 0,void 0,function*(){let e=yield this.getContinuationData();if(!e)throw new Error("No continuation data found");return new Tr(this.actions,e,!0)})}};s(Tr,"History");var Ir=Tr;var j1=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},ii=class extends yo{constructor(e,t,i=!1){super(e,t,i),this.header=this.memo.getType(Om).first(),this.contents=this.memo.getType(Tn).first()||this.page.on_response_received_actions.first()}applyFilter(e){let t=Object.create(null,{getFilteredFeed:{get:()=>super.getFilteredFeed}});return j1(this,void 0,void 0,function*(){let i=yield t.getFilteredFeed.call(this,e);return new ii(this.actions,i.page,!0)})}getContinuation(){let e=Object.create(null,{getContinuation:{get:()=>super.getContinuation}});var t;return j1(this,void 0,void 0,function*(){let i=yield e.getContinuation.call(this);return i.page.header=this.page.header,(t=i.page.header_memo)===null||t===void 0||t.set(this.header.type,[this.header]),new ii(this.actions,i.page,!0)})}};s(ii,"HomeFeed");var EC=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},Ky=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},hv=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},mv,_v,Hp,vv=class{constructor(e,t){mv.set(this,void 0),_v.set(this,void 0),Hp.set(this,void 0),Ky(this,mv,e,"f"),Ky(this,_v,t,"f");let i=e==null?void 0:e.live_chat_item_context_menu_supported_renderers;if(!i||!i.is(ee))throw new x('Response did not have a "live_chat_item_context_menu_supported_renderers" property. The call may have failed.');Ky(this,Hp,i.as(ee).items,"f")}selectItem(e){return EC(this,void 0,void 0,function*(){let t;if(e instanceof M){if(!e.endpoint)throw new x("Item does not have an endpoint.");t=e.endpoint}else{let r=hv(this,Hp,"f").find(a=>a.is(ar)?a.as(ar).icon_type===e:!1);if(!r||!r.is(ar))throw new x(`Button "${e}" not found.`);t=r.endpoint}if(!t)throw new x("Target button does not have an endpoint.");return yield t.call(hv(this,_v,"f"),{parse:!0})})}items(){return hv(this,Hp,"f")}page(){return hv(this,mv,"f")}};s(vv,"ItemMenu");mv=new WeakMap,_v=new WeakMap,Hp=new WeakMap;var yv=vv;var kC=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},qy=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},zp,bv,Sr=class extends Ne{constructor(e,t,i=!1){var r,a,l,h;super(e,t,i),zp.add(this);let v=this.memo.getType(P_).first(),_=this.memo.getType(M_).first(),p=this.memo.getType(A_).first();if(!_&&!p)throw new x("This playlist does not exist");this.info=Object.assign(Object.assign({},(r=this.page.metadata)===null||r===void 0?void 0:r.item().as(N_)),{author:(l=(a=p==null?void 0:p.owner)===null||a===void 0?void 0:a.as(mr).author)!==null&&l!==void 0?l:v==null?void 0:v.author,thumbnails:(h=_==null?void 0:_.thumbnail_renderer)===null||h===void 0?void 0:h.as(R_,k_).thumbnail,total_items:qy(this,zp,"m",bv).call(this,0,_),views:qy(this,zp,"m",bv).call(this,1,_),last_updated:qy(this,zp,"m",bv).call(this,2,_),can_share:v==null?void 0:v.can_share,can_delete:v==null?void 0:v.can_delete,is_editable:v==null?void 0:v.is_editable,privacy:v==null?void 0:v.privacy}),this.menu=_==null?void 0:_.menu,this.endpoint=_==null?void 0:_.endpoint,this.messages=this.memo.getType(pt)}get items(){return this.videos}getContinuation(){return kC(this,void 0,void 0,function*(){let e=yield this.getContinuationData();if(!e)throw new x("Could not get continuation data");return new Sr(this.actions,e,!0)})}};s(Sr,"Playlist");zp=new WeakSet,bv=s(function(e,t){var i;return!t||!t.stats?"N/A":((i=t.stats[e])===null||i===void 0?void 0:i.toString())||"N/A"},"_Playlist_getStat");var tn=Sr;var PC=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},NC=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},$y,Y1,wv=class extends Ne{constructor(e,t){var i,r;if(super(e,t),$y.add(this),!this.page.contents_memo)throw new x("Page contents not found");let a=(i=this.page.contents_memo.getType(O_))===null||i===void 0?void 0:i[0],l=(r=this.page.contents_memo.getType(B_))===null||r===void 0?void 0:r[0];this.profile={stats:a,user_info:l};let h=this.page.contents_memo.getType(fr);this.sections=h.map(v=>{var _;return{type:v.icon_type,title:v.title,contents:((_=v.content)===null||_===void 0?void 0:_.key("items").array())||[],getAll:()=>NC(this,$y,"m",Y1).call(this,v)}})}get history(){return this.sections.find(e=>e.type==="WATCH_HISTORY")}get watch_later(){return this.sections.find(e=>e.type==="WATCH_LATER")}get liked_videos(){return this.sections.find(e=>e.type==="LIKE")}get playlists_section(){return this.sections.find(e=>e.type==="PLAYLISTS")}get clips(){return this.sections.find(e=>e.type==="CONTENT_CUT")}};s(wv,"Library");$y=new WeakSet,Y1=s(function(e){var t;return PC(this,void 0,void 0,function*(){if(!(!((t=e.menu)===null||t===void 0)&&t.as(ee).hasKey("top_level_buttons")))throw new x(`The ${e.title.text} shelf doesn't have more items`);let i=e.menu.as(ee).top_level_buttons.firstOfType(M);if(!i)throw new x("Did not find target button.");let r=yield i.as(M).endpoint.call(this.actions,{parse:!0});switch(e.icon_type){case"LIKE":case"WATCH_LATER":return new tn(this.actions,r,!0);case"WATCH_HISTORY":return new Ir(this.actions,r,!0);case"CONTENT_CUT":return new Ne(this.actions,r,!0);default:throw new x("Target shelf not implemented.")}})},"_Library_getAll");var gv=wv;var It=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},ce=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},nn,Nn,go,Kt,ni,St;function MC(n){let e=[];for(let t of n)if(Array.isArray(t))for(let i of t)e.push(i);else e.push(t);return e}s(MC,"flattenQueue");var xv=class{constructor(){this.front=[],this.back=[]}isEmpty(){return!this.front.length&&!this.back.length}clear(){this.front=[],this.back=[]}getValues(){return this.front.concat(this.back.reverse())}};s(xv,"DelayQueue");var Tv=class{constructor(){nn.set(this,void 0),Nn.set(this,void 0),go.set(this,void 0),Kt.set(this,void 0),ni.set(this,void 0),St.set(this,void 0),It(this,nn,null,"f"),It(this,Nn,null,"f"),It(this,go,null,"f"),It(this,Kt,[],"f"),It(this,ni,null,"f"),It(this,St,new xv,"f")}enqueueActionGroup(e){if(ce(this,nn,"f")!==null){let t=Date.now()-ce(this,nn,"f");ce(this,St,"f").back.push(t),5<ce(this,St,"f").front.length+ce(this,St,"f").back.length&&(ce(this,St,"f").front.length||(ce(this,St,"f").front=ce(this,St,"f").back,ce(this,St,"f").front.reverse(),ce(this,St,"f").back=[]),ce(this,St,"f").front.pop()),It(this,Nn,Math.max(...ce(this,St,"f").getValues()),"f")}It(this,nn,Date.now(),"f"),ce(this,Kt,"f").push(e),ce(this,ni,"f")===null&&It(this,ni,setTimeout(this.emitSmoothedActions.bind(this)),"f")}emitSmoothedActions(){if(It(this,ni,null,"f"),ce(this,Kt,"f").length){let e=1e4;ce(this,Nn,"f")!==null&&ce(this,nn,"f")!==null&&(e=ce(this,Nn,"f")-Date.now()+ce(this,nn,"f")),e=ce(this,Kt,"f").length<e/80?1:Math.ceil(ce(this,Kt,"f").length/(e/80));let t=MC(ce(this,Kt,"f").splice(0,e));ce(this,go,"f")&&ce(this,go,"f").call(this,t),ce(this,Kt,"f")!==null&&(e==1?(e=ce(this,Nn,"f")/ce(this,Kt,"f").length,e*=Math.random()+.5,e=Math.min(1e3,e),e=Math.max(80,e)):e=80,It(this,ni,setTimeout(this.emitSmoothedActions.bind(this),e),"f"))}}clear(){ce(this,ni,"f")!==null&&(clearTimeout(ce(this,ni,"f")),It(this,ni,null,"f")),It(this,Kt,[],"f")}set callback(e){It(this,go,e,"f")}get callback(){return ce(this,go,"f")}get action_queue(){return ce(this,Kt,"f")}get estimated_update_interval(){return ce(this,Nn,"f")}get last_update_time(){return ce(this,nn,"f")}get next_update_id(){return ce(this,ni,"f")}get poll_response_delay_queue(){return ce(this,St,"f")}};s(Tv,"SmoothedQueue");nn=new WeakMap,Nn=new WeakMap,go=new WeakMap,Kt=new WeakMap,ni=new WeakMap,St=new WeakMap;var Iv=Tv;var Mn=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},Ti=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},Te=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},tt,on,$p,Sv,To,Kp,qp,Xy,Cv,U1,xo,Ev=class extends Yi{constructor(e){var t,i;super(),tt.add(this),on.set(this,void 0),$p.set(this,void 0),Sv.set(this,void 0),To.set(this,void 0),Kp.set(this,void 0),qp.set(this,0),this.running=!1,this.is_replay=!1,Ti(this,$p,e.basic_info.id,"f"),Ti(this,Sv,e.basic_info.channel_id,"f"),Ti(this,on,e.actions,"f"),Ti(this,To,(t=e.livechat)===null||t===void 0?void 0:t.continuation,"f"),this.is_replay=((i=e.livechat)===null||i===void 0?void 0:i.is_replay)||!1,this.smoothed_queue=new Iv,this.smoothed_queue.callback=r=>Mn(this,void 0,void 0,function*(){r.length?r.length<10?yield Te(this,tt,"m",Cv).call(this,r):this.is_replay?(Te(this,tt,"m",Cv).call(this,r),yield Te(this,tt,"m",xo).call(this,2e3)):Te(this,tt,"m",Cv).call(this,r):yield Te(this,tt,"m",xo).call(this,2e3),this.running&&Te(this,tt,"m",Xy).call(this)})}on(e,t){super.on(e,t)}once(e,t){super.once(e,t)}start(){this.running||(this.running=!0,Te(this,tt,"m",Xy).call(this),Te(this,tt,"m",U1).call(this))}stop(){this.smoothed_queue.clear(),this.running=!1}sendMessage(e){return Mn(this,void 0,void 0,function*(){let t=yield Te(this,on,"f").execute("/live_chat/send_message",{params:Ve.encodeMessageParams(Te(this,Sv,"f"),Te(this,$p,"f")),richMessage:{textSegments:[{text:e}]},clientMessageId:U.shim.uuidv4(),client:"ANDROID",parse:!0});if(!t.actions)throw new x("Unexpected response from send_message",t);return t.actions.array().as(Zm)})}applyFilter(e){var t,i,r,a,l,h,v;if(!this.initial_info)throw new x("Cannot apply filter before initial info is retrieved.");let _=(r=(i=(t=this.initial_info)===null||t===void 0?void 0:t.header)===null||i===void 0?void 0:i.view_selector)===null||r===void 0?void 0:r.sub_menu_items;if(e==="TOP_CHAT"){if(!((a=_==null?void 0:_.at(0))===null||a===void 0)&&a.selected)return;Ti(this,To,(l=_==null?void 0:_.at(0))===null||l===void 0?void 0:l.continuation,"f")}else{if(!((h=_==null?void 0:_.at(1))===null||h===void 0)&&h.selected)return;Ti(this,To,(v=_==null?void 0:_.at(1))===null||v===void 0?void 0:v.continuation,"f")}}getItemMenu(e){return Mn(this,void 0,void 0,function*(){if(!e.hasKey("menu_endpoint")||!e.key("menu_endpoint").isInstanceof(T))throw new x("This item does not have a menu.",e);let t=yield e.key("menu_endpoint").instanceof(T).call(Te(this,on,"f"),{parse:!0});if(!t)throw new x("Could not retrieve item menu.",e);return new yv(t,Te(this,on,"f"))})}selectButton(e){return Mn(this,void 0,void 0,function*(){return yield e.endpoint.call(Te(this,on,"f"),{parse:!0})})}};s(Ev,"LiveChat");on=new WeakMap,$p=new WeakMap,Sv=new WeakMap,To=new WeakMap,Kp=new WeakMap,qp=new WeakMap,tt=new WeakSet,Xy=s(function n(){Mn(this,void 0,void 0,function*(){var e,t;try{let i=yield Te(this,on,"f").execute(this.is_replay?"live_chat/get_live_chat_replay":"live_chat/get_live_chat",{continuation:Te(this,To,"f"),parse:!0}),r=i.continuation_contents;if(r||(this.emit("error",new x("Unexpected live chat incremental continuation response",i)),this.emit("end"),this.stop()),!(r instanceof ho)){this.stop(),this.emit("end");return}Ti(this,To,r.continuation.token,"f"),r.header?(this.initial_info=r,this.emit("start",r),this.running&&Te(this,tt,"m",n).call(this)):this.smoothed_queue.enqueueActionGroup(r.actions),Ti(this,qp,0,"f")}catch(i){this.emit("error",i),Ti(this,qp,(t=Te(this,qp,"f"),e=t++,t),"f"),e<10?(yield Te(this,tt,"m",xo).call(this,2e3),Te(this,tt,"m",n).call(this)):(this.emit("error",new x("Reached retry limit for incremental continuation requests",i)),this.emit("end"),this.stop())}})},"_LiveChat_pollLivechat"),Cv=s(function(e){return Mn(this,void 0,void 0,function*(){let i=e.length<125?1:Math.ceil(e.length/125),r=i==1?(i=1e4/e.length,i*=Math.random()+.5,i=Math.min(1e3,i),i=Math.max(80,i)):i=80;for(let a of e)yield Te(this,tt,"m",xo).call(this,r),this.emit("chat-update",a)})},"_LiveChat_emitSmoothedActions"),U1=s(function n(){Mn(this,void 0,void 0,function*(){var e,t,i,r,a,l,h,v,_,p,b;try{let I={videoId:Te(this,$p,"f")};Te(this,Kp,"f")&&(I.continuation=Te(this,Kp,"f"));let C=yield Te(this,on,"f").execute("/updated_metadata",I),k=f.parseResponse(C.data);Ti(this,Kp,(e=k.continuation)===null||e===void 0?void 0:e.token,"f"),this.metadata={title:((t=k.actions)===null||t===void 0?void 0:t.array().firstOfType(r_))||((i=this.metadata)===null||i===void 0?void 0:i.title),description:((r=k.actions)===null||r===void 0?void 0:r.array().firstOfType(o_))||((a=this.metadata)===null||a===void 0?void 0:a.description),views:((l=k.actions)===null||l===void 0?void 0:l.array().firstOfType(a_))||((h=this.metadata)===null||h===void 0?void 0:h.views),likes:((v=k.actions)===null||v===void 0?void 0:v.array().firstOfType(s_))||((_=this.metadata)===null||_===void 0?void 0:_.likes),date:((p=k.actions)===null||p===void 0?void 0:p.array().firstOfType(n_))||((b=this.metadata)===null||b===void 0?void 0:b.date)},this.emit("metadata-update",this.metadata),yield Te(this,tt,"m",xo).call(this,5e3),this.running&&Te(this,tt,"m",n).call(this)}catch(I){yield Te(this,tt,"m",xo).call(this,2e3),this.running&&Te(this,tt,"m",n).call(this)}})},"_LiveChat_pollMetadata"),xo=s(function(e){return Mn(this,void 0,void 0,function*(){return new Promise(t=>setTimeout(()=>t(),e))})},"_LiveChat_wait");var kv=Ev;var AC=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},W1=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},Cr=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},Io,Xp,Er=class{constructor(e,t){Io.set(this,void 0),Xp.set(this,void 0),W1(this,Xp,e,"f"),W1(this,Io,f.parseResponse(t.data),"f"),this.header=Cr(this,Io,"f").actions_memo.getType(c_).first(),this.contents=Cr(this,Io,"f").actions_memo.getType(T_)}getContinuation(){return AC(this,void 0,void 0,function*(){let e=Cr(this,Io,"f").actions_memo.getType(rt).first();if(!e)throw new x("Continuation not found");let t=yield e.endpoint.call(Cr(this,Xp,"f"),{parse:!1});return new Er(Cr(this,Xp,"f"),t)})}get page(){return Cr(this,Io,"f")}};s(Er,"NotificationsMenu");Io=new WeakMap,Xp=new WeakMap;var Pv=Er;var G1=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},So=class extends Ne{constructor(e,t,i=!1){var r,a,l,h,v,_;super(e,t,i);let p=((r=this.page.contents_memo)===null||r===void 0?void 0:r.getType(pe).first().contents)||((a=this.page.on_response_received_commands)===null||a===void 0?void 0:a.first().contents);if(!p)throw new x("No contents found in search response");this.results=(l=p.firstOfType(Re))===null||l===void 0?void 0:l.contents,this.refinements=this.page.refinements||[],this.estimated_results=this.page.estimated_results,this.sub_menu=(h=this.page.contents_memo)===null||h===void 0?void 0:h.getType(G_).first(),this.watch_card=(v=this.page.contents_memo)===null||v===void 0?void 0:v.getType(Z_).first(),this.refinement_cards=(_=this.results)===null||_===void 0?void 0:_.firstOfType(or)}selectRefinementCard(e){var t,i;return G1(this,void 0,void 0,function*(){let r;if(typeof e=="string"){if(!this.refinement_cards)throw new x("No refinement cards found.");if(r=(i=(t=this.refinement_cards)===null||t===void 0?void 0:t.cards.get({query:e}))===null||i===void 0?void 0:i.as(Qn),!r)throw new x(`Refinement card "${e}" not found`,{available_cards:this.refinement_card_queries})}else if(e.type==="SearchRefinementCard")r=e;else throw new x("Invalid refinement card!");let a=yield r.endpoint.call(this.actions,{parse:!0});return new So(this.actions,a,!0)})}get refinement_card_queries(){var e;return((e=this.refinement_cards)===null||e===void 0?void 0:e.cards.as(Qn).map(t=>t.query))||[]}getContinuation(){return G1(this,void 0,void 0,function*(){let e=yield this.getContinuationData();if(!e)throw new x("Could not get continuation data");return new So(this.actions,e,!0)})}};s(So,"Search");var Nv=So;var VC=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},J1=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},kr=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},Co,Qp,Pr=class{constructor(e,t){var i,r,a,l;if(Co.set(this,void 0),Qp.set(this,void 0),J1(this,Qp,e,"f"),J1(this,Co,f.parseResponse(t.data),"f"),this.sidebar=(i=kr(this,Co,"f").sidebar)===null||i===void 0?void 0:i.as(z_),!kr(this,Co,"f").contents)throw new x("Page contents not found");let h=kr(this,Co,"f").contents.item().as(In).tabs.array().as(Ee).get({selected:!0});if(!h)throw new x("Target tab not found");let v=(r=h.content)===null||r===void 0?void 0:r.as(pe).contents.as(Re);this.introduction=(l=(a=v==null?void 0:v.shift())===null||a===void 0?void 0:a.contents)===null||l===void 0?void 0:l.firstOfType(I_),this.sections=v==null?void 0:v.map(_=>{var p;return{title:((p=_.header)===null||p===void 0?void 0:p.title.toString())||null,contents:_.contents}})}selectSidebarItem(e){return VC(this,void 0,void 0,function*(){if(!this.sidebar)throw new x("Sidebar not available");let t;if(typeof e=="string"){if(t=this.sidebar.items.get({title:e}),!t)throw new x(`Item "${e}" not found`,{available_items:this.sidebar_items})}else if(e!=null&&e.is(tr))t=e;else throw new x("Invalid item",{target_item:e});let i=yield t.endpoint.call(kr(this,Qp,"f"),{parse:!1});return new Pr(kr(this,Qp,"f"),i)})}getSettingOption(e){var t;if(!this.sections)throw new x("Sections not available");for(let i of this.sections)if(!!i.contents)for(let r of i.contents){let a=r.as(pr).options;if(a){for(let l of a)if(l.is(dr)&&((t=l.title)===null||t===void 0?void 0:t.toString())===e)return l}}throw new x(`Option "${e}" not found`,{available_options:this.setting_options})}get setting_options(){if(!this.sections)throw new x("Sections not available");let e=[];for(let t of this.sections)if(!!t.contents)for(let i of t.contents)i.as(pr).options&&(e=e.concat(i.as(pr).options));return e.map(t=>{var i;return(i=t.title)===null||i===void 0?void 0:i.toString()}).filter(t=>t)}get sidebar_items(){if(!this.sidebar)throw new x("Sidebar not available");return this.sidebar.items.map(e=>e.title.toString())}get page(){return kr(this,Co,"f")}};s(Pr,"Settings");Co=new WeakMap,Qp=new WeakMap;var Mv=Pr;var RC=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},Qy=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},Nr,Av=class{constructor(e){var t;if(Nr.set(this,void 0),RC(this,Nr,f.parseResponse(e.data),"f"),!Qy(this,Nr,"f").contents)throw new x("Page contents not found");let i=Qy(this,Nr,"f").contents.item().as(gi).tabs.get({selected:!0});if(!i)throw new x("Could not find target tab.");this.contents=(t=i.content)===null||t===void 0?void 0:t.as(pe).contents.as(Re)}get page(){return Qy(this,Nr,"f")}};s(Av,"TimeWatched");Nr=new WeakMap;var Vv=Av;var FC=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},Rv=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},Eo,Zp=class{constructor(e,t){Eo.set(this,void 0),FC(this,Eo,new U.shim.Cache(e,t),"f")}get cache_dir(){return Rv(this,Eo,"f").cache_dir}get(e){return Rv(this,Eo,"f").get(e)}set(e,t){return Rv(this,Eo,"f").set(e,t)}remove(e){return Rv(this,Eo,"f").remove(e)}};s(Zp,"UniversalCache");Eo=new WeakMap;var OC=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},Zy=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},Ct=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},eb,oi,Mr,ef,H1,ko=class{constructor(e,t,i){eb.add(this),oi.set(this,void 0),Mr.set(this,void 0),ef.set(this,void 0),Zy(this,oi,e,"f"),Zy(this,Mr,t,"f"),Zy(this,ef,i||U.shim.fetch,"f")}get fetch_function(){return Ct(this,ef,"f")}fetch(e,t){return OC(this,void 0,void 0,function*(){let i=G.URLS.API.PRODUCTION_1+Ct(this,oi,"f").api_version,r=(t==null?void 0:t.baseURL)||i,a=typeof e=="string"?!r.endsWith("/")&&!e.startsWith("/")?new URL(`${r}/${e}`):new URL(r+e):e instanceof URL?e:new URL(e.url,r),l=(t==null?void 0:t.headers)||(e instanceof U.shim.Request?e.headers:new U.shim.Headers)||new U.shim.Headers,h=(t==null?void 0:t.body)||(e instanceof U.shim.Request?e.body:void 0),v=new U.shim.Headers(l);v.set("Accept","*/*"),v.set("Accept-Language","*"),v.set("x-goog-visitor-id",Ct(this,oi,"f").context.client.visitorData||""),v.set("x-origin",a.origin),v.set("x-youtube-client-version",Ct(this,oi,"f").context.client.clientVersion||""),U.shim.server&&(v.set("User-Agent",hn("desktop")),v.set("origin",a.origin)),a.searchParams.set("key",Ct(this,oi,"f").key),a.searchParams.set("prettyPrint","false"),a.searchParams.set("alt","json");let _=v.get("Content-Type"),p=h,b=!1,I=r===i||r===G.URLS.YT_UPLOAD;if(_==="application/json"&&I&&typeof h=="string"){let F=JSON.parse(h),V=Object.assign(Object.assign({},F),{context:JSON.parse(JSON.stringify(Ct(this,oi,"f").context))});Ct(this,eb,"m",H1).call(this,V.context,V.client),v.set("x-youtube-client-version",V.context.client.clientVersion),delete V.client,U.shim.server&&(V.context.client.clientName==="ANDROID"||V.context.client.clientName==="ANDROID_MUSIC")&&v.set("User-Agent",G.CLIENTS.ANDROID.USER_AGENT),b=V.context.client.clientName==="WEB_KIDS",p=JSON.stringify(V)}if(Ct(this,oi,"f").logged_in&&I&&!b){let F=Ct(this,oi,"f").oauth;if(F.validateCredentials()&&(yield F.refreshIfRequired(),v.set("authorization",`Bearer ${F.credentials.access_token}`),a.searchParams.delete("key")),Ct(this,Mr,"f")){let V=wt(Ct(this,Mr,"f"),"PAPISID=",";");V&&(v.set("authorization",yield D0(V)),v.set("x-goog-authuser",Ct(this,oi,"f").account_index.toString())),v.set("cookie",Ct(this,Mr,"f"))}}let C=new U.shim.Request(a,e instanceof U.shim.Request?e:t),k=yield Ct(this,ef,"f").call(this,C,{body:p,headers:v,credentials:"include",redirect:e instanceof U.shim.Request?e.redirect:(t==null?void 0:t.redirect)||"follow"});if(k.ok)return k;throw new x(`Request to ${k.url} failed with status ${k.status}`,yield k.text())})}};s(ko,"HTTPClient");oi=new WeakMap,Mr=new WeakMap,ef=new WeakMap,eb=new WeakSet,H1=s(function(e,t){switch(t){case"YTMUSIC":e.client.clientVersion=G.CLIENTS.YTMUSIC.VERSION,e.client.clientName=G.CLIENTS.YTMUSIC.NAME;break;case"ANDROID":e.client.clientVersion=G.CLIENTS.ANDROID.VERSION,e.client.clientFormFactor="SMALL_FORM_FACTOR",e.client.clientName=G.CLIENTS.ANDROID.NAME,e.client.androidSdkVersion=G.CLIENTS.ANDROID.SDK_VERSION,e.client.platform="MOBILE";break;case"YTMUSIC_ANDROID":e.client.clientVersion=G.CLIENTS.YTMUSIC_ANDROID.VERSION,e.client.clientFormFactor="SMALL_FORM_FACTOR",e.client.clientName=G.CLIENTS.YTMUSIC_ANDROID.NAME,e.client.androidSdkVersion=G.CLIENTS.ANDROID.SDK_VERSION,e.client.platform="MOBILE";break;case"YTSTUDIO_ANDROID":e.client.clientVersion=G.CLIENTS.YTSTUDIO_ANDROID.VERSION,e.client.clientFormFactor="SMALL_FORM_FACTOR",e.client.clientName=G.CLIENTS.YTSTUDIO_ANDROID.NAME,e.client.androidSdkVersion=G.CLIENTS.ANDROID.SDK_VERSION;break;case"TV_EMBEDDED":e.client.clientName=G.CLIENTS.TV_EMBEDDED.NAME,e.client.clientVersion=G.CLIENTS.TV_EMBEDDED.VERSION,e.client.clientScreen="EMBED",e.thirdParty={embedUrl:G.URLS.YT_BASE};break;case"YTKIDS":e.client.clientVersion=G.CLIENTS.WEB_KIDS.VERSION,e.client.clientName=G.CLIENTS.WEB_KIDS.NAME,e.client.kidsAppInfo={categorySettings:{enabledCategories:["approved_for_you","black_joy","camp","collections","earth","explore","favorites","gaming","halloween","hero","learning","move","music","reading","shared_by_parents","shows","soccer","sports","spotlight","winter"]},contentSettings:{corpusPreference:"KIDS_CORPUS_PREFERENCE_YOUNGER",kidsNoSearchMode:"YT_KIDS_NO_SEARCH_MODE_OFF"}};break;default:break}},"_HTTPClient_adjustContext");var Ii=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},Je=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},BC=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(a){t[a]=n[a]&&function(l){return new Promise(function(h,v){l=n[a](l),r(h,v,l.done,l.value)})}}function r(a,l,h,v){Promise.resolve(v).then(function(_){a({value:_,done:h})},l)}},Ye,Et,q1,z1,tb,ib,K1,nf=class{static download(e,t,i,r,a,l){return Ii(this,void 0,void 0,function*(){if((i==null?void 0:i.status)==="UNPLAYABLE")throw new x("Video is unplayable",{error_type:"UNPLAYABLE"});if((i==null?void 0:i.status)==="LOGIN_REQUIRED")throw new x("Video is login required",{error_type:"LOGIN_REQUIRED"});if(!r)throw new x("Streaming data not available.",{error_type:"NO_STREAMING_DATA"});let h=Object.assign({quality:"360p",type:"video+audio",format:"mp4",range:void 0},e),v=this.chooseFormat(h,r),_=v.decipher(a);if(h.type==="video+audio"&&!e.range){let V=yield t.session.http.fetch_function(`${_}&cpn=${l}`,{method:"GET",headers:ji.STREAM_HEADERS,redirect:"follow"});if(!V.ok)throw new x("The server responded with a non 2xx status code",{error_type:"FETCH_FAILED",response:V});let D=V.body;if(!D)throw new x("Could not get ReadableStream from fetch Response.",{error_type:"FETCH_FAILED",response:V});return D}let p=1048576*10,b=e.range?e.range.start:0,I=e.range?e.range.end:p,C=!1,k;return new U.shim.ReadableStream({start(){},pull:V=>Ii(this,void 0,void 0,function*(){if(C){V.close();return}return(I>=v.content_length||e.range)&&(C=!0),new Promise((D,Y)=>Ii(this,void 0,void 0,function*(){var B,w,ye,Ke;try{k=new AbortController;let J=yield t.session.http.fetch_function(`${_}&cpn=${l}&range=${b}-${I||""}`,{method:"GET",headers:Object.assign({},ji.STREAM_HEADERS),signal:k.signal}),ae=J.body;if(!ae)throw new x("Could not get ReadableStream from fetch Response.",{video:this,error_type:"FETCH_FAILED",response:J});try{for(var Ie=!0,Qe=BC(Y0(ae)),ne;ne=yield Qe.next(),B=ne.done,!B;){Ke=ne.value,Ie=!1;try{let ue=Ke;V.enqueue(ue)}finally{Ie=!0}}}catch(ue){w={error:ue}}finally{try{!Ie&&!B&&(ye=Qe.return)&&(yield ye.call(Qe))}finally{if(w)throw w.error}}b=I+1,I+=p,D();return}catch(J){Y(J)}}))}),cancel(V){return Ii(this,void 0,void 0,function*(){k.abort(V)})}},{highWaterMark:1,size(V){return V.byteLength}})})}static chooseFormat(e,t){if(!t)throw new x("Streaming data not available");let i=[...t.formats||[],...t.adaptive_formats||[]],r=e.type?e.type.includes("audio"):!0,a=e.type?e.type.includes("video"):!0,l=e.language||"original",h=e.quality||"best",v=-1,_=["best","bestefficiency"].includes(h),p=h!=="best",b=i.filter(I=>r&&!I.has_audio||a&&!I.has_video||e.format!=="any"&&!I.mime_type.includes(e.format||"mp4")||!_&&I.quality_label!==h?!1:(v<I.width&&(v=I.width),!0));if(!b.length)throw new x("No matching formats found",{options:e});if(_&&a&&(b=b.filter(I=>I.width===v)),r&&!a){let I=b.filter(C=>l!=="original"?!C.has_video&&C.language===l:!C.has_video&&C.is_original);I.length>0&&(b=I)}return p?b.sort((I,C)=>I.bitrate-C.bitrate):b.sort((I,C)=>C.bitrate-I.bitrate),b[0]}static toDash(e,t=h=>h,i,r,a,l){return Ii(this,void 0,void 0,function*(){if(!e)throw new x("Streaming data not available");let h;i?h={formats:e.formats.filter(C=>!i(C)),adaptive_formats:e.adaptive_formats.filter(C=>!i(C)),expires:e.expires,dash_manifest_url:e.dash_manifest_url,hls_manifest_url:e.hls_manifest_url}:h=e;let{adaptive_formats:v}=h;if(!v.length)throw new x("No adaptive formats found");let _=v[0].approx_duration_ms/1e3,p=new U.shim.DOMParser().parseFromString('<?xml version="1.0" encoding="utf-8"?><MPD />',"application/xml"),b=p.querySelector("MPD"),I=p.createElement("Period");return b.replaceWith(Je(this,Ye,"m",Et).call(this,p,"MPD",{xmlns:"urn:mpeg:dash:schema:mpd:2011",minBufferTime:"PT1.500S",profiles:"urn:mpeg:dash:profile:isoff-main:2011",type:"static",mediaPresentationDuration:`PT${_}S`,"xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation":"urn:mpeg:dash:schema:mpd:2011 http://standards.iso.org/ittf/PubliclyAvailableStandards/MPEG-DASH_schema_files/DASH-MPD.xsd"},[I])),yield Je(this,Ye,"m",q1).call(this,p,I,v,t,r,a,l),U.shim.serializeDOM(p)})}};s(nf,"FormatUtils");Ye=nf,Et=s(function(e,t,i,r=[]){let a=e.createElement(t);for(let[l,h]of Object.entries(i))h&&a.setAttribute(l,h);for(let l of r)typeof l>"u"||a.appendChild(l);return a},"_FormatUtils_el"),q1=s(function(e,t,i,r,a,l,h){var v;return Ii(this,void 0,void 0,function*(){let _=[],p=[[]];i.forEach(I=>{if((!I.index_range||!I.init_range)&&!I.is_type_otf)return;let C=I.mime_type,k=_.indexOf(C);k>-1?p[k].push(I):(_.push(C),p.push([]),p[_.length-1].push(I))});let b=0;for(let I=0;I<_.length;I++)if(p[I][0].has_audio&&p[I][0].audio_track){let C=[],k=[[]];p[I].forEach(F=>{var V,D;let Y=C.indexOf((V=F.audio_track)===null||V===void 0?void 0:V.id);Y>-1?k[Y].push(F):(C.push((D=F.audio_track)===null||D===void 0?void 0:D.id),k.push([]),k[C.length-1].push(F))});for(let F=0;F<C.length;F++){let V=k[F][0],D=[],Y;!((v=V.audio_track)===null||v===void 0)&&v.audio_is_default?Y="main":V.is_dubbed?Y="dub":V.is_descriptive?Y="description":Y="alternate",D.push(Je(this,Ye,"m",Et).call(this,e,"Role",{schemeIdUri:"urn:mpeg:dash:role:2011",value:Y}));let B=Je(this,Ye,"m",Et).call(this,e,"AdaptationSet",{id:`${b++}`,mimeType:_[I].split(";")[0],startWithSAP:"1",subsegmentAlignment:"true",lang:V.language},D);t.appendChild(B);for(let w of k[F])yield Je(this,Ye,"m",tb).call(this,e,B,w,r,a,l,h)}}else{let C=Je(this,Ye,"m",Et).call(this,e,"AdaptationSet",{id:`${b++}`,mimeType:_[I].split(";")[0],startWithSAP:"1",subsegmentAlignment:"true"});t.appendChild(C);for(let k of p[I])k.has_video?yield Je(this,Ye,"m",z1).call(this,e,C,k,r,a,l,h):yield Je(this,Ye,"m",tb).call(this,e,C,k,r,a,l,h)}})},"_FormatUtils_generateAdaptationSet"),z1=s(function(e,t,i,r,a,l,h){var v,_,p,b,I,C;return Ii(this,void 0,void 0,function*(){let k=wt(i.mime_type,'codecs="','"'),F=new URL(i.decipher(l));F.searchParams.set("cpn",a||"");let V=Je(this,Ye,"m",Et).call(this,e,"Representation",{id:(v=i.itag)===null||v===void 0?void 0:v.toString(),codecs:k,bandwidth:(_=i.bitrate)===null||_===void 0?void 0:_.toString(),width:(p=i.width)===null||p===void 0?void 0:p.toString(),height:(b=i.height)===null||b===void 0?void 0:b.toString(),maxPlayoutRate:"1",frameRate:(I=i.fps)===null||I===void 0?void 0:I.toString()});t.appendChild(V),yield Je(this,Ye,"m",ib).call(this,e,V,i,(C=r(F))===null||C===void 0?void 0:C.toString(),h)})},"_FormatUtils_generateRepresentationVideo"),tb=s(function(e,t,i,r,a,l,h){var v,_,p,b,I,C;return Ii(this,void 0,void 0,function*(){let k=wt(i.mime_type,'codecs="','"'),F=new URL(i.decipher(l));F.searchParams.set("cpn",a||"");let V;i.audio_track?V=`${(v=i.itag)===null||v===void 0?void 0:v.toString()}-${i.audio_track.id}`:V=(_=i.itag)===null||_===void 0?void 0:_.toString();let D=Je(this,Ye,"m",Et).call(this,e,"Representation",{id:V,codecs:k,bandwidth:(p=i.bitrate)===null||p===void 0?void 0:p.toString(),audioSamplingRate:(b=i.audio_sample_rate)===null||b===void 0?void 0:b.toString()},[Je(this,Ye,"m",Et).call(this,e,"AudioChannelConfiguration",{schemeIdUri:"urn:mpeg:dash:23003:3:audio_channel_configuration:2011",value:((I=i.audio_channels)===null||I===void 0?void 0:I.toString())||"2"})]);t.appendChild(D),yield Je(this,Ye,"m",ib).call(this,e,D,i,(C=r(F))===null||C===void 0?void 0:C.toString(),h)})},"_FormatUtils_generateRepresentationAudio"),ib=s(function(e,t,i,r,a){return Ii(this,void 0,void 0,function*(){if(i.is_type_otf){if(!a)throw new x("Unable to get segment durations for this OTF stream without an Actions instance",{format:i});let{resolved_url:l,segment_durations:h}=yield Je(this,Ye,"m",K1).call(this,r,a),v=[];for(let _ of h){let p;typeof _.repeat_count>"u"?p={d:_.duration.toString()}:p={d:_.duration.toString(),r:_.repeat_count.toString()},v.push(Je(this,Ye,"m",Et).call(this,e,"S",p))}t.appendChild(Je(this,Ye,"m",Et).call(this,e,"SegmentTemplate",{startNumber:"1",timescale:"1000",initialization:`${l}&sq=0`,media:`${l}&sq=$Number$`},[Je(this,Ye,"m",Et).call(this,e,"SegmentTimeline",{},v)]))}else{if(!i.index_range||!i.init_range)throw new x("Index and init ranges not available",{format:i});t.appendChild(Je(this,Ye,"m",Et).call(this,e,"BaseURL",{},[e.createTextNode(r)])),t.appendChild(Je(this,Ye,"m",Et).call(this,e,"SegmentBase",{indexRange:`${i.index_range.start}-${i.index_range.end}`},[Je(this,Ye,"m",Et).call(this,e,"Initialization",{range:`${i.init_range.start}-${i.init_range.end}`})]))}})},"_FormatUtils_generateSegmentInformation"),K1=s(function(e,t){var i;return Ii(this,void 0,void 0,function*(){let r=yield t.session.http.fetch_function(`${e}&rn=0&sq=0`,{method:"GET",headers:ji.STREAM_HEADERS,redirect:"follow"}),a=r.url.replace("&rn=0","").replace("&sq=0",""),l=yield r.text(),h=(i=wt(l,"Segment-Durations-Ms:",`\r
`))===null||i===void 0?void 0:i.split(",");if(!h)throw new x("Failed to extract the segment durations from this OTF stream",{url:e});let v=[];for(let _ of h){let p=_.trim();if(p.length===0)continue;let b,I=wt(p,"(r=",")");I&&(b=parseInt(I)),v.push({duration:parseInt(p),repeat_count:b})}return{resolved_url:a,segment_durations:v}})},"_FormatUtils_getOTFSegmentInformation");var tf=nf;var nb=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},Fv=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},qt=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},Ov,rn,Ar,of,sn=class{constructor(e,t,i){var r,a;Ov.set(this,void 0),rn.set(this,void 0),Ar.set(this,void 0),of.set(this,void 0),Fv(this,rn,t,"f");let l=f.parseResponse(e[0].data),h=!((r=e==null?void 0:e[1])===null||r===void 0)&&r.data?f.parseResponse(e[1].data):void 0;if(Fv(this,Ov,[l,h],"f"),Fv(this,Ar,i,"f"),((a=l.playability_status)===null||a===void 0?void 0:a.status)==="ERROR")throw new x("This video is unavailable",l.playability_status);this.streaming_data=l.streaming_data,this.playability_status=l.playability_status,Fv(this,of,l.playback_tracking,"f")}toDash(e,t){return nb(this,void 0,void 0,function*(){return tf.toDash(this.streaming_data,e,t,qt(this,Ar,"f"),qt(this,rn,"f").session.player,qt(this,rn,"f"))})}chooseFormat(e){return tf.chooseFormat(e,this.streaming_data)}download(e={}){return nb(this,void 0,void 0,function*(){return tf.download(e,qt(this,rn,"f"),this.playability_status,this.streaming_data,qt(this,rn,"f").session.player,this.cpn)})}addToWatchHistory(e=G.CLIENTS.WEB.NAME,t=G.CLIENTS.WEB.VERSION,i="https://www."){return nb(this,void 0,void 0,function*(){if(!qt(this,of,"f"))throw new x("Playback tracking not available");let r={cpn:qt(this,Ar,"f"),fmt:251,rtn:0,rt:0},a=qt(this,of,"f").videostats_playback_url.replace("https://s.",i);return yield qt(this,rn,"f").stats(a,{client_name:e,client_version:t},r)})}get actions(){return qt(this,rn,"f")}get cpn(){return qt(this,Ar,"f")}get page(){return qt(this,Ov,"f")}};s(sn,"MediaInfo");Ov=new WeakMap,rn=new WeakMap,Ar=new WeakMap,of=new WeakMap;var Vr=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},ob=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},rb=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},An,Rr=class extends sn{constructor(e,t,i){var r,a,l,h,v,_,p,b,I,C,k,F,V,D,Y,B,w,ye,Ke,Ie,Qe,ne,J,ae,ue,at,ut,At,Ze,qe,Gt,nt,lt,bt,_t,Vt,Jt;super(e,t,i),An.set(this,void 0);let[he,Ae]=this.page;if(he.microformat&&!(!((r=he.microformat)===null||r===void 0)&&r.is(wi,vi)))throw new x("Invalid microformat",he.microformat);this.basic_info=Object.assign(Object.assign(Object.assign({},he.video_details),{embed:!((a=he.microformat)===null||a===void 0)&&a.is(wi)?(l=he.microformat)===null||l===void 0?void 0:l.embed:null,channel:!((h=he.microformat)===null||h===void 0)&&h.is(wi)?(v=he.microformat)===null||v===void 0?void 0:v.channel:null,is_unlisted:(_=he.microformat)===null||_===void 0?void 0:_.is_unlisted,is_family_safe:(p=he.microformat)===null||p===void 0?void 0:p.is_family_safe,category:!((b=he.microformat)===null||b===void 0)&&b.is(wi)?(I=he.microformat)===null||I===void 0?void 0:I.category:null,has_ypc_metadata:!((C=he.microformat)===null||C===void 0)&&C.is(wi)?(k=he.microformat)===null||k===void 0?void 0:k.has_ypc_metadata:null,start_timestamp:!((F=he.microformat)===null||F===void 0)&&F.is(wi)?he.microformat.start_timestamp:null}),{like_count:void 0,is_liked:void 0,is_disliked:void 0}),this.annotations=he.annotations,this.storyboards=he.storyboards,this.endscreen=he.endscreen,this.captions=he.captions,this.cards=he.cards;let De=(V=Ae==null?void 0:Ae.contents)===null||V===void 0?void 0:V.item().as(hr),ci=De==null?void 0:De.results,Yn=De==null?void 0:De.secondary_results;if(ci&&Yn){if(((D=he.microformat)===null||D===void 0?void 0:D.is(wi))&&((Y=he.microformat)===null||Y===void 0?void 0:Y.category)==="Gaming"){let Rt=(ye=(w=(B=ci.firstOfType(Pp))===null||B===void 0?void 0:B.metadata)===null||w===void 0?void 0:w.rows)===null||ye===void 0?void 0:ye.firstOfType(Td);Rt!=null&&Rt.is(Td)&&(this.game_info={title:(Ie=(Ke=Rt==null?void 0:Rt.contents)===null||Ke===void 0?void 0:Ke.firstOfType(gd))===null||Ie===void 0?void 0:Ie.title,release_year:(ne=(Qe=Rt==null?void 0:Rt.contents)===null||Qe===void 0?void 0:Qe.firstOfType(gd))===null||ne===void 0?void 0:ne.subtitle})}this.primary_info=ci.firstOfType(ev),this.secondary_info=ci.firstOfType(Pp),this.merchandise=ci.firstOfType(d_),this.related_chip_cloud=(J=Yn.firstOfType(j_))===null||J===void 0?void 0:J.content.item().as(Wi),De!=null&&De.playlist&&(this.playlist=De.playlist),this.watch_next_feed=((ae=Yn.firstOfType(Re))===null||ae===void 0?void 0:ae.contents)||Yn,this.watch_next_feed&&Array.isArray(this.watch_next_feed)&&((ue=this.watch_next_feed.at(-1))===null||ue===void 0?void 0:ue.is(rt))&&ob(this,An,(at=this.watch_next_feed.pop())===null||at===void 0?void 0:at.as(rt),"f"),this.player_overlays=(ut=Ae==null?void 0:Ae.player_overlays)===null||ut===void 0?void 0:ut.item().as(xn),De!=null&&De.autoplay&&(this.autoplay=De.autoplay);let et=(Ze=(At=this.primary_info)===null||At===void 0?void 0:At.menu)===null||Ze===void 0?void 0:Ze.top_level_buttons.firstOfType(ao);((qe=et==null?void 0:et.like_button)===null||qe===void 0?void 0:qe.is(ot))&&((Gt=et==null?void 0:et.dislike_button)===null||Gt===void 0?void 0:Gt.is(ot))&&(this.basic_info.like_count=(nt=et==null?void 0:et.like_button)===null||nt===void 0?void 0:nt.like_count,this.basic_info.is_liked=(lt=et==null?void 0:et.like_button)===null||lt===void 0?void 0:lt.is_toggled,this.basic_info.is_disliked=(bt=et==null?void 0:et.dislike_button)===null||bt===void 0?void 0:bt.is_toggled);let Bo=(_t=ci.get({target_id:"comments-entry-point"}))===null||_t===void 0?void 0:_t.as(Re);this.comments_entry_point_header=(Vt=Bo==null?void 0:Bo.contents)===null||Vt===void 0?void 0:Vt.firstOfType(bm),this.livechat=(Jt=Ae==null?void 0:Ae.contents_memo)===null||Jt===void 0?void 0:Jt.getType($m).first()}}selectFilter(e){var t,i,r,a;return Vr(this,void 0,void 0,function*(){if(!this.related_chip_cloud)throw new x("Chip cloud not found, cannot apply filter");let l;if(typeof e=="string"){let _=(i=(t=this.related_chip_cloud)===null||t===void 0?void 0:t.chips)===null||i===void 0?void 0:i.get({text:e});if(!_)throw new x("Invalid filter",{available_filters:this.filters});l=_}else if(e!=null&&e.is(je))l=e;else throw new x("Invalid cloud chip",e);if(l.is_selected)return this;let h=yield(r=l.endpoint)===null||r===void 0?void 0:r.call(this.actions,{parse:!0}),v=(a=h==null?void 0:h.on_response_received_endpoints)===null||a===void 0?void 0:a.get({target_id:"watch-next-feed"});return this.watch_next_feed=v==null?void 0:v.contents,this})}addToWatchHistory(){let e=Object.create(null,{addToWatchHistory:{get:()=>super.addToWatchHistory}});return Vr(this,void 0,void 0,function*(){return e.addToWatchHistory.call(this)})}getWatchNextContinuation(){var e,t,i,r,a;return Vr(this,void 0,void 0,function*(){if(!rb(this,An,"f"))throw new x("Watch next feed continuation not found");let l=yield(e=rb(this,An,"f"))===null||e===void 0?void 0:e.endpoint.call(this.actions,{parse:!0}),h=(t=l==null?void 0:l.on_response_received_endpoints)===null||t===void 0?void 0:t.get({type:"appendContinuationItemsAction"});if(!h)throw new x("AppendContinuationItemsAction not found");return this.watch_next_feed=h==null?void 0:h.contents,!((r=(i=this.watch_next_feed)===null||i===void 0?void 0:i.at(-1))===null||r===void 0)&&r.is(rt)?ob(this,An,(a=this.watch_next_feed.pop())===null||a===void 0?void 0:a.as(rt),"f"):ob(this,An,void 0,"f"),this})}like(){var e,t;return Vr(this,void 0,void 0,function*(){let i=(t=(e=this.primary_info)===null||e===void 0?void 0:e.menu)===null||t===void 0?void 0:t.top_level_buttons.firstOfType(ao),r=i==null?void 0:i.like_button;if(!r)throw new x("Like button not found",{video_id:this.basic_info.id});if(!r.is(ot))throw new x("Like button is not a toggle button. This action is likely disabled for this video.",{video_id:this.basic_info.id});if(r.is_toggled)throw new x("This video is already liked",{video_id:this.basic_info.id});return yield r.endpoint.call(this.actions)})}dislike(){var e,t;return Vr(this,void 0,void 0,function*(){let i=(t=(e=this.primary_info)===null||e===void 0?void 0:e.menu)===null||t===void 0?void 0:t.top_level_buttons.firstOfType(ao),r=i==null?void 0:i.dislike_button;if(!r)throw new x("Dislike button not found",{video_id:this.basic_info.id});if(!r.is(ot))throw new x("Dislike button is not a toggle button. This action is likely disabled for this video.",{video_id:this.basic_info.id});if(r.is_toggled)throw new x("This video is already disliked",{video_id:this.basic_info.id});return yield r.endpoint.call(this.actions)})}removeRating(){var e,t;return Vr(this,void 0,void 0,function*(){let i,r=(t=(e=this.primary_info)===null||e===void 0?void 0:e.menu)===null||t===void 0?void 0:t.top_level_buttons.firstOfType(ao),a=r==null?void 0:r.like_button,l=r==null?void 0:r.dislike_button;if(!(a!=null&&a.is(ot))||!(l!=null&&l.is(ot)))throw new x("Like/Dislike button is not a toggle button. This action is likely disabled for this video.",{video_id:this.basic_info.id});if(a!=null&&a.is_toggled?i=a:l!=null&&l.is_toggled&&(i=l),!i)throw new x("This video is not liked/disliked",{video_id:this.basic_info.id});return yield i.toggled_endpoint.call(this.actions)})}getLiveChat(){if(!this.livechat)throw new x("Live Chat is not available",{video_id:this.basic_info.id});return new kv(this)}getTrailerInfo(){var e,t;if(this.has_trailer){let i=(t=(e=this.playability_status.error_screen)===null||e===void 0?void 0:e.as(Jc).trailer)===null||t===void 0?void 0:t.player_response;if(i)return new Rr([{data:i}],this.actions,this.cpn)}return null}get filters(){var e,t;return((t=(e=this.related_chip_cloud)===null||e===void 0?void 0:e.chips)===null||t===void 0?void 0:t.map(i=>{var r;return(r=i.text)===null||r===void 0?void 0:r.toString()}))||[]}get wn_has_continuation(){return!!rb(this,An,"f")}get autoplay_video_endpoint(){var e,t,i;return((i=(t=(e=this.autoplay)===null||e===void 0?void 0:e.sets)===null||t===void 0?void 0:t[0])===null||i===void 0?void 0:i.autoplay_video)||null}get has_trailer(){var e;return!!(!((e=this.playability_status.error_screen)===null||e===void 0)&&e.is(Jc))}get music_tracks(){return[]}};s(Rr,"VideoInfo");An=new WeakMap;var rf=Rr;var ub={};Oi(ub,{Album:()=>Lv,Artist:()=>Uv,Explore:()=>Gv,HomeFeed:()=>Hv,Library:()=>Kv,LibraryContinuation:()=>No,Playlist:()=>Gr,Recap:()=>Xv,Search:()=>ri,TrackInfo:()=>hf});var LC=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},Fr=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},an,Bv=class{constructor(e){var t,i,r;if(an.set(this,void 0),LC(this,an,f.parseResponse(e.data),"f"),this.header=(t=Fr(this,an,"f").header)===null||t===void 0?void 0:t.item().as(ro),this.url=((i=Fr(this,an,"f").microformat)===null||i===void 0?void 0:i.as(vi).url_canonical)||null,!Fr(this,an,"f").contents_memo)throw new Error("No contents found in the response");this.contents=(r=Fr(this,an,"f").contents_memo.getType(Fe))===null||r===void 0?void 0:r.first().contents,this.sections=Fr(this,an,"f").contents_memo.getType(Ge)||[]}get page(){return Fr(this,an,"f")}};s(Bv,"Album");an=new WeakMap;var Lv=Bv;var DC=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},$1=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},Dv=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},Or,jv,Yv=class{constructor(e,t){var i,r,a;Or.set(this,void 0),jv.set(this,void 0),$1(this,Or,f.parseResponse(e.data),"f"),$1(this,jv,t,"f"),this.header=(i=this.page.header)===null||i===void 0?void 0:i.item().as(b_,x_,gn);let l=((r=Dv(this,Or,"f").contents_memo)===null||r===void 0?void 0:r.getType(Fe))||[],h=((a=Dv(this,Or,"f").contents_memo)===null||a===void 0?void 0:a.getType(Ge))||[];this.sections=[...l,...h]}getAllSongs(){var e,t;return DC(this,void 0,void 0,function*(){let i=this.sections.filter(h=>h.type==="MusicShelf");if(!i.length)throw new x("Could not find any node of type MusicShelf.");let r=i.find(h=>h.title.toString()==="Songs");if(!r)throw new x("Could not find target shelf (Songs).");if(!r.endpoint)throw new x("Target shelf (Songs) did not have an endpoint.");return(t=(e=(yield r.endpoint.call(Dv(this,jv,"f"),{client:"YTMUSIC",parse:!0})).contents_memo)===null||e===void 0?void 0:e.getType(so))===null||t===void 0?void 0:t.first()})}get page(){return Dv(this,Or,"f")}};s(Yv,"Artist");Or=new WeakMap,jv=new WeakMap;var Uv=Yv;var jC=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},X1=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},sf,Wv=class{constructor(e){var t,i,r;sf.set(this,void 0),jC(this,sf,f.parseResponse(e.data),"f");let a=(t=X1(this,sf,"f").contents)===null||t===void 0?void 0:t.item().as(gi).tabs.get({selected:!0});if(!a)throw new x("Could not find target tab.");let l=(i=a.content)===null||i===void 0?void 0:i.as(pe);if(!l)throw new x("Target tab did not have any content.");this.top_buttons=((r=l.contents.firstOfType(eo))===null||r===void 0?void 0:r.items.as(lr))||[],this.sections=l.contents.filterType(Ge)}get page(){return X1(this,sf,"f")}};s(Wv,"Explore");sf=new WeakMap;var Gv=Wv;var YC=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},Jv=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},Si=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},Vn,af,Po,Br=class{constructor(e,t){var i,r,a,l;Vn.set(this,void 0),af.set(this,void 0),Po.set(this,void 0),Jv(this,af,t,"f"),Jv(this,Vn,f.parseResponse(e.data),"f");let h=(i=Si(this,Vn,"f").contents)===null||i===void 0?void 0:i.item().as(gi).tabs.get({selected:!0});if(!h)throw new x("Could not find Home tab.");if(h.key("content").isNull()){if(!Si(this,Vn,"f").continuation_contents)throw new x("Continuation did not have any content.");Jv(this,Po,Si(this,Vn,"f").continuation_contents.as(Dt).continuation,"f"),this.sections=(r=Si(this,Vn,"f").continuation_contents.as(Dt).contents)===null||r===void 0?void 0:r.as(Ge);return}Jv(this,Po,(a=h.content)===null||a===void 0?void 0:a.as(pe).continuation,"f"),this.sections=(l=h.content)===null||l===void 0?void 0:l.as(pe).contents.as(Ge)}getContinuation(){return YC(this,void 0,void 0,function*(){if(!Si(this,Po,"f"))throw new x("Continuation not found.");let e=yield Si(this,af,"f").execute("/browse",{client:"YTMUSIC",continuation:Si(this,Po,"f")});return new Br(e,Si(this,af,"f"))})}get has_continuation(){return!!Si(this,Po,"f")}get page(){return Si(this,Vn,"f")}};s(Br,"HomeFeed");Vn=new WeakMap,af=new WeakMap,Po=new WeakMap;var Hv=Br;var zv=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},jr=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},Me=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},Ci,Rn,Lr,Fn,uf,Dr,Yr=class{constructor(e,t){var i,r,a,l,h;Ci.set(this,void 0),Rn.set(this,void 0),Lr.set(this,void 0),jr(this,Ci,f.parseResponse(e.data),"f"),jr(this,Rn,t,"f");let v=(i=Me(this,Ci,"f").contents_memo)===null||i===void 0?void 0:i.getType(pe).first();this.header=(r=v==null?void 0:v.header)===null||r===void 0?void 0:r.as(g_),this.contents=(a=v==null?void 0:v.contents)===null||a===void 0?void 0:a.as(eo,Fe),jr(this,Lr,(h=(l=this.contents)===null||l===void 0?void 0:l.find(_=>_.continuation))===null||h===void 0?void 0:h.continuation,"f")}applySort(e){var t,i,r,a,l,h,v,_,p,b;return zv(this,void 0,void 0,function*(){let I;if(typeof e=="string"){let V=(t=Me(this,Ci,"f").contents_memo)===null||t===void 0?void 0:t.getType(Bc).first(),D=(i=V==null?void 0:V.menu)===null||i===void 0?void 0:i.options.filter(Y=>Y instanceof Bt);if(I=D==null?void 0:D.find(Y=>Y.title===e),!I)throw new x(`Sort option "${e}" not found`,{available_filters:D.map(Y=>Y.title)})}else e instanceof Bt&&(I=e);if(!I)throw new x("Invalid sort option");if(I.selected)return this;let C=(h=(l=(a=(r=I.endpoint)===null||r===void 0?void 0:r.payload)===null||a===void 0?void 0:a.commands)===null||l===void 0?void 0:l.find(V=>V.browseSectionListReloadEndpoint))===null||h===void 0?void 0:h.browseSectionListReloadEndpoint;if(!C)throw new x("Failed to find sort option command");let k=yield Me(this,Rn,"f").execute("/browse",{client:"YTMUSIC",continuation:C.continuation.reloadContinuationData.continuation,parse:!0}),F=(_=(v=Me(this,Ci,"f").contents_memo)===null||v===void 0?void 0:v.getType(Bt))===null||_===void 0?void 0:_.find(V=>V.selected);return F&&(F.selected=!1),I.selected=!0,this.contents=(b=(p=k.continuation_contents)===null||p===void 0?void 0:p.as(Dt).contents)===null||b===void 0?void 0:b.as(eo,Fe),this})}applyFilter(e){var t,i,r,a;return zv(this,void 0,void 0,function*(){let l,h=(t=Me(this,Ci,"f").contents_memo)===null||t===void 0?void 0:t.getType(Wi).first();if(typeof e=="string"){if(l=h==null?void 0:h.chips.get({text:e}),!l)throw new x(`Filter "${e}" not found`,{available_filters:this.filters})}else e instanceof je&&(l=e);if(!l)throw new x("Invalid filter",e);let _=yield new T((a=(r=(i=l.endpoint)===null||i===void 0?void 0:i.payload)===null||r===void 0?void 0:r.commands)===null||a===void 0?void 0:a[0]).call(Me(this,Rn,"f"),{client:"YTMUSIC"});return new Yr(_,Me(this,Rn,"f"))})}getContinuation(){return zv(this,void 0,void 0,function*(){if(!Me(this,Lr,"f"))throw new x("No continuation available");let e=yield Me(this,Rn,"f").execute("/browse",{client:"YTMUSIC",continuation:Me(this,Lr,"f")});return new No(e,Me(this,Rn,"f"))})}get has_continuation(){return!!Me(this,Lr,"f")}get sort_options(){var e,t;let i=(e=Me(this,Ci,"f").contents_memo)===null||e===void 0?void 0:e.getType(Bc).first();return((t=i==null?void 0:i.menu)===null||t===void 0?void 0:t.options.filter(a=>a instanceof Bt)).map(a=>a.title)}get filters(){var e,t;return((t=(e=Me(this,Ci,"f").contents_memo)===null||e===void 0?void 0:e.getType(Wi))===null||t===void 0?void 0:t.first().chips.map(i=>i.text))||[]}get page(){return Me(this,Ci,"f")}};s(Yr,"Library");Ci=new WeakMap,Rn=new WeakMap,Lr=new WeakMap;var No=class{constructor(e,t){var i,r;if(Fn.set(this,void 0),uf.set(this,void 0),Dr.set(this,void 0),jr(this,Fn,f.parseResponse(e.data),"f"),jr(this,uf,t,"f"),!Me(this,Fn,"f").continuation_contents)throw new x("No continuation contents found");this.contents=Me(this,Fn,"f").continuation_contents.as(en,fo),jr(this,Dr,!((i=Me(this,Fn,"f").continuation_contents)===null||i===void 0)&&i.key("continuation").isNull()?null:(r=Me(this,Fn,"f").continuation_contents)===null||r===void 0?void 0:r.key("continuation").string(),"f")}getContinuation(){return zv(this,void 0,void 0,function*(){if(!Me(this,Dr,"f"))throw new x("No continuation available");let e=yield Me(this,uf,"f").execute("/browse",{client:"YTMUSIC",continuation:Me(this,Dr,"f")});return new No(e,Me(this,uf,"f"))})}get has_continuation(){return!!Me(this,Dr,"f")}get page(){return Me(this,Fn,"f")}};s(No,"LibraryContinuation");Fn=new WeakMap,uf=new WeakMap,Dr=new WeakMap;var Kv=Yr;var qv=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},On=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},Ue=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},ab,Yt,Ao,Mo,Ur,lf,Q1,Wr=class{constructor(e,t){var i,r,a,l,h,v,_;if(ab.add(this),Yt.set(this,void 0),Ao.set(this,void 0),Mo.set(this,void 0),Ur.set(this,void 0),lf.set(this,void 0),On(this,Ao,t,"f"),On(this,Yt,f.parseResponse(e.data),"f"),On(this,Ur,null,"f"),On(this,lf,null,"f"),Ue(this,Yt,"f").continuation_contents){let p=(i=Ue(this,Yt,"f").continuation_contents)===null||i===void 0?void 0:i.as(po);this.items=p.contents,On(this,Mo,p.continuation,"f")}else((r=Ue(this,Yt,"f").header)===null||r===void 0?void 0:r.item().type)==="MusicEditablePlaylistDetailHeader"?this.header=(l=(a=Ue(this,Yt,"f").header)===null||a===void 0?void 0:a.item().as(y_).header)===null||l===void 0?void 0:l.as(ro):this.header=(h=Ue(this,Yt,"f").header)===null||h===void 0?void 0:h.item().as(ro),this.items=((v=Ue(this,Yt,"f").contents_memo)===null||v===void 0?void 0:v.getType(so).first().contents)||null,On(this,Mo,((_=Ue(this,Yt,"f").contents_memo)===null||_===void 0?void 0:_.getType(so).first().continuation)||null,"f")}getContinuation(){return qv(this,void 0,void 0,function*(){if(!Ue(this,Mo,"f"))throw new x("Continuation not found.");let e=yield Ue(this,Ao,"f").execute("/browse",{client:"YTMUSIC",continuation:Ue(this,Mo,"f")});return new Wr(e,Ue(this,Ao,"f"))})}getRelated(){var e,t,i,r,a;return qv(this,void 0,void 0,function*(){let l=(t=(e=Ue(this,Yt,"f").contents_memo)===null||e===void 0?void 0:e.getType(pe))===null||t===void 0?void 0:t[0].continuation;for(;l;){let v=(i=(yield Ue(this,Ao,"f").execute("/browse",{client:"YTMUSIC",continuation:l,parse:!0})).continuation_contents)===null||i===void 0?void 0:i.as(Dt),_=(r=v==null?void 0:v.contents)===null||r===void 0?void 0:r.as(Ge,Fe),p=(a=_==null?void 0:_.matchCondition(b=>b.is(Ge)))===null||a===void 0?void 0:a.as(Ge);if(p)return p;l=v==null?void 0:v.continuation}throw new x("Target section not found.")})}getSuggestions(e=!0){return qv(this,void 0,void 0,function*(){let r=yield e||!Ue(this,Ur,"f")?Ue(this,ab,"m",Q1).call(this):Promise.resolve(null);return r&&(On(this,Ur,r.items,"f"),On(this,lf,r.continuation,"f")),(r==null?void 0:r.items)||Ue(this,Ur,"f")})}get page(){return Ue(this,Yt,"f")}get has_continuation(){return!!Ue(this,Mo,"f")}};s(Wr,"Playlist");Yt=new WeakMap,Ao=new WeakMap,Mo=new WeakMap,Ur=new WeakMap,lf=new WeakMap,ab=new WeakSet,Q1=s(function(){var e,t,i,r,a;return qv(this,void 0,void 0,function*(){let l=Ue(this,lf,"f")||((t=(e=Ue(this,Yt,"f").contents_memo)===null||e===void 0?void 0:e.get("SectionList"))===null||t===void 0?void 0:t[0].as(pe).continuation);if(l){let v=(i=(yield Ue(this,Ao,"f").execute("/browse",{client:"YTMUSIC",continuation:l,parse:!0})).continuation_contents)===null||i===void 0?void 0:i.as(Dt),_=(r=v==null?void 0:v.contents)===null||r===void 0?void 0:r.as(Ge,Fe),p=(a=_==null?void 0:_.matchCondition(b=>b.is(Fe)))===null||a===void 0?void 0:a.as(Fe);return{items:(p==null?void 0:p.contents)||[],continuation:(p==null?void 0:p.continuation)||null}}return{items:[],continuation:null}})},"_Playlist_fetchSuggestions");var Gr=Wr;var UC=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},Z1=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},Vo=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},Bn,cf,$v=class{constructor(e,t){var i,r,a,l,h,v,_;Bn.set(this,void 0),cf.set(this,void 0),Z1(this,Bn,f.parseResponse(e.data),"f"),Z1(this,cf,t,"f");let p=(i=Vo(this,Bn,"f").header)===null||i===void 0?void 0:i.item();this.header=p!=null&&p.is(Tc)?(l=(a=(r=Vo(this,Bn,"f").header)===null||r===void 0?void 0:r.item().as(Tc).element)===null||a===void 0?void 0:a.model)===null||l===void 0?void 0:l.as(Wu):(h=Vo(this,Bn,"f").header)===null||h===void 0?void 0:h.item().as(gn);let b=(v=Vo(this,Bn,"f").contents)===null||v===void 0?void 0:v.item().as(gi).tabs.firstOfType(Ee);if(!b)throw new x("Target tab not found");this.sections=(_=b.content)===null||_===void 0?void 0:_.as(pe).contents.as(Re,Ge,pt)}getPlaylist(){return UC(this,void 0,void 0,function*(){if(!this.header)throw new x("Header not found");if(!this.header.is(Wu))throw new x("Recap playlist not available, check back later.");let t=yield this.header.panels[0].text_on_tap_endpoint.call(Vo(this,cf,"f"),{client:"YTMUSIC"});return new Gr(t,Vo(this,cf,"f"))})}get page(){return Vo(this,Bn,"f")}};s($v,"Recap");Bn=new WeakMap,cf=new WeakMap;var Xv=$v;var Qv=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},pf=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},We=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},Ei,un,Jr,df,Hr,ri=class{constructor(e,t,i){var r,a,l;if(Ei.set(this,void 0),un.set(this,void 0),Jr.set(this,void 0),pf(this,un,t,"f"),pf(this,Ei,f.parseResponse(e.data),"f"),!We(this,Ei,"f").contents||!We(this,Ei,"f").contents_memo)throw new x("Response did not contain any contents.");let h=We(this,Ei,"f").contents.item().as($_).tabs.get({selected:!0});if(!h)throw new x("Could not find target tab.");let v=(r=h.content)===null||r===void 0?void 0:r.as(pe);if(!v)throw new x("Target tab did not have any content.");this.header=(a=v.header)===null||a===void 0?void 0:a.as(Wi),this.contents=v.contents.as(Fe,$i,Re),i&&pf(this,Jr,(l=this.contents.firstOfType(Fe))===null||l===void 0?void 0:l.continuation,"f")}getMore(e){return Qv(this,void 0,void 0,function*(){if(!e||!e.endpoint)throw new x("Cannot retrieve more items for this shelf because it does not have an endpoint.");let t=yield e.endpoint.call(We(this,un,"f"),{client:"YTMUSIC"});if(!t)throw new x("Endpoint did not return any data");return new ri(t,We(this,un,"f"),!0)})}getContinuation(){return Qv(this,void 0,void 0,function*(){if(!We(this,Jr,"f"))throw new x("Continuation not found.");let e=yield We(this,un,"f").execute("/search",{continuation:We(this,Jr,"f"),client:"YTMUSIC"});return new zr(We(this,un,"f"),e)})}applyFilter(e){var t,i;return Qv(this,void 0,void 0,function*(){let r;if(typeof e=="string"){if(r=(i=(t=this.header)===null||t===void 0?void 0:t.chips)===null||i===void 0?void 0:i.as(je).get({text:e}),!r)throw new x("Could not find filter with given name.",{available_filters:this.filters})}else e!=null&&e.is(je)&&(r=e);if(!r)throw new x("Invalid filter",{available_filters:this.filters});if(r!=null&&r.is_selected)return this;if(!r.endpoint)throw new x("Selected filter does not have an endpoint.");let a=yield r.endpoint.call(We(this,un,"f"),{client:"YTMUSIC"});return new ri(a,We(this,un,"f"),!0)})}get filters(){var e,t;return((t=(e=this.header)===null||e===void 0?void 0:e.chips)===null||t===void 0?void 0:t.as(je).map(i=>i.text))||[]}get has_continuation(){return!!We(this,Jr,"f")}get did_you_mean(){var e;return(e=We(this,Ei,"f").contents_memo)===null||e===void 0?void 0:e.getType(km).first()}get showing_results_for(){var e;return(e=We(this,Ei,"f").contents_memo)===null||e===void 0?void 0:e.getType(Qi).first()}get message(){var e;return(e=We(this,Ei,"f").contents_memo)===null||e===void 0?void 0:e.getType(pt).first()}get songs(){var e;return(e=this.contents)===null||e===void 0?void 0:e.filterType(Fe).find(t=>t.title.toString()==="Songs")}get videos(){var e;return(e=this.contents)===null||e===void 0?void 0:e.filterType(Fe).find(t=>t.title.toString()==="Videos")}get albums(){var e;return(e=this.contents)===null||e===void 0?void 0:e.filterType(Fe).find(t=>t.title.toString()==="Albums")}get artists(){var e;return(e=this.contents)===null||e===void 0?void 0:e.filterType(Fe).find(t=>t.title.toString()==="Artists")}get playlists(){var e;return(e=this.contents)===null||e===void 0?void 0:e.filterType(Fe).find(t=>t.title.toString()==="Community playlists")}get results(){var e,t;return(t=(e=this.contents)===null||e===void 0?void 0:e.firstOfType(Fe))===null||t===void 0?void 0:t.contents}get sections(){var e;return(e=this.contents)===null||e===void 0?void 0:e.filterType(Fe)}get page(){return We(this,Ei,"f")}};s(ri,"Search");Ei=new WeakMap,un=new WeakMap,Jr=new WeakMap;var zr=class{constructor(e,t){var i,r;df.set(this,void 0),Hr.set(this,void 0),pf(this,df,e,"f"),pf(this,Hr,f.parseResponse(t.data),"f"),this.header=(i=We(this,Hr,"f").header)===null||i===void 0?void 0:i.item().as(gn),this.contents=(r=We(this,Hr,"f").continuation_contents)===null||r===void 0?void 0:r.as(en)}getContinuation(){var e;return Qv(this,void 0,void 0,function*(){if(!(!((e=this.contents)===null||e===void 0)&&e.continuation))throw new x("Continuation not found.");let t=yield We(this,df,"f").execute("/search",{continuation:this.contents.continuation,client:"YTMUSIC"});return new zr(We(this,df,"f"),t)})}get has_continuation(){var e;return!!(!((e=this.contents)===null||e===void 0)&&e.continuation)}get page(){return We(this,Hr,"f")}};s(zr,"SearchContinuation");df=new WeakMap,Hr=new WeakMap;var ff=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},Zv=class extends sn{constructor(e,t,i){var r,a,l,h,v,_,p,b,I;super(e,t,i);let[C,k]=this.page;if(!(!((r=C.microformat)===null||r===void 0)&&r.is(vi)))throw new x("Invalid microformat",C.microformat);if(this.basic_info=Object.assign(Object.assign({},C.video_details),{description:(a=C.microformat)===null||a===void 0?void 0:a.description,is_unlisted:(l=C.microformat)===null||l===void 0?void 0:l.is_unlisted,is_family_safe:(h=C.microformat)===null||h===void 0?void 0:h.is_family_safe,url_canonical:(v=C.microformat)===null||v===void 0?void 0:v.url_canonical,tags:(_=C.microformat)===null||_===void 0?void 0:_.tags}),this.storyboards=C.storyboards,this.endscreen=C.endscreen,k){let F=(b=(p=k.contents_memo)===null||p===void 0?void 0:p.getType(iv))===null||b===void 0?void 0:b[0];this.tabs=F==null?void 0:F.tabs.array().as(Ee),this.current_video_endpoint=k.current_video_endpoint,this.player_overlays=(I=k.player_overlays)===null||I===void 0?void 0:I.item().as(xn)}}getTab(e){var t,i;return ff(this,void 0,void 0,function*(){if(!this.tabs)throw new x("Could not find any tab");let r=this.tabs.get({title:e})||this.tabs.matchCondition(l=>{var h,v;return((v=(h=l.endpoint.payload.browseEndpointContextSupportedConfigs)===null||h===void 0?void 0:h.browseEndpointContextMusicConfig)===null||v===void 0?void 0:v.pageType)===e})||((t=this.tabs)===null||t===void 0?void 0:t[0]);if(!r)throw new x(`Tab "${e}" not found`,{available_tabs:this.available_tabs});if(r.content)return r.content;let a=yield r.endpoint.call(this.actions,{client:"YTMUSIC",parse:!0});if(((i=a.contents)===null||i===void 0?void 0:i.item().key("type").string())==="Message")return a.contents.item().as(pt);if(!a.contents)throw new x("Page contents was empty",a);return a.contents.item().as(pe).contents})}getUpNext(e=!0){var t,i;return ff(this,void 0,void 0,function*(){let r=yield this.getTab("Up next");if(!r||!r.content)throw new x("Music queue was empty, the video id is probably invalid.",r);let a=r.content.as(bi);if(!a.playlist_id&&e){let l=a.contents.firstOfType(mn);if(!l)throw new x("Automix item not found");let h=yield(t=l.playlist_video)===null||t===void 0?void 0:t.endpoint.call(this.actions,{videoId:this.basic_info.id,client:"YTMUSIC",parse:!0});if(!h||!h.contents_memo)throw new x("Could not fetch automix");return(i=h.contents_memo.getType(bi))===null||i===void 0?void 0:i[0]}return a})}getRelated(){return ff(this,void 0,void 0,function*(){return yield this.getTab("MUSIC_PAGE_TYPE_TRACK_RELATED")})}getLyrics(){return ff(this,void 0,void 0,function*(){return(yield this.getTab("MUSIC_PAGE_TYPE_TRACK_LYRICS")).firstOfType(oo)})}addToWatchHistory(){let e=Object.create(null,{addToWatchHistory:{get:()=>super.addToWatchHistory}});return ff(this,void 0,void 0,function*(){return e.addToWatchHistory.call(this,G.CLIENTS.YTMUSIC.NAME,G.CLIENTS.YTMUSIC.VERSION,"https://music.")})}get available_tabs(){return this.tabs?this.tabs.map(e=>e.title):[]}};s(Zv,"TrackInfo");var hf=Zv;var lb={};Oi(lb,{Channel:()=>e0,HomeFeed:()=>t0,Search:()=>n0,VideoInfo:()=>r0});var WC=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},Kr=class extends Ne{constructor(e,t,i=!1){var r,a;super(e,t,i),this.header=(r=this.page.header)===null||r===void 0?void 0:r.item().as(qo),this.contents=this.memo.getType(Re).first()||((a=this.page.continuation_contents)===null||a===void 0?void 0:a.as(uo))}getContinuation(){var e;return WC(this,void 0,void 0,function*(){let t=yield this.actions.execute("/browse",{continuation:(e=this.contents)===null||e===void 0?void 0:e.continuation,client:"YTKIDS"});return new Kr(this.actions,t)})}get has_continuation(){var e;return!!(!((e=this.contents)===null||e===void 0)&&e.continuation)}};s(Kr,"Channel");var e0=Kr;var GC=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},qr=class extends Ne{constructor(e,t,i=!1){var r,a;super(e,t,i),this.header=(r=this.page.header)===null||r===void 0?void 0:r.item().as(ov),this.contents=(a=this.page.contents)===null||a===void 0?void 0:a.item().as(rv)}selectCategoryTab(e){var t;return GC(this,void 0,void 0,function*(){let i;if(typeof e=="string"?i=(t=this.header)===null||t===void 0?void 0:t.category_tabs.find(a=>a.title.toString()===e):e!=null&&e.is(_r)&&(i=e),!i)throw new x(`Tab "${e}" not found`);let r=yield i.endpoint.call(this.actions,{client:"YTKIDS",parse:!0});return r.header=this.page.header,r.header_memo=this.page.header_memo,new qr(this.actions,r,!0)})}get categories(){var e;return((e=this.header)===null||e===void 0?void 0:e.category_tabs.map(t=>t.title.toString()))||[]}};s(qr,"HomeFeed");var t0=qr;var i0=class extends Ne{constructor(e,t){super(e,t),this.estimated_results=this.page.estimated_results;let i=this.memo.getType(Re).first();if(!i)throw new x("No item section found in search response.");this.contents=i.contents}};s(i0,"Search");var n0=i0;var JC=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},o0=class extends sn{constructor(e,t,i){var r,a,l,h,v;super(e,t,i);let[_,p]=this.page;this.basic_info=_.video_details,this.captions=_.captions;let b=(r=p==null?void 0:p.contents)===null||r===void 0?void 0:r.item().as(hr),I=b==null?void 0:b.results,C=b==null?void 0:b.secondary_results;I&&C&&(this.slim_video_metadata=(l=(a=I.firstOfType(Re))===null||a===void 0?void 0:a.contents)===null||l===void 0?void 0:l.firstOfType(q_),this.watch_next_feed=((h=C.firstOfType(Re))===null||h===void 0?void 0:h.contents)||C,this.current_video_endpoint=p==null?void 0:p.current_video_endpoint,this.player_overlays=(v=p==null?void 0:p.player_overlays)===null||v===void 0?void 0:v.item().as(xn))}addToWatchHistory(){let e=Object.create(null,{addToWatchHistory:{get:()=>super.addToWatchHistory}});return JC(this,void 0,void 0,function*(){return e.addToWatchHistory.call(this)})}};s(o0,"VideoInfo");var r0=o0;var f=j;var s0=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},HC=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},ki=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},$r,ln,cb,eI,tI,a0=class{constructor(e){$r.add(this),ln.set(this,void 0),HC(this,ln,e,"f")}get session(){return ki(this,ln,"f")}getVideoInfo(e,t,i,r){var a;return s0(this,void 0,void 0,function*(){let l={playbackContext:{contentPlaybackContext:{vis:0,splay:!1,referer:"https://www.youtube.com",currentUrl:`/watch?v=${e}`,autonavState:"STATE_NONE",signatureTimestamp:((a=ki(this,ln,"f").player)===null||a===void 0?void 0:a.sts)||0,autoCaptionsDefaultOn:!1,html5Preference:"HTML5_PREF_WANTS",lactMilliseconds:"-1"}},attestationRequest:{omitBotguardData:!0},videoId:e};i&&(l.client=i),t&&(l.cpn=t),r&&(l.playlistId=r);let h=yield ki(this,ln,"f").http.fetch("/player",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json"}});return ki(this,$r,"m",cb).call(this,h)})}stats(e,t,i){return s0(this,void 0,void 0,function*(){let r=new URL(e);r.searchParams.set("ver","2"),r.searchParams.set("c",t.client_name.toLowerCase()),r.searchParams.set("cbrver",t.client_version),r.searchParams.set("cver",t.client_version);for(let l of Object.keys(i))r.searchParams.set(l,i[l]);return yield ki(this,ln,"f").http.fetch(r)})}execute(e,t){var i,r;return s0(this,void 0,void 0,function*(){let a;if(t&&!t.protobuf){if(a=Object.assign({},t),Reflect.has(a,"browseId")&&ki(this,$r,"m",tI).call(this,a.browseId)&&!ki(this,ln,"f").logged_in)throw new x("You must be signed in to perform this operation.");Reflect.has(a,"override_endpoint")&&delete a.override_endpoint,Reflect.has(a,"parse")&&delete a.parse,Reflect.has(a,"request")&&delete a.request,Reflect.has(a,"clientActions")&&delete a.clientActions,Reflect.has(a,"settingItemIdForClient")&&delete a.settingItemIdForClient,Reflect.has(a,"action")&&(a.actions=[a.action],delete a.action),Reflect.has(a,"boolValue")&&(a.newValue={boolValue:a.boolValue},delete a.boolValue),Reflect.has(a,"token")&&(a.continuation=a.token,delete a.token),(a==null?void 0:a.client)==="YTMUSIC"&&(a.isAudioOnly=!0)}else t&&(a=t.serialized_data);let l=Reflect.has(t||{},"override_endpoint")?t==null?void 0:t.override_endpoint:e,h=yield ki(this,ln,"f").http.fetch(l,{method:"POST",body:t!=null&&t.protobuf?a:JSON.stringify(a||{}),headers:{"Content-Type":t!=null&&t.protobuf?"application/x-protobuf":"application/json"}});if(t!=null&&t.parse){let v=f.parseResponse(yield h.json());if(ki(this,$r,"m",eI).call(this,v)&&((r=(i=v.on_response_received_actions)===null||i===void 0?void 0:i.first())===null||r===void 0?void 0:r.type)==="navigateAction"){let _=v.on_response_received_actions.firstOfType(lo);_&&(v=yield _.endpoint.call(this,{parse:!0}))}return v}return ki(this,$r,"m",cb).call(this,h)})}};s(a0,"Actions");ln=new WeakMap,$r=new WeakSet,cb=s(function(e){return s0(this,void 0,void 0,function*(){return{success:e.ok,status_code:e.status,data:JSON.parse(yield e.text())}})},"_Actions_wrap"),eI=s(function(e){return"on_response_received_actions"in e},"_Actions_isBrowse"),tI=s(function(e){return["FElibrary","FEhistory","FEsubscriptions","FEmusic_listening_review","FEmusic_library_landing","SPaccount_overview","SPaccount_notifications","SPaccount_privacy","SPtime_watched"].includes(e)},"_Actions_needsLogin");var db=a0;var u0=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},l0=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},Pi=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},Xr,Qr,mf,_f,kt=class{constructor(e,t,i,r){Xr.set(this,void 0),Qr.set(this,void 0),mf.set(this,void 0),_f.set(this,void 0),l0(this,Xr,i,"f"),l0(this,Qr,t,"f"),l0(this,mf,e,"f"),l0(this,_f,r,"f")}static create(e,t=U.shim.fetch){return u0(this,void 0,void 0,function*(){let i=new URL("/iframe_api",G.URLS.YT_BASE),r=yield t(i);if(r.status!==200)throw new Ot("Failed to request player id");let a=yield r.text(),l=wt(a,"player\\/","\\/");if(!l)throw new Ot("Failed to get player id");if(e){let C=yield kt.fromCache(e,l);if(C)return C}let h=new URL(`/s/player/${l}/player_ias.vflset/en_US/base.js`,G.URLS.YT_BASE),v=yield t(h,{headers:{"user-agent":hn("desktop")}});if(!v.ok)throw new Ot(`Failed to get player data: ${v.status}`);let _=yield v.text(),p=this.extractSigTimestamp(_),b=this.extractSigSourceCode(_),I=this.extractNSigSourceCode(_);return yield kt.fromSource(e,p,b,I,l)})}decipher(e,t,i){if(e=e||t||i,!e)throw new Ot("No valid URL to decipher");let r=new URLSearchParams(e),a=new URL(r.get("url")||e);if(t||i){let h=U.shim.eval(Pi(this,Qr,"f"),{sig:r.get("s")});if(typeof h!="string")throw new Ot("Failed to decipher signature");let v=r.get("sp");v?a.searchParams.set(v,h):a.searchParams.set("signature",h)}let l=a.searchParams.get("n");if(l){let h=U.shim.eval(Pi(this,Xr,"f"),{nsig:l});if(typeof h!="string")throw new Ot("Failed to decipher nsig");h.startsWith("enhanced_except_")&&console.warn(`Warning:
Could not transform nsig, download may be throttled.
Changing the InnerTube client to "ANDROID" might help!`),a.searchParams.set("n",h)}return a.toString()}static fromCache(e,t){return u0(this,void 0,void 0,function*(){let i=yield e.get(t);if(!i)return null;let r=new DataView(i);if(r.getUint32(0,!0)!==kt.LIBRARY_VERSION)return null;let l=r.getUint32(4,!0),h=r.getUint32(8,!0),v=i.slice(12,12+h),_=i.slice(12+h),p=new TextDecoder,b=p.decode(v),I=p.decode(_);return new kt(l,b,I,t)})}static fromSource(e,t,i,r,a){return u0(this,void 0,void 0,function*(){let l=new kt(t,i,r,a);return yield l.cache(e),l})}cache(e){return u0(this,void 0,void 0,function*(){if(!e)return;let t=new TextEncoder,i=t.encode(Pi(this,Qr,"f")),r=t.encode(Pi(this,Xr,"f")),a=new ArrayBuffer(12+i.byteLength+r.byteLength),l=new DataView(a);l.setUint32(0,kt.LIBRARY_VERSION,!0),l.setUint32(4,Pi(this,mf,"f"),!0),l.setUint32(8,i.byteLength,!0),new Uint8Array(a).set(i,12),new Uint8Array(a).set(r,12+i.byteLength),yield e.set(Pi(this,_f,"f"),new Uint8Array(a))})}static extractSigTimestamp(e){return parseInt(wt(e,"signatureTimestamp:",",")||"0")}static extractSigSourceCode(e){var t,i,r;let a=wt(e,'function(a){a=a.split("")','return a.join("")}'),l=(r=(i=(t=a==null?void 0:a.split(/\.|\[/))===null||t===void 0?void 0:t[0])===null||i===void 0?void 0:i.replace(";",""))===null||r===void 0?void 0:r.trim(),h=wt(e,`var ${l}={`,"};");return(!h||!a)&&console.warn(new Ot("Failed to extract signature decipher algorithm")),`function descramble_sig(a) { a = a.split(""); let ${l}={${h}}${a} return a.join("") } descramble_sig(sig);`}static extractNSigSourceCode(e){let t=`function descramble_nsig(a) { let b=a.split("")${wt(e,'b=a.split("")','}return b.join("")}')}} return b.join(""); } descramble_nsig(nsig)`;return t||console.warn(new Ot("Failed to extract n-token decipher algorithm")),t}get url(){return new URL(`/s/player/${Pi(this,_f,"f")}/player_ias.vflset/en_US/base.js`,G.URLS.YT_BASE).toString()}get sts(){return Pi(this,mf,"f")}get nsig_sc(){return Pi(this,Xr,"f")}get sig_sc(){return Pi(this,Qr,"f")}static get LIBRARY_VERSION(){return 2}};s(kt,"Player");Xr=new WeakMap,Qr=new WeakMap,mf=new WeakMap,_f=new WeakMap;var Ni=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},Ln=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},X=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},cn,Ro,He,Oe,c0,nI,fb,iI,oI,pb,d0=class{constructor(e){cn.add(this),Ro.set(this,void 0),He.set(this,void 0),Oe.set(this,void 0),c0.set(this,5),Ln(this,He,e,"f")}init(e){return Ni(this,void 0,void 0,function*(){Ln(this,Oe,e,"f"),this.validateCredentials()?this.has_access_token_expired||X(this,He,"f").emit("auth",{credentials:X(this,Oe,"f"),status:"SUCCESS"}):(yield X(this,cn,"m",nI).call(this))||(yield X(this,cn,"m",fb).call(this))})}cacheCredentials(){var e;return Ni(this,void 0,void 0,function*(){let i=new TextEncoder().encode(JSON.stringify(X(this,Oe,"f")));yield(e=X(this,He,"f").cache)===null||e===void 0?void 0:e.set("youtubei_oauth_credentials",i.buffer)})}removeCache(){var e;return Ni(this,void 0,void 0,function*(){yield(e=X(this,He,"f").cache)===null||e===void 0?void 0:e.remove("youtubei_oauth_credentials")})}refreshIfRequired(){return Ni(this,void 0,void 0,function*(){this.has_access_token_expired&&(yield X(this,cn,"m",oI).call(this))})}revokeCredentials(){return Ni(this,void 0,void 0,function*(){if(!!X(this,Oe,"f"))return yield this.removeCache(),X(this,He,"f").http.fetch_function(new URL(`/o/oauth2/revoke?token=${encodeURIComponent(X(this,Oe,"f").access_token)}`,G.URLS.YT_BASE),{method:"post"})})}get credentials(){return X(this,Oe,"f")}get has_access_token_expired(){let e=X(this,Oe,"f")?new Date(X(this,Oe,"f").expires).getTime():-1/0;return new Date().getTime()>e}validateCredentials(){return X(this,Oe,"f")&&Reflect.has(X(this,Oe,"f"),"access_token")&&Reflect.has(X(this,Oe,"f"),"refresh_token")&&Reflect.has(X(this,Oe,"f"),"expires")||!1}};s(d0,"OAuth");Ro=new WeakMap,He=new WeakMap,Oe=new WeakMap,c0=new WeakMap,cn=new WeakSet,nI=s(function(){var e;return Ni(this,void 0,void 0,function*(){let t=yield(e=X(this,He,"f").cache)===null||e===void 0?void 0:e.get("youtubei_oauth_credentials");if(!t)return!1;let i=new TextDecoder,r=JSON.parse(i.decode(t));return Ln(this,Oe,{access_token:r.access_token,refresh_token:r.refresh_token,expires:new Date(r.expires)},"f"),X(this,He,"f").emit("auth",{credentials:X(this,Oe,"f"),status:"SUCCESS"}),!0})},"_OAuth_loadCachedCredentials"),fb=s(function(){return Ni(this,void 0,void 0,function*(){Ln(this,Ro,yield X(this,cn,"m",pb).call(this),"f");let e={client_id:X(this,Ro,"f").client_id,scope:G.OAUTH.SCOPE,device_id:U.shim.uuidv4(),model_name:G.OAUTH.MODEL_NAME},i=yield(yield X(this,He,"f").http.fetch_function(new URL("/o/oauth2/device/code",G.URLS.YT_BASE),{body:JSON.stringify(e),method:"POST",headers:{"Content-Type":"application/json"}})).json();X(this,He,"f").emit("auth-pending",i),Ln(this,c0,i.interval,"f"),X(this,cn,"m",iI).call(this,i.device_code)})},"_OAuth_getUserCode"),iI=s(function(e){let t=setInterval(()=>Ni(this,void 0,void 0,function*(){let i=Object.assign(Object.assign({},X(this,Ro,"f")),{code:e,grant_type:G.OAUTH.GRANT_TYPE});try{let a=yield(yield X(this,He,"f").http.fetch_function(new URL("/o/oauth2/token",G.URLS.YT_BASE),{body:JSON.stringify(i),method:"POST",headers:{"Content-Type":"application/json"}})).json();if(a.error){switch(a.error){case"access_denied":X(this,He,"f").emit("auth-error",new hi("Access was denied.",{status:"ACCESS_DENIED"}));break;case"expired_token":X(this,He,"f").emit("auth-error",new hi("The device code has expired, restarting auth flow.",{status:"DEVICE_CODE_EXPIRED"})),clearInterval(t),X(this,cn,"m",fb).call(this);break;default:break}return}let l=new Date(new Date().getTime()+a.expires_in*1e3);Ln(this,Oe,{access_token:a.access_token,refresh_token:a.refresh_token,expires:l},"f"),X(this,He,"f").emit("auth",{credentials:X(this,Oe,"f"),status:"SUCCESS"}),clearInterval(t)}catch(r){return clearInterval(t),X(this,He,"f").emit("auth-error",new hi("Could not obtain user code.",{status:"FAILED",error:r}))}}),X(this,c0,"f")*1e3)},"_OAuth_startPolling"),oI=s(function(){return Ni(this,void 0,void 0,function*(){if(!X(this,Oe,"f"))return;Ln(this,Ro,yield X(this,cn,"m",pb).call(this),"f");let e=Object.assign(Object.assign({},X(this,Ro,"f")),{refresh_token:X(this,Oe,"f").refresh_token,grant_type:"refresh_token"}),i=yield(yield X(this,He,"f").http.fetch_function(new URL("/o/oauth2/token",G.URLS.YT_BASE),{body:JSON.stringify(e),method:"POST",headers:{"Content-Type":"application/json"}})).json(),r=new Date(new Date().getTime()+i.expires_in*1e3);Ln(this,Oe,{access_token:i.access_token,refresh_token:i.refresh_token||X(this,Oe,"f").refresh_token,expires:r},"f"),X(this,He,"f").emit("update-credentials",{credentials:X(this,Oe,"f"),status:"SUCCESS"})})},"_OAuth_refreshAccessToken"),pb=s(function(){var e;return Ni(this,void 0,void 0,function*(){let i=yield(yield X(this,He,"f").http.fetch_function(new URL("/tv",G.URLS.YT_BASE),{headers:G.OAUTH.HEADERS})).text(),r=(e=G.OAUTH.REGEX.AUTH_SCRIPT.exec(i))===null||e===void 0?void 0:e[1];if(!r)throw new hi("Could not obtain script url.",{status:"FAILED"});let l=(yield(yield X(this,He,"f").http.fetch(r,{baseURL:G.URLS.YT_BASE})).text()).replace(/\n/g,"").match(G.OAUTH.REGEX.CLIENT_IDENTITY),h=l==null?void 0:l.groups;if(!h)throw new hi("Could not obtain client identity.",{status:"FAILED"});return h})},"_OAuth_getClientIdentity");var hb=d0;var Zr=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},vf=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},Mi=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},mb,p0,f0,Fo,h0,m0,rI,sI,_0;(function(n){n.WEB="WEB",n.KIDS="WEB_KIDS",n.MUSIC="WEB_REMIX",n.ANDROID="ANDROID",n.ANDROID_MUSIC="ANDROID_MUSIC",n.ANDROID_CREATOR="ANDROID_CREATOR",n.TV_EMBEDDED="TVHTML5_SIMPLY_EMBEDDED_PLAYER"})(_0=_0||(_0={}));var si=class extends Yi{constructor(e,t,i,r,a,l,h,v){super(),p0.set(this,void 0),f0.set(this,void 0),Fo.set(this,void 0),h0.set(this,void 0),m0.set(this,void 0),vf(this,Fo,e,"f"),vf(this,h0,r,"f"),vf(this,f0,t,"f"),vf(this,p0,i,"f"),vf(this,m0,a,"f"),this.http=new ko(this,l,h),this.actions=new db(this),this.oauth=new hb(this),this.logged_in=!!l,this.cache=v}on(e,t){super.on(e,t)}once(e,t){super.once(e,t)}static create(e={}){return Zr(this,void 0,void 0,function*(){let{context:t,api_key:i,api_version:r,account_index:a}=yield si.getSessionData(e.lang,e.location,e.account_index,e.visitor_data,e.enable_safety_mode,e.generate_session_locally,e.device_category,e.client_type,e.timezone,e.fetch);return new si(t,i,r,a,e.retrieve_player===!1?void 0:yield kt.create(e.cache,e.fetch),e.cookie,e.fetch,e.cache)})}static getSessionData(e="",t="",i=0,r="",a=!1,l=!1,h="desktop",v=_0.WEB,_=Intl.DateTimeFormat().resolvedOptions().timeZone,p=U.shim.fetch){return Zr(this,void 0,void 0,function*(){let b;return l?b=Mi(this,mb,"m",sI).call(this,{lang:e,location:t,time_zone:_,device_category:h,client_name:v,enable_safety_mode:a,visitor_data:r}):b=yield Mi(this,mb,"m",rI).call(this,{lang:e,location:t,time_zone:_,device_category:h,client_name:v,enable_safety_mode:a,visitor_data:r},p),Object.assign(Object.assign({},b),{account_index:i})})}signIn(e){return Zr(this,void 0,void 0,function*(){return new Promise((t,i)=>Zr(this,void 0,void 0,function*(){let r=s(a=>i(a),"error_handler");this.once("auth",a=>{this.off("auth-error",r),a.status==="SUCCESS"&&(this.logged_in=!0,t()),i(a)}),this.once("auth-error",r);try{yield this.oauth.init(e),this.oauth.validateCredentials()&&(yield this.oauth.refreshIfRequired(),this.logged_in=!0,t())}catch(a){i(a)}}))})}signOut(){return Zr(this,void 0,void 0,function*(){if(!this.logged_in)throw new x("You must be signed in to perform this operation.");let e=yield this.oauth.revokeCredentials();return this.logged_in=!1,e})}get key(){return Mi(this,f0,"f")}get api_version(){return Mi(this,p0,"f")}get client_version(){return Mi(this,Fo,"f").client.clientVersion}get client_name(){return Mi(this,Fo,"f").client.clientName}get account_index(){return Mi(this,h0,"f")}get context(){return Mi(this,Fo,"f")}get player(){return Mi(this,m0,"f")}get lang(){return Mi(this,Fo,"f").client.hl}};s(si,"Session");mb=si,p0=new WeakMap,f0=new WeakMap,Fo=new WeakMap,h0=new WeakMap,m0=new WeakMap,rI=s(function(e,t=U.shim.fetch){return Zr(this,void 0,void 0,function*(){let i=new URL("/sw.js_data",G.URLS.YT_BASE),r=G.CLIENTS.WEB.STATIC_VISITOR_ID;e.visitor_data&&(r=Ve.decodeVisitorData(e.visitor_data).id);let a=yield t(i,{headers:{"accept-language":e.lang||"en-US","user-agent":hn("desktop"),accept:"*/*",referer:"https://www.youtube.com/sw.js",cookie:`PREF=tz=${e.time_zone.replace("/",".")};VISITOR_INFO1_LIVE=${r};`}});if(!a.ok)throw new Wo(`Failed to retrieve session data: ${a.status}`);let l=yield a.text(),v=JSON.parse(l.replace(/^\)\]\}'/,""))[0][2],_=`v${v[0][0][6]}`,[[p],b]=v;return{context:{client:{hl:p[0],gl:e.location||p[2],remoteHost:p[3],screenDensityFloat:1,screenHeightPoints:1080,screenPixelDensity:1,screenWidthPoints:1920,visitorData:p[13],userAgent:p[14],clientName:e.client_name,clientVersion:p[16],osName:p[17],osVersion:p[18],platform:e.device_category.toUpperCase(),clientFormFactor:"UNKNOWN_FORM_FACTOR",userInterfaceTheme:"USER_INTERFACE_THEME_LIGHT",timeZone:p[79]||e.time_zone,browserName:p[86],browserVersion:p[87],originalUrl:G.URLS.YT_BASE,deviceMake:p[11],deviceModel:p[12],utcOffsetMinutes:new Date().getTimezoneOffset()},user:{enableSafetyMode:e.enable_safety_mode,lockedSafetyMode:!1},request:{useSsl:!0}},api_key:b,api_version:_}})},"_Session_retrieveSessionData"),sI=s(function(e){let t=G.CLIENTS.WEB.STATIC_VISITOR_ID;return e.visitor_data&&(t=Ve.decodeVisitorData(e.visitor_data).id),{context:{client:{hl:e.lang||"en",gl:e.location||"US",screenDensityFloat:1,screenHeightPoints:1080,screenPixelDensity:1,screenWidthPoints:1920,visitorData:Ve.encodeVisitorData(t,Math.floor(Date.now()/1e3)),userAgent:hn("desktop"),clientName:e.client_name,clientVersion:Xt.WEB.VERSION,osName:"Windows",osVersion:"10.0",platform:e.device_category.toUpperCase(),clientFormFactor:"UNKNOWN_FORM_FACTOR",userInterfaceTheme:"USER_INTERFACE_THEME_LIGHT",timeZone:e.time_zone,originalUrl:G.URLS.YT_BASE,deviceMake:"",deviceModel:"",utcOffsetMinutes:new Date().getTimezoneOffset()},user:{enableSafetyMode:e.enable_safety_mode,lockedSafetyMode:!1},request:{useSsl:!0}},api_key:Xt.WEB.API_KEY,api_version:Xt.WEB.API_VERSION}},"_Session_generateSessionData");var zC=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},Dn=class extends yo{constructor(e,t){if(super(e,t),!this.page.contents_memo)throw new x("Unexpected response",this.page);let i=this.page.contents_memo.getType(Ee).first();if(!i.content)throw new x("Content tab has no content",i);this.page.header&&(this.header=this.page.header.item().as(Wm)),this.contents=i.content.as(Tn)}applyFilter(e){let t=Object.create(null,{getFilteredFeed:{get:()=>super.getFilteredFeed}});return zC(this,void 0,void 0,function*(){let i=yield t.getFilteredFeed.call(this,e);return new Dn(this.actions,i.page)})}};s(Dn,"HashtagFeed");var v0=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},KC=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},Ai=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},Ut,y0=class{constructor(e){Ut.set(this,void 0),KC(this,Ut,e,"f"),this.channel={editName:t=>{if(!Ai(this,Ut,"f").session.logged_in)throw new x("You must be signed in to perform this operation.");return Ai(this,Ut,"f").execute("/channel/edit_name",{givenName:t,client:"ANDROID"})},editDescription:t=>{if(!Ai(this,Ut,"f").session.logged_in)throw new x("You must be signed in to perform this operation.");return Ai(this,Ut,"f").execute("/channel/edit_description",{givenDescription:t,client:"ANDROID"})},getBasicAnalytics:()=>this.getAnalytics()}}getInfo(){return v0(this,void 0,void 0,function*(){if(!Ai(this,Ut,"f").session.logged_in)throw new x("You must be signed in to perform this operation.");let e=yield Ai(this,Ut,"f").execute("/account/accounts_list",{client:"ANDROID"});return new lv(e)})}getTimeWatched(){return v0(this,void 0,void 0,function*(){let e=yield Ai(this,Ut,"f").execute("/browse",{browseId:"SPtime_watched",client:"ANDROID"});return new Vv(e)})}getSettings(){return v0(this,void 0,void 0,function*(){let e=yield Ai(this,Ut,"f").execute("/browse",{browseId:"SPaccount_overview"});return new Mv(Ai(this,Ut,"f"),e)})}getAnalytics(){var e;return v0(this,void 0,void 0,function*(){let t=yield this.getInfo(),i=Ve.encodeChannelAnalyticsParams((e=t.footers)===null||e===void 0?void 0:e.endpoint.payload.browseId),r=yield Ai(this,Ut,"f").execute("/browse",{browseId:"FEanalytics_screen",client:"ANDROID",params:i});return new dv(r)})}};s(y0,"AccountManager");Ut=new WeakMap;var _b=y0;var jn=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},qC=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},yt=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},it,b0=class{constructor(e){it.set(this,void 0),qC(this,it,e,"f")}like(e){return jn(this,void 0,void 0,function*(){if(fe({video_id:e}),!yt(this,it,"f").session.logged_in)throw new Error("You must be signed in to perform this operation.");return yield yt(this,it,"f").execute("/like/like",{client:"ANDROID",target:{videoId:e}})})}dislike(e){return jn(this,void 0,void 0,function*(){if(fe({video_id:e}),!yt(this,it,"f").session.logged_in)throw new Error("You must be signed in to perform this operation.");return yield yt(this,it,"f").execute("/like/dislike",{client:"ANDROID",target:{videoId:e}})})}removeRating(e){return jn(this,void 0,void 0,function*(){if(fe({video_id:e}),!yt(this,it,"f").session.logged_in)throw new Error("You must be signed in to perform this operation.");return yield yt(this,it,"f").execute("/like/removelike",{client:"ANDROID",target:{videoId:e}})})}subscribe(e){return jn(this,void 0,void 0,function*(){if(fe({channel_id:e}),!yt(this,it,"f").session.logged_in)throw new Error("You must be signed in to perform this operation.");return yield yt(this,it,"f").execute("/subscription/subscribe",{client:"ANDROID",channelIds:[e],params:"EgIIAhgA"})})}unsubscribe(e){return jn(this,void 0,void 0,function*(){if(fe({channel_id:e}),!yt(this,it,"f").session.logged_in)throw new Error("You must be signed in to perform this operation.");return yield yt(this,it,"f").execute("/subscription/unsubscribe",{client:"ANDROID",channelIds:[e],params:"CgIIAhgA"})})}comment(e,t){return jn(this,void 0,void 0,function*(){if(fe({video_id:e,text:t}),!yt(this,it,"f").session.logged_in)throw new Error("You must be signed in to perform this operation.");return yield yt(this,it,"f").execute("/comment/create_comment",{client:"ANDROID",commentText:t,createCommentParams:Ve.encodeCommentParams(e)})})}translate(e,t,i={}){return jn(this,void 0,void 0,function*(){fe({text:e,target_language:t});let r=Ve.encodeCommentActionParams(22,Object.assign({text:e,target_language:t},i)),a=yield yt(this,it,"f").execute("/comment/perform_comment_action",{client:"ANDROID",actions:[r]}),l=a.data.frameworkUpdates.entityBatchUpdate.mutations[0].payload.commentEntityPayload;return{success:a.success,status_code:a.status_code,translated_content:l.translatedContent.content,data:a.data}})}setNotificationPreferences(e,t){return jn(this,void 0,void 0,function*(){if(fe({channel_id:e,type:t}),!yt(this,it,"f").session.logged_in)throw new Error("You must be signed in to perform this operation.");let i={PERSONALIZED:1,ALL:2,NONE:3};if(!Object.keys(i).includes(t.toUpperCase()))throw new Error(`Invalid notification preference type: ${t}`);return yield yt(this,it,"f").execute("/notification/modify_channel_preference",{client:"WEB",params:Ve.encodeNotificationPref(e,i[t.toUpperCase()])})})}};s(b0,"InteractionManager");it=new WeakMap;var vb=b0;var w0=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},$C=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},Vi=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},Wt,g0=class{constructor(e){Wt.set(this,void 0),$C(this,Wt,e,"f")}search(e){return w0(this,void 0,void 0,function*(){let t=yield Vi(this,Wt,"f").actions.execute("/search",{query:e,client:"YTKIDS"});return new n0(Vi(this,Wt,"f").actions,t)})}getInfo(e){var t;return w0(this,void 0,void 0,function*(){let i=Li(16),r=Vi(this,Wt,"f").actions.execute("/player",{cpn:i,client:"YTKIDS",videoId:e,playbackContext:{contentPlaybackContext:{signatureTimestamp:((t=Vi(this,Wt,"f").player)===null||t===void 0?void 0:t.sts)||0}}}),a=Vi(this,Wt,"f").actions.execute("/next",{videoId:e,client:"YTKIDS"}),l=yield Promise.all([r,a]);return new r0(l,Vi(this,Wt,"f").actions,i)})}getChannel(e){return w0(this,void 0,void 0,function*(){let t=yield Vi(this,Wt,"f").actions.execute("/browse",{browseId:e,client:"YTKIDS"});return new e0(Vi(this,Wt,"f").actions,t)})}getHomeFeed(){return w0(this,void 0,void 0,function*(){let e=yield Vi(this,Wt,"f").actions.execute("/browse",{browseId:"FEkids_home",client:"YTKIDS"});return new t0(Vi(this,Wt,"f").actions,e)})}};s(g0,"Kids");Wt=new WeakMap;var yb=g0;var Pt=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},aI=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},be=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},x0,yf,we,uI,lI,T0=class{constructor(e){x0.add(this),yf.set(this,void 0),we.set(this,void 0),aI(this,yf,e,"f"),aI(this,we,e.actions,"f")}getInfo(e){if(e instanceof ur)return be(this,x0,"m",lI).call(this,e);if(typeof e=="string")return be(this,x0,"m",uI).call(this,e);throw new x("Invalid target, expected either a video id or a valid MusicTwoRowItem",e)}search(e,t={}){return Pt(this,void 0,void 0,function*(){fe({query:e});let i={query:e,client:"YTMUSIC"};t.type&&t.type!=="all"&&(i.params=Ve.encodeMusicSearchFilters(t));let r=yield be(this,we,"f").execute("/search",i);return new ri(r,be(this,we,"f"),Reflect.has(t,"type")&&t.type!=="all")})}getHomeFeed(){return Pt(this,void 0,void 0,function*(){let e=yield be(this,we,"f").execute("/browse",{client:"YTMUSIC",browseId:"FEmusic_home"});return new Hv(e,be(this,we,"f"))})}getExplore(){return Pt(this,void 0,void 0,function*(){let e=yield be(this,we,"f").execute("/browse",{client:"YTMUSIC",browseId:"FEmusic_explore"});return new Gv(e)})}getLibrary(){return Pt(this,void 0,void 0,function*(){let e=yield be(this,we,"f").execute("/browse",{client:"YTMUSIC",browseId:"FEmusic_library_landing"});return new Kv(e,be(this,we,"f"))})}getArtist(e){return Pt(this,void 0,void 0,function*(){if(fe({artist_id:e}),!e.startsWith("UC")&&!e.startsWith("FEmusic_library_privately_owned_artist"))throw new x("Invalid artist id",e);let t=yield be(this,we,"f").execute("/browse",{client:"YTMUSIC",browseId:e});return new Uv(t,be(this,we,"f"))})}getAlbum(e){return Pt(this,void 0,void 0,function*(){if(fe({album_id:e}),!e.startsWith("MPR")&&!e.startsWith("FEmusic_library_privately_owned_release"))throw new x("Invalid album id",e);let t=yield be(this,we,"f").execute("/browse",{client:"YTMUSIC",browseId:e});return new Lv(t)})}getPlaylist(e){return Pt(this,void 0,void 0,function*(){fe({playlist_id:e}),e.startsWith("VL")||(e=`VL${e}`);let t=yield be(this,we,"f").execute("/browse",{client:"YTMUSIC",browseId:e});return new Gr(t,be(this,we,"f"))})}getUpNext(e,t=!0){var i,r,a;return Pt(this,void 0,void 0,function*(){fe({video_id:e});let h=(i=(yield be(this,we,"f").execute("/next",{videoId:e,client:"YTMUSIC",parse:!0})).contents_memo)===null||i===void 0?void 0:i.getType(Ee),v=h==null?void 0:h.first();if(!v)throw new x("Could not find target tab.");let _=(r=v.content)===null||r===void 0?void 0:r.as(cr);if(!_||!_.content)throw new x("Music queue was empty, the given id is probably invalid.",_);let p=_.content.as(bi);if(!p.playlist_id&&t){let b=p.contents.firstOfType(mn);if(!b)throw new x("Automix item not found");let I=yield(a=b.playlist_video)===null||a===void 0?void 0:a.endpoint.call(be(this,we,"f"),{videoId:e,client:"YTMUSIC",parse:!0});if(!I||!I.contents_memo)throw new x("Could not fetch automix");return I.contents_memo.getType(bi).first()}return p})}getRelated(e){var t;return Pt(this,void 0,void 0,function*(){fe({video_id:e});let r=(t=(yield be(this,we,"f").execute("/next",{videoId:e,client:"YTMUSIC",parse:!0})).contents_memo)===null||t===void 0?void 0:t.getType(Ee),a=r==null?void 0:r.matchCondition(v=>{var _,p;return((p=(_=v.endpoint.payload.browseEndpointContextSupportedConfigs)===null||_===void 0?void 0:_.browseEndpointContextMusicConfig)===null||p===void 0?void 0:p.pageType)==="MUSIC_PAGE_TYPE_TRACK_RELATED"});if(!a)throw new x("Could not find target tab.");let l=yield a.endpoint.call(be(this,we,"f"),{client:"YTMUSIC",parse:!0});if(!l.contents)throw new x("Unexpected response",l);return l.contents.item().as(pe).contents.as(Ge,oo)})}getLyrics(e){var t;return Pt(this,void 0,void 0,function*(){fe({video_id:e});let r=(t=(yield be(this,we,"f").execute("/next",{videoId:e,client:"YTMUSIC",parse:!0})).contents_memo)===null||t===void 0?void 0:t.getType(Ee),a=r==null?void 0:r.matchCondition(v=>{var _,p;return((p=(_=v.endpoint.payload.browseEndpointContextSupportedConfigs)===null||_===void 0?void 0:_.browseEndpointContextMusicConfig)===null||p===void 0?void 0:p.pageType)==="MUSIC_PAGE_TYPE_TRACK_LYRICS"});if(!a)throw new x("Could not find target tab.");let l=yield a.endpoint.call(be(this,we,"f"),{client:"YTMUSIC",parse:!0});if(!l.contents)throw new x("Unexpected response",l);if(l.contents.item().key("type").string()==="Message")throw new x(l.contents.item().as(pt).text,e);return l.contents.item().as(pe).contents.firstOfType(oo)})}getRecap(){return Pt(this,void 0,void 0,function*(){let e=yield be(this,we,"f").execute("/browse",{browseId:"FEmusic_listening_review",client:"YTMUSIC_ANDROID"});return new Xv(e,be(this,we,"f"))})}getSearchSuggestions(e){var t,i;return Pt(this,void 0,void 0,function*(){let a=(i=(t=(yield be(this,we,"f").execute("/music/get_search_suggestions",{parse:!0,input:e,client:"YTMUSIC"})).contents_memo)===null||t===void 0?void 0:t.getType(J_))===null||i===void 0?void 0:i[0];return a!=null&&a.contents.is_array?a==null?void 0:a.contents.array():Le([])})}};s(T0,"Music");yf=new WeakMap,we=new WeakMap,x0=new WeakSet,uI=s(function(e){var t;return Pt(this,void 0,void 0,function*(){let i=Li(16),r=be(this,we,"f").execute("/player",{cpn:i,client:"YTMUSIC",videoId:e,playbackContext:{contentPlaybackContext:{signatureTimestamp:((t=be(this,yf,"f").player)===null||t===void 0?void 0:t.sts)||0}}}),a=be(this,we,"f").execute("/next",{client:"YTMUSIC",videoId:e}),l=yield Promise.all([r,a]);return new hf(l,be(this,we,"f"),i)})},"_Music_fetchInfoFromVideoId"),lI=s(function(e){var t;return Pt(this,void 0,void 0,function*(){if(!e)throw new x("List item cannot be undefined");if(!e.endpoint)throw new Error("This item does not have an endpoint.");let i=Li(16),r=e.endpoint.call(be(this,we,"f"),{cpn:i,client:"YTMUSIC",playbackContext:{contentPlaybackContext:{signatureTimestamp:((t=be(this,yf,"f").player)===null||t===void 0?void 0:t.sts)||0}}}),a=e.endpoint.call(be(this,we,"f"),{client:"YTMUSIC",enablePersistentPlaylistPanel:!0,override_endpoint:"/next"}),l=yield Promise.all([r,a]);return new hf(l,be(this,we,"f"),i)})},"_Music_fetchInfoFromListItem");var bb=T0;var Oo=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},XC=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},Nt=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},st,I0=class{constructor(e){st.set(this,void 0),XC(this,st,e,"f")}create(e,t){return Oo(this,void 0,void 0,function*(){if(fe({title:e,video_ids:t}),!Nt(this,st,"f").session.logged_in)throw new x("You must be signed in to perform this operation.");let i=yield Nt(this,st,"f").execute("/playlist/create",{title:e,ids:t,parse:!1});return{success:i.success,status_code:i.status_code,playlist_id:i.data.playlistId,data:i.data}})}delete(e){return Oo(this,void 0,void 0,function*(){if(fe({playlist_id:e}),!Nt(this,st,"f").session.logged_in)throw new x("You must be signed in to perform this operation.");let t=yield Nt(this,st,"f").execute("playlist/delete",{playlistId:e});return{playlist_id:e,success:t.success,status_code:t.status_code,data:t.data}})}addVideos(e,t){return Oo(this,void 0,void 0,function*(){if(fe({playlist_id:e,video_ids:t}),!Nt(this,st,"f").session.logged_in)throw new x("You must be signed in to perform this operation.");let i=yield Nt(this,st,"f").execute("/browse/edit_playlist",{playlistId:e,actions:t.map(r=>({action:"ACTION_ADD_VIDEO",addedVideoId:r})),parse:!1});return{playlist_id:e,action_result:i.data.actions}})}removeVideos(e,t){return Oo(this,void 0,void 0,function*(){if(fe({playlist_id:e,video_ids:t}),!Nt(this,st,"f").session.logged_in)throw new x("You must be signed in to perform this operation.");let i=yield Nt(this,st,"f").execute("/browse",{browseId:`VL${e}`,parse:!0}),r=new tn(Nt(this,st,"f"),i,!0);if(!r.info.is_editable)throw new x("This playlist cannot be edited.",e);let a={playlistId:e,actions:[]},l=s(v=>Oo(this,void 0,void 0,function*(){if(v.videos.filter(p=>t.includes(p.key("id").string())).forEach(p=>a.actions.push({action:"ACTION_REMOVE_VIDEO",setVideoId:p.key("set_video_id").string()})),a.actions.length<t.length){let p=yield v.getContinuation();return l(p)}}),"getSetVideoIds");if(yield l(r),!a.actions.length)throw new x("Given video ids were not found in this playlist.",t);let h=yield Nt(this,st,"f").execute("/browse/edit_playlist",Object.assign(Object.assign({},a),{parse:!1}));return{playlist_id:e,action_result:h.data.actions}})}moveVideo(e,t,i){return Oo(this,void 0,void 0,function*(){if(fe({playlist_id:e,moved_video_id:t,predecessor_video_id:i}),!Nt(this,st,"f").session.logged_in)throw new x("You must be signed in to perform this operation.");let r=yield Nt(this,st,"f").execute("/browse",{browseId:`VL${e}`,parse:!0}),a=new tn(Nt(this,st,"f"),r,!0);if(!a.info.is_editable)throw new x("This playlist cannot be edited.",e);let l={playlistId:e,actions:[]},h,v,_=s(b=>Oo(this,void 0,void 0,function*(){let I=b.videos.find(k=>t===k.key("id").string()),C=b.videos.find(k=>i===k.key("id").string());if(h=h||(I==null?void 0:I.key("set_video_id").string()),v=v||(C==null?void 0:C.key("set_video_id").string()),!h||!v){let k=yield b.getContinuation();return _(k)}}),"getSetVideoIds");yield _(a),l.actions.push({action:"ACTION_MOVE_VIDEO_AFTER",setVideoId:h,movedSetVideoIdPredecessor:v});let p=yield Nt(this,st,"f").execute("/browse/edit_playlist",Object.assign(Object.assign({},l),{parse:!1}));return{playlist_id:e,action_result:p.data.actions}})}};s(I0,"PlaylistManager");st=new WeakMap;var wb=I0;var es=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},QC=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},ai=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},bf,ui,cI,dI,pI,S0=class{constructor(e){bf.add(this),ui.set(this,void 0),QC(this,ui,e,"f")}setThumbnail(e,t){return es(this,void 0,void 0,function*(){if(!ai(this,ui,"f").logged_in)throw new x("You must be signed in to perform this operation.");if(!e||!t)throw new Jn("One or more parameters are missing.");let i=Ve.encodeCustomThumbnailPayload(e,t);return yield ai(this,ui,"f").actions.execute("/video_manager/metadata_update",{protobuf:!0,serialized_data:i})})}updateVideoMetadata(e,t){return es(this,void 0,void 0,function*(){if(!ai(this,ui,"f").logged_in)throw new x("You must be signed in to perform this operation.");let i=Ve.encodeVideoMetadataPayload(e,t);return yield ai(this,ui,"f").actions.execute("/video_manager/metadata_update",{protobuf:!0,serialized_data:i})})}upload(e,t={}){return es(this,void 0,void 0,function*(){if(!ai(this,ui,"f").logged_in)throw new x("You must be signed in to perform this operation.");let i=yield ai(this,bf,"m",cI).call(this),r=yield ai(this,bf,"m",dI).call(this,i.upload_url,e);if(r.status!=="STATUS_SUCCESS")throw new x("Could not process video.");return yield ai(this,bf,"m",pI).call(this,i,r,t)})}};s(S0,"Studio");ui=new WeakMap,bf=new WeakSet,cI=s(function(){return es(this,void 0,void 0,function*(){let e=`innertube_android:${U.shim.uuidv4()}:0:v=3,api=1,cf=3`,t={frontendUploadId:e,deviceDisplayName:"Pixel 6 Pro",fileId:`goog-edited-video://generated?videoFileUri=content://media/external/video/media/${U.shim.uuidv4()}`,mp4MoovAtomRelocationStatus:"UNSUPPORTED",transcodeResult:"DISABLED",connectionType:"WIFI"},i=yield ai(this,ui,"f").http.fetch("/upload/youtubei",{baseURL:ji.URLS.YT_UPLOAD,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","x-goog-upload-command":"start","x-goog-upload-protocol":"resumable"},body:JSON.stringify(t)});if(!i.ok)throw new x("Could not get initial upload data");return{frontend_upload_id:e,upload_id:i.headers.get("x-guploader-uploadid"),upload_url:i.headers.get("x-goog-upload-url"),scotty_resource_id:i.headers.get("x-goog-upload-header-scotty-resource-id"),chunk_granularity:i.headers.get("x-goog-upload-chunk-granularity")}})},"_Studio_getInitialUploadData"),dI=s(function(e,t){return es(this,void 0,void 0,function*(){let i=yield ai(this,ui,"f").http.fetch_function(e,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","x-goog-upload-command":"upload, finalize","x-goog-upload-file-name":`file-${Date.now()}`,"x-goog-upload-offset":"0"},body:t});if(!i.ok)throw new x("Could not upload video");return yield i.json()})},"_Studio_uploadVideo"),pI=s(function(e,t,i){return es(this,void 0,void 0,function*(){let r={resourceId:{scottyResourceId:{id:t.scottyResourceId}},frontendUploadId:e.frontend_upload_id,initialMetadata:{title:{newTitle:i.title||new Date().toDateString()},description:{newDescription:i.description||"",shouldSegment:!0},privacy:{newPrivacy:i.privacy||"PRIVATE"},draftState:{isDraft:i.is_draft||!1}}};return yield ai(this,ui,"f").actions.execute("/upload/createvideo",Object.assign({client:"ANDROID"},r))})},"_Studio_setVideoMetadata");var gb=S0;var ZC=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},fI=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},wf,ts=class{constructor(e){wf.set(this,void 0),ZC(this,wf,j.parseResponse(e),"f"),this.contents=fI(this,wf,"f").items.array().as(sr,Um)}get page(){return fI(this,wf,"f")}};s(ts,"Guide");wf=new WeakMap;var ze=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},eE=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},li=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},Mt,dn=class{constructor(e){Mt.set(this,void 0),eE(this,Mt,e,"f")}static create(e={}){return ze(this,void 0,void 0,function*(){return new dn(yield si.create(e))})}getInfo(e,t){var i;return ze(this,void 0,void 0,function*(){fe({target:e});let r;if(e instanceof T){let _=(i=e.payload)===null||i===void 0?void 0:i.videoId;if(!_)throw new x("Missing video id in endpoint payload.",e);r={videoId:_},e.payload.playlistId&&(r.playlistId=e.payload.playlistId),e.payload.params&&(r.params=e.payload.params),e.payload.index&&(r.playlistIndex=e.payload.index)}else if(typeof e=="string")r={videoId:e};else throw new x("Invalid target, expected either a video id or a valid NavigationEndpoint",e);let a=Li(16),l=this.actions.getVideoInfo(r.videoId,a,t),h=this.actions.execute("/next",r),v=yield Promise.all([l,h]);return new rf(v,this.actions,a)})}getBasicInfo(e,t){return ze(this,void 0,void 0,function*(){fe({video_id:e});let i=Li(16),r=yield this.actions.getVideoInfo(e,i,t);return new rf([r],this.actions,i)})}search(e,t={}){return ze(this,void 0,void 0,function*(){fe({query:e});let i=Object.assign({query:e},{params:t?Ve.encodeSearchFilters(t):void 0}),r=yield this.actions.execute("/search",i);return new Nv(this.actions,r)})}getSearchSuggestions(e){return ze(this,void 0,void 0,function*(){fe({query:e});let t=new URL(`${G.URLS.YT_SUGGESTIONS}search`);t.searchParams.set("q",e),t.searchParams.set("hl",li(this,Mt,"f").context.client.hl),t.searchParams.set("gl",li(this,Mt,"f").context.client.gl),t.searchParams.set("ds","yt"),t.searchParams.set("client","youtube"),t.searchParams.set("xssi","t"),t.searchParams.set("oe","UTF");let r=yield(yield li(this,Mt,"f").http.fetch(t)).text();return JSON.parse(r.replace(")]}'",""))[1].map(h=>h[0])})}getComments(e,t){return ze(this,void 0,void 0,function*(){fe({video_id:e});let i=Ve.encodeCommentsSectionParams(e,{sort_by:t||"TOP_COMMENTS"}),r=yield this.actions.execute("/next",{continuation:i});return new fv(this.actions,r.data)})}getHomeFeed(){return ze(this,void 0,void 0,function*(){let e=yield this.actions.execute("/browse",{browseId:"FEwhat_to_watch"});return new ii(this.actions,e)})}getGuide(){return ze(this,void 0,void 0,function*(){let e=yield this.actions.execute("/guide");return new ts(e.data)})}getLibrary(){return ze(this,void 0,void 0,function*(){let e=yield this.actions.execute("/browse",{browseId:"FElibrary"});return new gv(this.actions,e)})}getHistory(){return ze(this,void 0,void 0,function*(){let e=yield this.actions.execute("/browse",{browseId:"FEhistory"});return new Ir(this.actions,e)})}getTrending(){return ze(this,void 0,void 0,function*(){let e=yield this.actions.execute("/browse",{browseId:"FEtrending",parse:!0});return new Jp(this.actions,e)})}getSubscriptionsFeed(){return ze(this,void 0,void 0,function*(){let e=yield this.actions.execute("/browse",{browseId:"FEsubscriptions",parse:!0});return new Ne(this.actions,e)})}getChannel(e){return ze(this,void 0,void 0,function*(){fe({id:e});let t=yield this.actions.execute("/browse",{browseId:e});return new Xe(this.actions,t)})}getNotifications(){return ze(this,void 0,void 0,function*(){let e=yield this.actions.execute("/notification/get_notification_menu",{notificationsMenuRequestType:"NOTIFICATIONS_MENU_REQUEST_TYPE_INBOX"});return new Pv(this.actions,e)})}getUnseenNotificationsCount(){var e,t,i,r;return ze(this,void 0,void 0,function*(){let a=yield this.actions.execute("/notification/get_unseen_count");return((e=a.data)===null||e===void 0?void 0:e.unseenCount)||((r=(i=(t=a.data)===null||t===void 0?void 0:t.actions)===null||i===void 0?void 0:i[0].updateNotificationsUnseenCountAction)===null||r===void 0?void 0:r.unseenCount)||0})}getPlaylist(e){return ze(this,void 0,void 0,function*(){fe({id:e}),e.startsWith("VL")||(e=`VL${e}`);let t=yield this.actions.execute("/browse",{browseId:e});return new tn(this.actions,t)})}getHashtag(e){return ze(this,void 0,void 0,function*(){fe({hashtag:e});let t=Ve.encodeHashtag(e),i=yield this.actions.execute("/browse",{browseId:"FEhashtag",params:t});return new Dn(this.actions,i)})}getStreamingData(e,t={}){return ze(this,void 0,void 0,function*(){return(yield this.getBasicInfo(e)).chooseFormat(t)})}download(e,t){return ze(this,void 0,void 0,function*(){return(yield this.getBasicInfo(e,t==null?void 0:t.client)).download(t)})}resolveURL(e){return ze(this,void 0,void 0,function*(){return(yield this.actions.execute("/navigation/resolve_url",{url:e,parse:!0})).endpoint})}call(e,t){return e.call(this.actions,t)}get music(){return new bb(li(this,Mt,"f"))}get studio(){return new gb(li(this,Mt,"f"))}get kids(){return new yb(li(this,Mt,"f"))}get account(){return new _b(li(this,Mt,"f").actions)}get playlist(){return new wb(li(this,Mt,"f").actions)}get interact(){return new vb(li(this,Mt,"f").actions)}get actions(){return li(this,Mt,"f").actions}get session(){return li(this,Mt,"f")}};s(dn,"Innertube");Mt=new WeakMap;var hI={};var mI=dn;var xb=function(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return s(r,"adopt"),new(t||(t=Promise))(function(a,l){function h(p){try{_(i.next(p))}catch(b){l(b)}}s(h,"fulfilled");function v(p){try{_(i.throw(p))}catch(b){l(b)}}s(v,"rejected");function _(p){p.done?a(p.value):r(p.value).then(h,v)}s(_,"step"),_((i=i.apply(n,e||[])).next())})},_I=function(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},gf=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},xf,C0,E0,k0,P0=class{constructor(e=!1,t){xf.add(this),C0.set(this,void 0),E0.set(this,void 0),_I(this,C0,t||"","f"),_I(this,E0,e,"f")}get cache_dir(){return gf(this,E0,"f")?gf(this,C0,"f"):""}get(e){return xb(this,void 0,void 0,function*(){let t=yield gf(this,xf,"m",k0).call(this);if(!!t)return new Promise((i,r)=>{let a=t.transaction("kv-store","readonly").objectStore("kv-store").get(e);a.onerror=r,a.onsuccess=function(){var l;let h=(l=this.result)===null||l===void 0?void 0:l.v;i(h?h.buffer:void 0)}})})}set(e,t){return xb(this,void 0,void 0,function*(){let i=yield gf(this,xf,"m",k0).call(this);if(!!i)return new Promise((r,a)=>{let l=i.transaction("kv-store","readwrite").objectStore("kv-store").put({k:e,v:t});l.onerror=a,l.onsuccess=()=>r()})})}remove(e){return xb(this,void 0,void 0,function*(){let t=yield gf(this,xf,"m",k0).call(this);if(!!t)return new Promise((i,r)=>{let a=t.transaction("kv-store","readwrite").objectStore("kv-store").delete(e);a.onerror=r,a.onsuccess=()=>i()})})}};s(P0,"Cache");C0=new WeakMap,E0=new WeakMap,xf=new WeakSet,k0=s(function(){let e=Reflect.get(globalThis,"indexedDB")||Reflect.get(globalThis,"webkitIndexedDB")||Reflect.get(globalThis,"mozIndexedDB")||Reflect.get(globalThis,"msIndexedDB");return e?new Promise((t,i)=>{let r=e.open("youtubei.js",1);r.onsuccess=function(){t(this.result)},r.onerror=function(a){i("indexedDB request error"),console.error(a)},r.onupgradeneeded=function(){let a=this.result.createObjectStore("kv-store",{keyPath:"k"});a.transaction.oncomplete=function(){t(this.db)}}}):console.log("IndexedDB is not supported. No cache will be used.")},"_Cache_getBrowserDB");U.load({runtime:"browser",server:!1,info:{version:Rf.version,bugs_url:Rf.bugs.url,repo_url:Rf.homepage.split("#")[0]},Cache:P0,sha1Hash:G0,uuidv4(){var n;return!((n=globalThis.crypto)===null||n===void 0)&&n.randomUUID()?globalThis.crypto.randomUUID():"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>{let t=parseInt(e);return(t^window.crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)})},eval:Sy,DOMParser:globalThis.DOMParser,serializeDOM(n){return new XMLSerializer().serializeToString(n)},fetch:globalThis.fetch,Request:globalThis.Request,Response:globalThis.Response,Headers:globalThis.Headers,FormData:globalThis.FormData,File:globalThis.File,ReadableStream:globalThis.ReadableStream,CustomEvent:globalThis.CustomEvent});var Dme=mI;export{_b as AccountManager,db as Actions,jp as AppendContinuationItemsAction,_0 as ClientType,ji as Constants,yr as Continuation,Yi as EventEmitter,Ne as Feed,yo as FilterableFeed,tf as FormatUtils,Ly as Generator,fo as GridContinuation,ko as HTTPClient,B0 as Helpers,dn as Innertube,vb as InteractionManager,uo as ItemSectionContinuation,yb as Kids,ho as LiveChatContinuation,Uy as Misc,bb as Music,po as MusicPlaylistShelfContinuation,en as MusicShelfContinuation,lo as NavigateAction,hb as OAuth,f as Parser,U as Platform,kt as Player,wb as PlaylistManager,Yp as PlaylistPanelContinuation,Ve as Proto,co as ReloadContinuationItemsCommand,Dt as SectionListContinuation,si as Session,gb as Studio,Jp as TabbedFeed,hI as Types,Zp as UniversalCache,W0 as Utils,sb as YT,lb as YTKids,ub as YTMusic,Dp as YTNodes,Dme as default};
//# sourceMappingURL=browser.min.js.map
